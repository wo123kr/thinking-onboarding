{"ast":null,"code":"var _jsxFileName = \"/Users/jegaljin-u/workspace/thinking-guide/src/components/AdvancedIdleRPG.tsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from \"react\";\nimport { useTheme } from \"../contexts/ThemeContext\";\nimport { useLanguage } from \"../contexts/LanguageContext\";\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport const AdvancedIdleRPG = ({\n  onAction,\n  isSimulating,\n  currentAction,\n  userStats,\n  setUserStats,\n  currentUser\n}) => {\n  _s();\n  const {\n    colors\n  } = useTheme();\n  const {\n    t\n  } = useLanguage();\n\n  // 스킬 데미지 계산 함수\n  const calculateSkillDamage = (skill, character) => {\n    if (skill.level === 0 || !skill.isLearned) return 0;\n    let damage = skill.baseDamage;\n\n    // 레벨에 따른 데미지 증가\n    damage += skill.baseDamage * skill.damageMultiplier * (skill.level - 1);\n\n    // 스탯에 따른 데미지 증가\n    if (skill.statMultiplier.attack) {\n      damage += character.attack * skill.statMultiplier.attack * skill.level;\n    }\n    if (skill.statMultiplier.defense) {\n      damage += character.defense * skill.statMultiplier.defense * skill.level;\n    }\n    if (skill.statMultiplier.hp) {\n      damage += character.maxHp * skill.statMultiplier.hp * skill.level;\n    }\n    if (skill.statMultiplier.mp) {\n      damage += character.maxMp * skill.statMultiplier.mp * skill.level;\n    }\n    return Math.floor(damage);\n  };\n\n  // CSS 애니메이션 추가\n  React.useEffect(() => {\n    const style = document.createElement(\"style\");\n    style.textContent = `\n      @keyframes progress {\n        0% {\n          width: 0%;\n        }\n        100% {\n          width: 100%;\n        }\n      }\n      @keyframes pulse {\n        0%, 100% {\n          opacity: 1;\n        }\n        50% {\n          opacity: 0.7;\n        }\n      }\n    `;\n    document.head.appendChild(style);\n    return () => {\n      document.head.removeChild(style);\n    };\n  }, []);\n  // 캐릭터 초기 상태를 함수로 분리하여 재사용성 증대\n  const getInitialCharacter = () => ({\n    id: \"1\",\n    name: \"용사\",\n    level: 1,\n    exp: 0,\n    maxExp: 100,\n    hp: 100,\n    maxHp: 100,\n    mp: 50,\n    maxMp: 50,\n    attack: 20,\n    defense: 10,\n    speed: 15,\n    gold: 100,\n    class: \"전사\",\n    skills: [\n    // 기본 스킬들을 미리 정의하여 초기화 문제 방지\n    {\n      id: 'basic-attack',\n      name: '기본 공격',\n      level: 1,\n      maxLevel: 10,\n      baseDamage: 15,\n      damageMultiplier: 0.2,\n      statMultiplier: {\n        attack: 1.0\n      },\n      manaCost: 0,\n      cooldown: 1000,\n      currentCooldown: 0,\n      type: 'active',\n      category: 'combat',\n      description: '기본적인 물리 공격입니다.',\n      requiredLevel: 1,\n      isUnlocked: true,\n      isLearned: true\n    }, {\n      id: 'power-strike',\n      name: '강력한 베기',\n      level: 0,\n      maxLevel: 10,\n      baseDamage: 25,\n      damageMultiplier: 0.3,\n      statMultiplier: {\n        attack: 1.5\n      },\n      manaCost: 15,\n      cooldown: 3000,\n      currentCooldown: 0,\n      type: 'active',\n      category: 'combat',\n      description: '강력한 일격을 가합니다.',\n      requiredLevel: 3,\n      isUnlocked: true,\n      isLearned: false\n    }, {\n      id: 'heal',\n      name: '치유',\n      level: 0,\n      maxLevel: 10,\n      baseDamage: 30,\n      damageMultiplier: 0.25,\n      statMultiplier: {\n        mp: 0.5\n      },\n      manaCost: 20,\n      cooldown: 5000,\n      currentCooldown: 0,\n      type: 'active',\n      category: 'support',\n      description: 'HP를 회복합니다.',\n      requiredLevel: 2,\n      isUnlocked: true,\n      isLearned: false\n    }, {\n      id: 'strength-boost',\n      name: '힘 증가',\n      level: 0,\n      maxLevel: 5,\n      baseDamage: 0,\n      damageMultiplier: 0,\n      statMultiplier: {\n        attack: 0.1\n      },\n      manaCost: 0,\n      cooldown: 0,\n      currentCooldown: 0,\n      type: 'passive',\n      category: 'passive',\n      description: '공격력을 영구적으로 증가시킵니다.',\n      requiredLevel: 5,\n      isUnlocked: true,\n      isLearned: false\n    }],\n    equipment: {},\n    stats: {\n      strength: 10,\n      agility: 8,\n      intelligence: 5,\n      vitality: 12,\n      luck: 7,\n      availablePoints: 0\n    },\n    prestige: 0,\n    rebirth: 0,\n    buffs: {\n      attack: {\n        amount: 0,\n        duration: 0\n      },\n      defense: {\n        amount: 0,\n        duration: 0\n      },\n      speed: {\n        amount: 0,\n        duration: 0\n      }\n    }\n  });\n  const [currentTab, setCurrentTab] = useState(\"lobby\");\n  const [gameMode, setGameMode] = useState(\"lobby\");\n  const [isAutoFighting, setIsAutoFighting] = useState(false);\n  const [currentMonster, setCurrentMonster] = useState(null);\n  const [combatLog, setCombatLog] = useState([]);\n  const [selectedDungeon, setSelectedDungeon] = useState(null);\n  const [inventory, setInventory] = useState([]);\n  const [availableDungeons, setAvailableDungeons] = useState([]);\n  const [currentDungeon, setCurrentDungeon] = useState(null);\n  const [inDungeon, setInDungeon] = useState(false);\n  const [guild, setGuild] = useState(null);\n  const [shop, setShop] = useState([]);\n  const [achievements, setAchievements] = useState([]);\n  const [monstersDefeated, setMonstersDefeated] = useState(0);\n  const [totalGoldEarned, setTotalGoldEarned] = useState(0);\n  const [showDungeonChoice, setShowDungeonChoice] = useState(false);\n  const logRef = useRef(null);\n\n  // 게임 초기화\n  useEffect(() => {\n    initializeGame();\n  }, []);\n\n  // 캐릭터 상태가 변경될 때마다 userStats 업데이트\n  useEffect(() => {\n    setUserStats({\n      level: character.level,\n      gold: character.gold,\n      attack: character.attack,\n      defense: character.defense,\n      hp: character.hp,\n      maxHp: character.maxHp,\n      exp: character.exp,\n      maxExp: character.maxExp,\n      monsters_defeated: monstersDefeated,\n      character_class: character.class,\n      total_gold_earned: totalGoldEarned,\n      inventory_items: inventory.map(item => ({\n        id: item.id,\n        name: item.name,\n        type: item.type,\n        rarity: item.rarity,\n        quantity: item.quantity || 1,\n        stats: item.stats\n      })),\n      skills: character.skills.map(skill => ({\n        id: skill.id,\n        name: skill.name,\n        level: skill.level,\n        type: skill.type\n      })),\n      current_buffs: Object.entries(character.buffs).filter(([_, buff]) => buff.duration > 0).map(([type, buff]) => ({\n        type,\n        amount: buff.amount,\n        duration: Math.ceil(buff.duration / 1000)\n      }))\n    });\n  }, [character, inventory, monstersDefeated, totalGoldEarned, setUserStats]);\n  const initializeGame = () => {\n    // 언어별 텍스트 정의\n    const translations = {\n      ko: {\n        character: {\n          name: \"용사\",\n          class: \"전사\"\n        },\n        skills: {\n          slash: {\n            name: \"강력한 베기\",\n            description: \"강력한 일격을 가합니다.\"\n          },\n          heal: {\n            name: \"치유\",\n            description: \"HP를 회복합니다.\"\n          },\n          critical: {\n            name: \"치명타 숙련\",\n            description: \"치명타 확률을 증가시킵니다.\"\n          }\n        },\n        dungeons: {\n          forest: {\n            name: \"어둠의 숲\",\n            description: \"초보자를 위한 던전입니다.\"\n          },\n          cave: {\n            name: \"고블린 동굴\",\n            description: \"고블린들이 서식하는 위험한 동굴입니다.\"\n          },\n          tower: {\n            name: \"마법사의 탑\",\n            description: \"강력한 마법 몬스터들이 있는 탑입니다.\"\n          }\n        },\n        items: {\n          sword1: \"강철 검\",\n          armor1: \"가죽 갑옷\",\n          helmet1: \"철제 투구\",\n          health_potion: \"체력 물약\",\n          mana_potion: \"마나 물약\",\n          greater_health_potion: \"고급 체력 물약\",\n          strength_potion: \"힘의 물약\",\n          defense_potion: \"방어의 물약\"\n        },\n        monsters: {\n          slime: \"슬라임\",\n          goblin: \"고블린\",\n          orc: \"오크\",\n          troll: \"트롤\",\n          dragon: \"드래곤\"\n        },\n        combat: {\n          appeared: \"이 나타났다!\",\n          attack: \"의 공격!\",\n          damage: \"데미지!\",\n          critical: \"치명타!\",\n          levelUp: \"🎉 레벨업! Lv.\",\n          defeated: \"를 물리쳤다! EXP +\",\n          gold: \", 골드 +\",\n          itemObtained: \"✨ 을 획득했습니다!\",\n          dungeonCleared: \"🎉  던전을 클리어했습니다!\",\n          nextFloor: \"층으로 자동 진행합니다!\",\n          dungeonExited: \"던전에서 자동으로 나왔습니다. 체력과 마나가 완전히 회복되었습니다!\",\n          hpMpRecovered: \"체력과 마나가 완전히 회복되었습니다!\",\n          defeat: \"전투에서 패배했습니다...\"\n        }\n      },\n      en: {\n        character: {\n          name: \"Hero\",\n          class: \"Warrior\"\n        },\n        skills: {\n          slash: {\n            name: \"Power Slash\",\n            description: \"Delivers a powerful strike.\"\n          },\n          heal: {\n            name: \"Heal\",\n            description: \"Restores HP.\"\n          },\n          critical: {\n            name: \"Critical Mastery\",\n            description: \"Increases critical hit chance.\"\n          }\n        },\n        dungeons: {\n          forest: {\n            name: \"Dark Forest\",\n            description: \"A dungeon for beginners.\"\n          },\n          cave: {\n            name: \"Goblin Cave\",\n            description: \"A dangerous cave inhabited by goblins.\"\n          },\n          tower: {\n            name: \"Mage Tower\",\n            description: \"A tower with powerful magic monsters.\"\n          }\n        },\n        items: {\n          sword1: \"Steel Sword\",\n          armor1: \"Leather Armor\",\n          helmet1: \"Iron Helmet\",\n          health_potion: \"Health Potion\",\n          mana_potion: \"Mana Potion\",\n          greater_health_potion: \"Greater Health Potion\",\n          strength_potion: \"Strength Potion\",\n          defense_potion: \"Defense Potion\"\n        },\n        monsters: {\n          slime: \"Slime\",\n          goblin: \"Goblin\",\n          orc: \"Orc\",\n          troll: \"Troll\",\n          dragon: \"Dragon\"\n        },\n        combat: {\n          appeared: \" appeared!\",\n          attack: \"'s attack!\",\n          damage: \" damage!\",\n          critical: \" (Critical!)\",\n          levelUp: \"🎉 Level up! Lv.\",\n          defeated: \" defeated! EXP +\",\n          gold: \", Gold +\",\n          itemObtained: \"✨ obtained!\",\n          dungeonCleared: \"🎉  dungeon cleared!\",\n          nextFloor: \"Proceeding to floor  automatically!\",\n          dungeonExited: \"Automatically exited dungeon. HP and MP fully restored!\",\n          hpMpRecovered: \"HP and MP fully restored!\",\n          defeat: \"Defeated in battle...\"\n        }\n      },\n      zh: {\n        character: {\n          name: \"勇者\",\n          class: \"战士\"\n        },\n        skills: {\n          slash: {\n            name: \"强力斩击\",\n            description: \"发动强力一击。\"\n          },\n          heal: {\n            name: \"治疗\",\n            description: \"恢复生命值。\"\n          },\n          critical: {\n            name: \"暴击精通\",\n            description: \"增加暴击几率。\"\n          }\n        },\n        dungeons: {\n          forest: {\n            name: \"黑暗森林\",\n            description: \"适合新手的地下城。\"\n          },\n          cave: {\n            name: \"哥布林洞穴\",\n            description: \"哥布林栖息的危险洞穴。\"\n          },\n          tower: {\n            name: \"法师塔\",\n            description: \"有强力魔法怪物的塔。\"\n          }\n        },\n        items: {\n          sword1: \"钢铁剑\",\n          armor1: \"皮甲\",\n          helmet1: \"铁盔\",\n          health_potion: \"生命药水\",\n          mana_potion: \"魔法药水\",\n          greater_health_potion: \"高级生命药水\",\n          strength_potion: \"力量药水\",\n          defense_potion: \"防御药水\"\n        },\n        monsters: {\n          slime: \"史莱姆\",\n          goblin: \"哥布林\",\n          orc: \"兽人\",\n          troll: \"巨魔\",\n          dragon: \"龙\"\n        },\n        combat: {\n          appeared: \"出现了！\",\n          attack: \"的攻击！\",\n          damage: \"伤害！\",\n          critical: \"暴击！\",\n          levelUp: \"🎉 升级！Lv.\",\n          defeated: \"被击败！经验 +\",\n          gold: \"，金币 +\",\n          itemObtained: \"✨ 获得了！\",\n          dungeonCleared: \"🎉 地下城通关！\",\n          nextFloor: \"自动前往第 层！\",\n          dungeonExited: \"自动离开地下城。生命值和魔法值完全恢复！\",\n          hpMpRecovered: \"生命值和魔法值完全恢复！\",\n          defeat: \"战斗失败...\"\n        }\n      }\n    };\n\n    // 현재 언어 가져오기 (기본값: 한국어)\n    const currentLang = localStorage.getItem(\"language\") || \"ko\";\n    const texts = translations[currentLang] || translations.ko;\n    // 모든 스킬 정의 함수 (공통 사용)\n    const getAllSkills = (currentLevel, existingSkills) => {\n      var _existingSkills$find;\n      const allSkills = [\n      // 전투 스킬 (레벨 1)\n      {\n        id: \"slash\",\n        name: \"강력한 베기\",\n        level: (existingSkills === null || existingSkills === void 0 ? void 0 : (_existingSkills$find = existingSkills.find(s => s.id === \"slash\")) === null || _existingSkills$find === void 0 ? void 0 : _existingSkills$find.level) || 0,\n        maxLevel: 10,\n        baseDamage: 20,\n        damageMultiplier: 0.5,\n        statMultiplier: {\n          attack: 2.0\n        },\n        manaCost: 10,\n        cooldown: 3000,\n        currentCooldown: 0,\n        type: \"active\",\n        category: \"combat\",\n        description: \"강력한 일격을 가합니다. (기본 데미지 + 공격력 x 2.0)\",\n        requiredLevel: 1,\n        isUnlocked: currentLevel >= 1,\n        isLearned: false\n      }, {\n        id: \"heal\",\n        name: \"치유\",\n        level: 0,\n        maxLevel: 10,\n        baseDamage: 30,\n        damageMultiplier: 0.3,\n        statMultiplier: {\n          mp: 1.5\n        },\n        manaCost: 15,\n        cooldown: 5000,\n        currentCooldown: 0,\n        type: \"active\",\n        category: \"support\",\n        description: \"HP를 회복합니다. (기본 회복량 + 마나 x 1.5)\",\n        requiredLevel: 1,\n        isUnlocked: currentLevel >= 1,\n        isLearned: false\n      }, {\n        id: \"critical\",\n        name: \"치명타 숙련\",\n        level: 0,\n        maxLevel: 10,\n        baseDamage: 0,\n        damageMultiplier: 0,\n        statMultiplier: {},\n        manaCost: 0,\n        cooldown: 0,\n        currentCooldown: 0,\n        type: \"passive\",\n        category: \"passive\",\n        description: \"치명타 확률을 증가시킵니다. (레벨당 +2%)\",\n        requiredLevel: 1,\n        isUnlocked: currentLevel >= 1,\n        isLearned: false\n      },\n      // 레벨 5 스킬\n      {\n        id: \"double_strike\",\n        name: \"이중 공격\",\n        level: 0,\n        maxLevel: 10,\n        baseDamage: 25,\n        damageMultiplier: 0.4,\n        statMultiplier: {\n          attack: 1.5\n        },\n        manaCost: 20,\n        cooldown: 4000,\n        currentCooldown: 0,\n        type: \"active\",\n        category: \"combat\",\n        description: \"연속으로 두 번 공격합니다. (기본 데미지 x 2 + 공격력 x 1.5)\",\n        requiredLevel: 5,\n        isUnlocked: currentLevel >= 5,\n        isLearned: false\n      }, {\n        id: \"mana_shield\",\n        name: \"마나 방패\",\n        level: 0,\n        maxLevel: 10,\n        baseDamage: 20,\n        damageMultiplier: 0.2,\n        statMultiplier: {\n          mp: 1.0,\n          defense: 0.5\n        },\n        manaCost: 25,\n        cooldown: 8000,\n        currentCooldown: 0,\n        type: \"active\",\n        category: \"magic\",\n        description: \"마나로 피해를 흡수합니다. (방어력 + 마나 x 1.0)\",\n        requiredLevel: 5,\n        isUnlocked: currentLevel >= 5,\n        isLearned: false\n      }, {\n        id: \"defense_mastery\",\n        name: \"방어 숙련\",\n        level: 0,\n        maxLevel: 10,\n        baseDamage: 0,\n        damageMultiplier: 0,\n        statMultiplier: {},\n        manaCost: 0,\n        cooldown: 0,\n        currentCooldown: 0,\n        type: \"passive\",\n        category: \"passive\",\n        description: \"방어력을 영구히 증가시킵니다. (레벨당 +3 방어력)\",\n        requiredLevel: 5,\n        isUnlocked: currentLevel >= 5,\n        isLearned: false\n      },\n      // 레벨 10 스킬\n      {\n        id: \"whirlwind\",\n        name: \"회오리 공격\",\n        level: 0,\n        maxLevel: 10,\n        baseDamage: 40,\n        damageMultiplier: 0.6,\n        statMultiplier: {\n          attack: 1.8\n        },\n        manaCost: 35,\n        cooldown: 6000,\n        currentCooldown: 0,\n        type: \"active\",\n        category: \"combat\",\n        description: \"주변의 모든 적을 공격합니다. (기본 데미지 + 공격력 x 1.8)\",\n        requiredLevel: 10,\n        isUnlocked: currentLevel >= 10,\n        isLearned: false\n      }, {\n        id: \"regeneration\",\n        name: \"재생\",\n        level: 0,\n        maxLevel: 10,\n        baseDamage: 50,\n        damageMultiplier: 0.4,\n        statMultiplier: {\n          hp: 0.1,\n          mp: 2.0\n        },\n        manaCost: 40,\n        cooldown: 12000,\n        currentCooldown: 0,\n        type: \"active\",\n        category: \"support\",\n        description: \"지속적으로 HP를 회복합니다. (기본 회복량 + 최대체력 x 0.1 + 마나 x 2.0)\",\n        requiredLevel: 10,\n        isUnlocked: currentLevel >= 10,\n        isLearned: false\n      }, {\n        id: \"mp_efficiency\",\n        name: \"마나 효율\",\n        level: 0,\n        maxLevel: 10,\n        baseDamage: 0,\n        damageMultiplier: 0,\n        statMultiplier: {},\n        manaCost: 0,\n        cooldown: 0,\n        currentCooldown: 0,\n        type: \"passive\",\n        category: \"passive\",\n        description: \"모든 스킬의 마나 소모량을 감소시킵니다. (레벨당 -5%)\",\n        requiredLevel: 10,\n        isUnlocked: currentLevel >= 10,\n        isLearned: false\n      },\n      // 레벨 15 스킬\n      {\n        id: \"meteor\",\n        name: \"메테오\",\n        level: 0,\n        maxLevel: 10,\n        baseDamage: 80,\n        damageMultiplier: 1.0,\n        statMultiplier: {\n          mp: 3.0,\n          attack: 1.0\n        },\n        manaCost: 60,\n        cooldown: 10000,\n        currentCooldown: 0,\n        type: \"active\",\n        category: \"magic\",\n        description: \"강력한 마법 공격을 가합니다. (기본 데미지 + 마나 x 3.0 + 공격력 x 1.0)\",\n        requiredLevel: 15,\n        isUnlocked: currentLevel >= 15,\n        isLearned: false\n      }, {\n        id: \"time_stop\",\n        name: \"시간 정지\",\n        level: 0,\n        maxLevel: 10,\n        baseDamage: 0,\n        damageMultiplier: 0,\n        statMultiplier: {\n          mp: 1.0\n        },\n        manaCost: 80,\n        cooldown: 15000,\n        currentCooldown: 0,\n        type: \"active\",\n        category: \"magic\",\n        description: \"모든 적의 움직임을 잠시 멈춥니다. (지속시간: 마나 x 0.1초)\",\n        requiredLevel: 15,\n        isUnlocked: currentLevel >= 15,\n        isLearned: false\n      }, {\n        id: \"exp_boost\",\n        name: \"경험치 증폭\",\n        level: 0,\n        maxLevel: 10,\n        baseDamage: 0,\n        damageMultiplier: 0,\n        statMultiplier: {},\n        manaCost: 0,\n        cooldown: 0,\n        currentCooldown: 0,\n        type: \"passive\",\n        category: \"passive\",\n        description: \"획득하는 경험치를 증가시킵니다. (레벨당 +10%)\",\n        requiredLevel: 15,\n        isUnlocked: currentLevel >= 15,\n        isLearned: false\n      }];\n\n      // 해금된 스킬만 반환\n      return allSkills.filter(skill => skill.isUnlocked);\n    };\n    const initialSkills = getAllSkills(1);\n\n    // 던전 초기화\n    const initialDungeons = [{\n      id: \"forest\",\n      name: \"어둠의 숲\",\n      level: 1,\n      description: \"초보자를 위한 던전입니다.\",\n      floors: 10,\n      currentFloor: 1,\n      clearedFloors: new Set(),\n      monsters: [],\n      rewards: {\n        goldRange: [10, 25],\n        expRange: [15, 30],\n        itemDropChance: 0.1\n      },\n      requiredLevel: 1,\n      isUnlocked: true\n    }, {\n      id: \"cave\",\n      name: \"고블린 동굴\",\n      level: 5,\n      description: \"고블린들이 서식하는 위험한 동굴입니다.\",\n      floors: 15,\n      currentFloor: 1,\n      clearedFloors: new Set(),\n      monsters: [],\n      rewards: {\n        goldRange: [25, 50],\n        expRange: [40, 75],\n        itemDropChance: 0.15\n      },\n      requiredLevel: 5,\n      isUnlocked: false\n    }, {\n      id: \"tower\",\n      name: \"마법사의 탑\",\n      level: 10,\n      description: \"강력한 마법 몬스터들이 있는 탑입니다.\",\n      floors: 20,\n      currentFloor: 1,\n      clearedFloors: new Set(),\n      monsters: [],\n      rewards: {\n        goldRange: [50, 100],\n        expRange: [80, 150],\n        itemDropChance: 0.2\n      },\n      requiredLevel: 10,\n      isUnlocked: false\n    }, {\n      id: \"abyss\",\n      name: \"심연의 던전\",\n      level: 20,\n      description: \"업데이트 예정 - 최강의 도전자들을 위한 던전입니다.\",\n      floors: 50,\n      currentFloor: 1,\n      clearedFloors: new Set(),\n      monsters: [],\n      rewards: {\n        goldRange: [100, 200],\n        expRange: [200, 300],\n        itemDropChance: 0.3\n      },\n      requiredLevel: 20,\n      isUnlocked: false,\n      isComingSoon: true // 업데이트 예정 플래그\n    }];\n\n    // 상점 아이템 초기화 (기본 아이템들)\n    const getShopItems = () => {\n      var _availableDungeons$fi;\n      const baseItems = [{\n        id: \"sword1\",\n        name: \"강철 검\",\n        type: \"weapon\",\n        rarity: \"common\",\n        level: 1,\n        stats: {\n          attack: 15\n        },\n        price: 200,\n        enhancement: 0\n      }, {\n        id: \"armor1\",\n        name: \"가죽 갑옷\",\n        type: \"armor\",\n        rarity: \"common\",\n        level: 1,\n        stats: {\n          defense: 10,\n          hp: 20\n        },\n        price: 150,\n        enhancement: 0\n      }, {\n        id: \"helmet1\",\n        name: \"철제 투구\",\n        type: \"helmet\",\n        rarity: \"common\",\n        level: 1,\n        stats: {\n          defense: 5,\n          hp: 15\n        },\n        price: 100,\n        enhancement: 0\n      },\n      // 기본 물약들\n      {\n        id: \"health_potion\",\n        name: \"체력 물약\",\n        type: \"consumable\",\n        rarity: \"common\",\n        level: 1,\n        stats: {},\n        price: 50,\n        enhancement: 0,\n        consumableEffect: {\n          healHp: 50\n        },\n        quantity: 1\n      }, {\n        id: \"mana_potion\",\n        name: \"마나 물약\",\n        type: \"consumable\",\n        rarity: \"common\",\n        level: 1,\n        stats: {},\n        price: 40,\n        enhancement: 0,\n        consumableEffect: {\n          healMp: 30\n        },\n        quantity: 1\n      }];\n\n      // 고블린 동굴이 해금되면 고급 아이템 추가\n      const goblinCaveUnlocked = (_availableDungeons$fi = availableDungeons.find(d => d.id === \"goblin_cave\")) === null || _availableDungeons$fi === void 0 ? void 0 : _availableDungeons$fi.isUnlocked;\n      if (goblinCaveUnlocked) {\n        baseItems.push(\n        // 고급 장비\n        {\n          id: \"steel_sword\",\n          name: \"강화 강철 검\",\n          type: \"weapon\",\n          rarity: \"rare\",\n          level: 3,\n          stats: {\n            attack: 25\n          },\n          price: 500,\n          enhancement: 0\n        }, {\n          id: \"plate_armor\",\n          name: \"판금 갑옷\",\n          type: \"armor\",\n          rarity: \"rare\",\n          level: 3,\n          stats: {\n            defense: 20,\n            hp: 40\n          },\n          price: 400,\n          enhancement: 0\n        }, {\n          id: \"steel_helmet\",\n          name: \"강철 투구\",\n          type: \"helmet\",\n          rarity: \"rare\",\n          level: 3,\n          stats: {\n            defense: 12,\n            hp: 25\n          },\n          price: 300,\n          enhancement: 0\n        },\n        // 고급 물약들\n        {\n          id: \"greater_health_potion\",\n          name: \"고급 체력 물약\",\n          type: \"consumable\",\n          rarity: \"rare\",\n          level: 2,\n          stats: {},\n          price: 120,\n          enhancement: 0,\n          consumableEffect: {\n            healHp: 120\n          },\n          quantity: 1\n        }, {\n          id: \"greater_mana_potion\",\n          name: \"고급 마나 물약\",\n          type: \"consumable\",\n          rarity: \"rare\",\n          level: 2,\n          stats: {},\n          price: 100,\n          enhancement: 0,\n          consumableEffect: {\n            healMp: 80\n          },\n          quantity: 1\n        }, {\n          id: \"strength_potion\",\n          name: \"힘의 물약\",\n          type: \"consumable\",\n          rarity: \"rare\",\n          level: 2,\n          stats: {},\n          price: 150,\n          enhancement: 0,\n          consumableEffect: {\n            buffType: \"attack\",\n            buffAmount: 10,\n            buffDuration: 30000\n          },\n          quantity: 1\n        }, {\n          id: \"defense_potion\",\n          name: \"방어의 물약\",\n          type: \"consumable\",\n          rarity: \"rare\",\n          level: 2,\n          stats: {},\n          price: 150,\n          enhancement: 0,\n          consumableEffect: {\n            buffType: \"defense\",\n            buffAmount: 8,\n            buffDuration: 30000\n          },\n          quantity: 1\n        });\n      }\n      return baseItems;\n    };\n    const shopItems = getShopItems();\n    setCharacter(prev => ({\n      ...prev,\n      name: texts.character.name,\n      class: texts.character.class,\n      skills: initialSkills\n    }));\n    setAvailableDungeons(initialDungeons);\n    setShop(shopItems);\n    // Store texts globally for other functions to use\n    window.gameTexts = texts;\n\n    // 던전에 있지 않을 때만 일반 몬스터 생성\n    if (!inDungeon) {\n      spawnMonster();\n    }\n  };\n\n  // 던전 해금 상태에 따른 상점 업데이트\n  useEffect(() => {\n    const updateShop = () => {\n      const getShopItems = () => {\n        var _availableDungeons$fi2, _availableDungeons$fi3;\n        const baseItems = [{\n          id: \"sword1\",\n          name: \"강철 검\",\n          type: \"weapon\",\n          rarity: \"common\",\n          level: 1,\n          stats: {\n            attack: 15\n          },\n          price: 200,\n          enhancement: 0\n        }, {\n          id: \"armor1\",\n          name: \"가죽 갑옷\",\n          type: \"armor\",\n          rarity: \"common\",\n          level: 1,\n          stats: {\n            defense: 10,\n            hp: 20\n          },\n          price: 150,\n          enhancement: 0\n        }, {\n          id: \"helmet1\",\n          name: \"철제 투구\",\n          type: \"helmet\",\n          rarity: \"common\",\n          level: 1,\n          stats: {\n            defense: 5,\n            hp: 15\n          },\n          price: 100,\n          enhancement: 0\n        },\n        // 기본 물약들\n        {\n          id: \"health_potion\",\n          name: \"체력 물약\",\n          type: \"consumable\",\n          rarity: \"common\",\n          level: 1,\n          stats: {},\n          price: 50,\n          enhancement: 0,\n          consumableEffect: {\n            healHp: 50\n          },\n          quantity: 1\n        }, {\n          id: \"mana_potion\",\n          name: \"마나 물약\",\n          type: \"consumable\",\n          rarity: \"common\",\n          level: 1,\n          stats: {},\n          price: 40,\n          enhancement: 0,\n          consumableEffect: {\n            healMp: 30\n          },\n          quantity: 1\n        }];\n\n        // 고블린 동굴이 해금되면 고급 아이템 추가\n        const goblinCaveUnlocked = (_availableDungeons$fi2 = availableDungeons.find(d => d.id === \"goblin_cave\")) === null || _availableDungeons$fi2 === void 0 ? void 0 : _availableDungeons$fi2.isUnlocked;\n        if (goblinCaveUnlocked) {\n          // 중복 방지: 이미 있는 아이템은 추가하지 않음\n          const existingIds = baseItems.map(item => item.id);\n          const newItems = [{\n            id: \"steel_sword\",\n            name: \"강화 강철 검\",\n            type: \"weapon\",\n            rarity: \"rare\",\n            level: 3,\n            stats: {\n              attack: 25\n            },\n            price: 500,\n            enhancement: 0\n          }, {\n            id: \"plate_armor\",\n            name: \"판금 갑옷\",\n            type: \"armor\",\n            rarity: \"rare\",\n            level: 3,\n            stats: {\n              defense: 20,\n              hp: 40\n            },\n            price: 400,\n            enhancement: 0\n          }, {\n            id: \"steel_helmet\",\n            name: \"강철 투구\",\n            type: \"helmet\",\n            rarity: \"rare\",\n            level: 3,\n            stats: {\n              defense: 12,\n              hp: 25\n            },\n            price: 300,\n            enhancement: 0\n          }, {\n            id: \"greater_health_potion\",\n            name: \"고급 체력 물약\",\n            type: \"consumable\",\n            rarity: \"rare\",\n            level: 2,\n            stats: {},\n            price: 120,\n            enhancement: 0,\n            consumableEffect: {\n              healHp: 120\n            },\n            quantity: 1\n          }, {\n            id: \"greater_mana_potion\",\n            name: \"고급 마나 물약\",\n            type: \"consumable\",\n            rarity: \"rare\",\n            level: 2,\n            stats: {},\n            price: 100,\n            enhancement: 0,\n            consumableEffect: {\n              healMp: 80\n            },\n            quantity: 1\n          }, {\n            id: \"strength_potion\",\n            name: \"힘의 물약\",\n            type: \"consumable\",\n            rarity: \"rare\",\n            level: 2,\n            stats: {},\n            price: 150,\n            enhancement: 0,\n            consumableEffect: {\n              buffType: \"attack\",\n              buffAmount: 10,\n              buffDuration: 30000\n            },\n            quantity: 1\n          }, {\n            id: \"defense_potion\",\n            name: \"방어의 물약\",\n            type: \"consumable\",\n            rarity: \"rare\",\n            level: 2,\n            stats: {},\n            price: 150,\n            enhancement: 0,\n            consumableEffect: {\n              buffType: \"defense\",\n              buffAmount: 8,\n              buffDuration: 30000\n            },\n            quantity: 1\n          }].filter(item => !existingIds.includes(item.id));\n          baseItems.push(...newItems);\n        }\n\n        // 마법사의 탑이 해금되면 최고급 아이템 추가\n        const wizardTowerUnlocked = (_availableDungeons$fi3 = availableDungeons.find(d => d.id === \"wizard_tower\")) === null || _availableDungeons$fi3 === void 0 ? void 0 : _availableDungeons$fi3.isUnlocked;\n        if (wizardTowerUnlocked) {\n          const existingIds = baseItems.map(item => item.id);\n          const wizardItems = [{\n            id: \"enchanted_sword\",\n            name: \"마법 부여 검\",\n            type: \"weapon\",\n            rarity: \"epic\",\n            level: 5,\n            stats: {\n              attack: 40,\n              mp: 20\n            },\n            price: 1200,\n            enhancement: 0\n          }, {\n            id: \"dragon_armor\",\n            name: \"드래곤 갑옷\",\n            type: \"armor\",\n            rarity: \"epic\",\n            level: 5,\n            stats: {\n              defense: 35,\n              hp: 80\n            },\n            price: 1000,\n            enhancement: 0\n          }, {\n            id: \"mystic_helmet\",\n            name: \"신비의 투구\",\n            type: \"helmet\",\n            rarity: \"epic\",\n            level: 5,\n            stats: {\n              defense: 20,\n              hp: 40,\n              mp: 30\n            },\n            price: 800,\n            enhancement: 0\n          }, {\n            id: \"supreme_health_potion\",\n            name: \"최고급 체력 물약\",\n            type: \"consumable\",\n            rarity: \"epic\",\n            level: 3,\n            stats: {},\n            price: 300,\n            enhancement: 0,\n            consumableEffect: {\n              healHp: 250\n            },\n            quantity: 1\n          }, {\n            id: \"supreme_mana_potion\",\n            name: \"최고급 마나 물약\",\n            type: \"consumable\",\n            rarity: \"epic\",\n            level: 3,\n            stats: {},\n            price: 250,\n            enhancement: 0,\n            consumableEffect: {\n              healMp: 200\n            },\n            quantity: 1\n          }, {\n            id: \"berserker_potion\",\n            name: \"광전사의 물약\",\n            type: \"consumable\",\n            rarity: \"epic\",\n            level: 3,\n            stats: {},\n            price: 400,\n            enhancement: 0,\n            consumableEffect: {\n              buffType: \"attack\",\n              buffAmount: 25,\n              buffDuration: 60000\n            },\n            quantity: 1\n          }, {\n            id: \"guardian_potion\",\n            name: \"수호자의 물약\",\n            type: \"consumable\",\n            rarity: \"epic\",\n            level: 3,\n            stats: {},\n            price: 400,\n            enhancement: 0,\n            consumableEffect: {\n              buffType: \"defense\",\n              buffAmount: 20,\n              buffDuration: 60000\n            },\n            quantity: 1\n          }].filter(item => !existingIds.includes(item.id));\n          baseItems.push(...wizardItems);\n        }\n        return baseItems;\n      };\n      setShop(getShopItems());\n    };\n    updateShop();\n  }, [availableDungeons]);\n\n  // 레벨업 시 스킬 업데이트\n  useEffect(() => {\n    const updateSkills = () => {\n      setCharacter(prev => {\n        // 기존 스킬들의 해금 상태만 업데이트\n        const updatedSkills = prev.skills.map(skill => ({\n          ...skill,\n          isUnlocked: prev.level >= (skill.requiredLevel || 1)\n        }));\n        return {\n          ...prev,\n          skills: updatedSkills\n        };\n      });\n    };\n    updateSkills();\n  }, [character.level]);\n\n  // 스킬 사용 함수 (수정된 데미지 계산 포함)\n  const executeSkill = skill => {\n    if (!skill.isLearned || skill.level === 0) {\n      addToCombatLog(\"스킬을 먼저 배워야 합니다!\");\n      return;\n    }\n    if (character.mp < skill.manaCost) {\n      addToCombatLog(\"마나가 부족합니다!\");\n      return;\n    }\n    if (skill.currentCooldown > 0) {\n      addToCombatLog(\"스킬이 재사용 대기 중입니다!\");\n      return;\n    }\n    const damage = calculateSkillDamage(skill, character);\n\n    // 스킬 사용 로직\n    if (skill.id === \"heal\" || skill.id === \"regeneration\") {\n      // 힐링 스킬\n      const healAmount = damage;\n      setCharacter(prev => ({\n        ...prev,\n        hp: Math.min(prev.maxHp, prev.hp + healAmount),\n        mp: prev.mp - skill.manaCost\n      }));\n      addToCombatLog(`${skill.name} 사용! ${healAmount} 체력 회복!`);\n    } else if (currentMonster) {\n      // 공격 스킬\n      const newMonsterHp = Math.max(0, currentMonster.hp - damage);\n      setCurrentMonster(prev => prev ? {\n        ...prev,\n        hp: newMonsterHp\n      } : null);\n      setCharacter(prev => ({\n        ...prev,\n        mp: prev.mp - skill.manaCost\n      }));\n      addToCombatLog(`${skill.name} 사용! ${damage} 데미지!`);\n      if (newMonsterHp === 0) {\n        setTimeout(defeatMonster, 500);\n      }\n    }\n\n    // 쿨다운 설정\n    setCharacter(prev => ({\n      ...prev,\n      skills: prev.skills.map(s => s.id === skill.id ? {\n        ...s,\n        currentCooldown: skill.cooldown\n      } : s)\n    }));\n  };\n\n  // 스킬 배우기 (0레벨에서 1레벨로 업그레이드) 함수\n  const learnSkill = skill => {\n    if (skill.level > 0) {\n      addToCombatLog(\"이미 배운 스킬입니다!\");\n      return;\n    }\n    const cost = 100; // 스킬 배우기 비용\n    if (character.gold < cost) {\n      addToCombatLog(\"골드가 부족합니다!\");\n      return;\n    }\n    setCharacter(prev => ({\n      ...prev,\n      gold: prev.gold - cost,\n      skills: prev.skills.map(s => s.id === skill.id ? {\n        ...s,\n        level: 1,\n        isLearned: true\n      } : s)\n    }));\n    addToCombatLog(`${skill.name}을(를) 배웠습니다!`);\n  };\n\n  // 스킬 렌더링 함수 (분류별)\n  // 스킬 아이콘 맵핑\n  const getSkillIcon = skill => {\n    const iconMap = {\n      // 전투 스킬\n      \"basic-attack\": \"⚔️\",\n      \"power-strike\": \"💥\",\n      \"fire-slash\": \"🔥\",\n      \"lightning-bolt\": \"⚡\",\n      \"ice-shard\": \"❄️\",\n      \"double-attack\": \"⚔️⚔️\",\n      // 지원 스킬\n      heal: \"💚\",\n      \"mana-recovery\": \"💙\",\n      shield: \"🛡️\",\n      haste: \"💨\",\n      blessing: \"✨\",\n      // 패시브 스킬\n      \"strength-boost\": \"💪\",\n      \"defense-boost\": \"🛡️\",\n      \"agility-boost\": \"🏃\",\n      \"mana-boost\": \"🔮\",\n      \"critical-chance\": \"💎\",\n      vampire: \"🩸\"\n    };\n    return iconMap[skill.id] || \"📜\";\n  };\n\n  // 선택된 스킬 상태\n  const [selectedSkill, setSelectedSkill] = useState(null);\n\n  // 스킬 탭 내부의 서브 탭 상태\n  const [skillSubTab, setSkillSubTab] = React.useState(\"combat\");\n\n  // 스킬 탭 컨텐츠 렌더링 (게임 스타일 UI)\n  const renderSkillsTab = () => /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      padding: \"20px\",\n      background: \"#1f2937\",\n      minHeight: \"600px\"\n    },\n    children: [renderCharacterHeader(), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        display: \"flex\",\n        gap: \"20px\"\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          width: \"200px\"\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          style: {\n            color: \"white\",\n            marginBottom: \"15px\",\n            fontSize: \"16px\"\n          },\n          children: \"\\uD83D\\uDCDA \\uC2A4\\uD0AC \\uBD84\\uB958\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1504,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: \"flex\",\n            flexDirection: \"column\",\n            gap: \"5px\"\n          },\n          children: [{\n            id: \"combat\",\n            label: \"전체\",\n            count: character.skills.filter(s => s.isUnlocked).length,\n            color: \"#8b5cf6\"\n          }, {\n            id: \"combat\",\n            label: \"전투\",\n            count: character.skills.filter(s => s.isUnlocked && (s.category === \"combat\" || s.category === \"magic\")).length,\n            color: \"#dc2626\"\n          }, {\n            id: \"support\",\n            label: \"지원\",\n            count: character.skills.filter(s => s.isUnlocked && s.category === \"support\").length,\n            color: \"#10b981\"\n          }, {\n            id: \"passive\",\n            label: \"패시브\",\n            count: character.skills.filter(s => s.isUnlocked && s.category === \"passive\").length,\n            color: \"#f59e0b\"\n          }].map((tab, index) => /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => setSkillSubTab(index === 0 ? \"combat\" : tab.id),\n            style: {\n              padding: \"12px 15px\",\n              background: index === 0 && skillSubTab || skillSubTab === tab.id ? `linear-gradient(135deg, ${tab.color} 0%, ${tab.color}CC 100%)` : \"rgba(255, 255, 255, 0.1)\",\n              color: index === 0 && skillSubTab || skillSubTab === tab.id ? \"white\" : \"#9ca3af\",\n              border: \"1px solid #4b5563\",\n              borderRadius: \"8px\",\n              cursor: \"pointer\",\n              fontSize: \"14px\",\n              fontWeight: \"normal\",\n              transition: \"all 0.2s ease\",\n              textAlign: \"left\",\n              display: \"flex\",\n              justifyContent: \"space-between\",\n              alignItems: \"center\"\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              children: tab.label\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1571,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              style: {\n                background: \"rgba(0, 0, 0, 0.3)\",\n                color: \"white\",\n                fontSize: \"11px\",\n                padding: \"2px 6px\",\n                borderRadius: \"10px\",\n                minWidth: \"20px\",\n                textAlign: \"center\"\n              },\n              children: index === 0 ? character.skills.filter(s => s.isUnlocked).length : tab.count\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1572,\n              columnNumber: 17\n            }, this)]\n          }, index, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1544,\n            columnNumber: 15\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1509,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1503,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          flex: 1\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          style: {\n            color: \"white\",\n            marginBottom: \"15px\",\n            fontSize: \"16px\"\n          },\n          children: [\"\\uD83C\\uDFAF\", \" \", skillSubTab === \"combat\" ? \"전투 스킬\" : skillSubTab === \"support\" ? \"지원 스킬\" : \"패시브 스킬\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1594,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: \"grid\",\n            gridTemplateColumns: \"repeat(8, 1fr)\",\n            gap: \"6px\",\n            background: \"rgba(0, 0, 0, 0.3)\",\n            padding: \"15px\",\n            borderRadius: \"10px\",\n            border: \"2px solid #4b5563\",\n            minHeight: \"400px\"\n          },\n          children: Array.from({\n            length: 32\n          }, (_, index) => {\n            const filteredSkills = character.skills.filter(skill => {\n              if (skillSubTab === \"combat\") {\n                return skill.isUnlocked && (skill.category === \"combat\" || skill.category === \"magic\");\n              }\n              return skill.isUnlocked && skill.category === skillSubTab;\n            });\n            const skill = filteredSkills[index];\n            const isEmpty = !skill;\n            return /*#__PURE__*/_jsxDEV(\"div\", {\n              onClick: () => skill && setSelectedSkill(skill),\n              style: {\n                width: \"50px\",\n                height: \"50px\",\n                background: isEmpty ? \"rgba(255, 255, 255, 0.05)\" : skill.isLearned ? \"rgba(16, 185, 129, 0.2)\" : \"rgba(107, 114, 128, 0.2)\",\n                border: isEmpty ? \"1px solid #374151\" : skill.isLearned ? \"2px solid #10b981\" : \"2px solid #6b7280\",\n                borderRadius: \"8px\",\n                display: \"flex\",\n                flexDirection: \"column\",\n                alignItems: \"center\",\n                justifyContent: \"center\",\n                cursor: skill ? \"pointer\" : \"default\",\n                position: \"relative\",\n                transition: \"all 0.2s ease\"\n              },\n              onMouseEnter: e => {\n                if (skill) {\n                  e.currentTarget.style.transform = \"scale(1.1)\";\n                  e.currentTarget.style.boxShadow = skill.isLearned ? \"0 0 15px #10b98150\" : \"0 0 15px #6b728050\";\n                }\n              },\n              onMouseLeave: e => {\n                if (skill) {\n                  e.currentTarget.style.transform = \"scale(1)\";\n                  e.currentTarget.style.boxShadow = \"none\";\n                }\n              },\n              children: skill && /*#__PURE__*/_jsxDEV(_Fragment, {\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  style: {\n                    fontSize: \"20px\",\n                    filter: skill.isLearned ? \"none\" : \"grayscale(1)\",\n                    opacity: skill.isLearned ? 1 : 0.5\n                  },\n                  children: getSkillIcon(skill)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1674,\n                  columnNumber: 23\n                }, this), skill.level > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n                  style: {\n                    position: \"absolute\",\n                    bottom: \"2px\",\n                    right: \"2px\",\n                    background: \"#10b981\",\n                    color: \"white\",\n                    fontSize: \"10px\",\n                    padding: \"1px 4px\",\n                    borderRadius: \"3px\",\n                    lineHeight: \"1\",\n                    fontWeight: \"bold\"\n                  },\n                  children: skill.level\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1685,\n                  columnNumber: 25\n                }, this), skill.level === 0 && character.gold >= 100 && /*#__PURE__*/_jsxDEV(\"div\", {\n                  style: {\n                    position: \"absolute\",\n                    top: \"2px\",\n                    right: \"2px\",\n                    background: \"#fbbf24\",\n                    width: \"8px\",\n                    height: \"8px\",\n                    borderRadius: \"50%\",\n                    animation: \"pulse 2s infinite\"\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1704,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true)\n            }, index, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1632,\n              columnNumber: 17\n            }, this);\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1604,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1593,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          width: \"300px\"\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          style: {\n            color: \"white\",\n            marginBottom: \"15px\",\n            fontSize: \"16px\"\n          },\n          children: \"\\uD83D\\uDCCB \\uC2A4\\uD0AC \\uC815\\uBCF4\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1727,\n          columnNumber: 11\n        }, this), selectedSkill ? /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            background: \"rgba(255, 255, 255, 0.1)\",\n            border: selectedSkill.isLearned ? \"2px solid #10b981\" : \"2px solid #6b7280\",\n            borderRadius: \"10px\",\n            padding: \"20px\"\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              textAlign: \"center\",\n              marginBottom: \"15px\"\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                fontSize: \"48px\",\n                marginBottom: \"10px\",\n                filter: selectedSkill.isLearned ? \"none\" : \"grayscale(1)\",\n                opacity: selectedSkill.isLearned ? 1 : 0.7\n              },\n              children: getSkillIcon(selectedSkill)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1744,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n              style: {\n                color: selectedSkill.isLearned ? \"#10b981\" : \"#9ca3af\",\n                margin: \"0 0 5px 0\",\n                fontSize: \"18px\",\n                fontWeight: \"bold\"\n              },\n              children: selectedSkill.name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1754,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              style: {\n                color: \"#9ca3af\",\n                margin: \"0 0 15px 0\",\n                fontSize: \"14px\"\n              },\n              children: [\"Lv.\", selectedSkill.level, \"/\", selectedSkill.maxLevel, \" \\u2022\", \" \", selectedSkill.type === \"active\" ? \"액티브\" : \"패시브\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1764,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1743,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              marginBottom: \"15px\"\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n              style: {\n                color: \"white\",\n                margin: \"0 0 10px 0\",\n                fontSize: \"14px\"\n              },\n              children: \"\\uD6A8\\uACFC\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1778,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              style: {\n                color: \"#d1d5db\",\n                fontSize: \"12px\",\n                lineHeight: \"1.4\",\n                margin: 0\n              },\n              children: selectedSkill.description\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1787,\n              columnNumber: 17\n            }, this), selectedSkill.level > 0 && selectedSkill.type === \"active\" && /*#__PURE__*/_jsxDEV(\"p\", {\n              style: {\n                color: \"#fbbf24\",\n                fontSize: \"12px\",\n                fontWeight: \"bold\",\n                marginTop: \"8px\"\n              },\n              children: [\"\\uB370\\uBBF8\\uC9C0: \", calculateSkillDamage(selectedSkill, character)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1798,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1777,\n            columnNumber: 15\n          }, this), selectedSkill.type === \"active\" && /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              marginBottom: \"15px\"\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n              style: {\n                color: \"white\",\n                margin: \"0 0 10px 0\",\n                fontSize: \"14px\"\n              },\n              children: \"\\uC0AC\\uC6A9 \\uC815\\uBCF4\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1814,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                fontSize: \"12px\",\n                color: \"#9ca3af\"\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  display: \"flex\",\n                  justifyContent: \"space-between\",\n                  marginBottom: \"5px\"\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  children: \"\\uB9C8\\uB098 \\uC18C\\uBAA8\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1831,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  style: {\n                    color: \"#60a5fa\"\n                  },\n                  children: selectedSkill.manaCost\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1832,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1824,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  display: \"flex\",\n                  justifyContent: \"space-between\",\n                  marginBottom: \"5px\"\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  children: \"\\uCFE8\\uB2E4\\uC6B4\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1843,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  style: {\n                    color: \"#f472b6\"\n                  },\n                  children: [selectedSkill.cooldown / 1000, \"\\uCD08\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1844,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1836,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1823,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1813,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              marginBottom: \"15px\"\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n              style: {\n                color: \"white\",\n                margin: \"0 0 10px 0\",\n                fontSize: \"14px\"\n              },\n              children: selectedSkill.level === 0 ? \"학습 비용\" : \"업그레이드 비용\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1854,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              style: {\n                color: \"#f59e0b\",\n                fontSize: \"12px\",\n                margin: 0\n              },\n              children: [selectedSkill.level === 0 ? \"100\" : (selectedSkill.level * 100).toLocaleString(), \"\\uACE8\\uB4DC\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1863,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1853,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              display: \"flex\",\n              flexDirection: \"column\",\n              gap: \"10px\"\n            },\n            children: selectedSkill.level === 0 ? /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => {\n                learnSkill(selectedSkill);\n                setSelectedSkill(null);\n              },\n              disabled: character.gold < 100,\n              style: {\n                background: character.gold >= 100 ? \"linear-gradient(135deg, #10b981 0%, #059669 100%)\" : \"#6b7280\",\n                color: \"white\",\n                border: \"none\",\n                borderRadius: \"6px\",\n                padding: \"12px\",\n                fontSize: \"14px\",\n                cursor: character.gold >= 100 ? \"pointer\" : \"not-allowed\",\n                fontWeight: \"bold\"\n              },\n              children: \"\\uC2A4\\uD0AC \\uBC30\\uC6B0\\uAE30 (100G)\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1880,\n              columnNumber: 19\n            }, this) : selectedSkill.level < selectedSkill.maxLevel ? /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => {\n                const cost = selectedSkill.level * 100;\n                if (character.gold >= cost) {\n                  setCharacter(prev => ({\n                    ...prev,\n                    gold: prev.gold - cost,\n                    skills: prev.skills.map(s => s.id === selectedSkill.id ? {\n                      ...s,\n                      level: s.level + 1\n                    } : s)\n                  }));\n                  addToCombatLog(`${selectedSkill.name}을(를) 레벨업했다! (Lv.${selectedSkill.level + 1})`);\n                  setSelectedSkill(prev => prev ? {\n                    ...prev,\n                    level: prev.level + 1\n                  } : null);\n                }\n              },\n              disabled: character.gold < selectedSkill.level * 100,\n              style: {\n                background: character.gold >= selectedSkill.level * 100 ? \"linear-gradient(135deg, #fbbf24 0%, #f59e0b 100%)\" : \"#6b7280\",\n                color: \"white\",\n                border: \"none\",\n                borderRadius: \"6px\",\n                padding: \"12px\",\n                fontSize: \"14px\",\n                cursor: character.gold >= selectedSkill.level * 100 ? \"pointer\" : \"not-allowed\",\n                fontWeight: \"bold\"\n              },\n              children: [\"\\uB808\\uBCA8\\uC5C5 (\", (selectedSkill.level * 100).toLocaleString(), \"G)\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1903,\n              columnNumber: 19\n            }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                background: \"#374151\",\n                color: \"#9ca3af\",\n                border: \"none\",\n                borderRadius: \"6px\",\n                padding: \"12px\",\n                fontSize: \"14px\",\n                textAlign: \"center\"\n              },\n              children: \"\\uCD5C\\uB300 \\uB808\\uBCA8 \\uB2EC\\uC131\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1947,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1872,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1733,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            background: \"rgba(255, 255, 255, 0.05)\",\n            borderRadius: \"10px\",\n            padding: \"40px\",\n            textAlign: \"center\",\n            color: \"#6b7280\"\n          },\n          children: /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"\\uC2A4\\uD0AC\\uC744 \\uD074\\uB9AD\\uD558\\uC5EC \\uC815\\uBCF4\\uB97C \\uD655\\uC778\\uD558\\uC138\\uC694\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1973,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1964,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1726,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1501,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 1497,\n    columnNumber: 5\n  }, this);\n\n  // 몬스터 생성\n  const spawnMonster = () => {\n    // 이미 몬스터가 있거나 던전에 있으면 새로 생성하지 않음\n    if (currentMonster || inDungeon) {\n      return;\n    }\n    const gameTexts = window.gameTexts || {\n      monsters: {\n        slime: \"슬라임\",\n        goblin: \"고블린\",\n        orc: \"오크\",\n        troll: \"트롤\",\n        dragon: \"드래곤\"\n      },\n      combat: {\n        appeared: \"이 나타났다!\"\n      }\n    };\n    const monsters = [{\n      name: gameTexts.monsters.slime,\n      baseHp: 40,\n      baseAttack: 8,\n      baseDefense: 2,\n      exp: 15,\n      gold: 10,\n      minLevel: 1,\n      maxLevel: 3\n    }, {\n      name: gameTexts.monsters.goblin,\n      baseHp: 60,\n      baseAttack: 12,\n      baseDefense: 4,\n      exp: 25,\n      gold: 18,\n      minLevel: 3,\n      maxLevel: 6\n    }, {\n      name: gameTexts.monsters.orc,\n      baseHp: 100,\n      baseAttack: 18,\n      baseDefense: 8,\n      exp: 40,\n      gold: 30,\n      minLevel: 6,\n      maxLevel: 10\n    }, {\n      name: gameTexts.monsters.troll,\n      baseHp: 150,\n      baseAttack: 25,\n      baseDefense: 12,\n      exp: 60,\n      gold: 45,\n      minLevel: 10,\n      maxLevel: 15\n    }, {\n      name: gameTexts.monsters.dragon,\n      baseHp: 300,\n      baseAttack: 40,\n      baseDefense: 20,\n      exp: 120,\n      gold: 100,\n      minLevel: 15,\n      maxLevel: 999\n    }];\n\n    // 캐릭터 레벨에 적합한 몬스터만 필터링\n    const availableMonsters = monsters.filter(monster => character.level >= monster.minLevel && character.level <= monster.maxLevel);\n\n    // 적합한 몬스터가 없으면 레벨 범위를 확장\n    const finalMonsters = availableMonsters.length > 0 ? availableMonsters : monsters.filter(monster => Math.abs(character.level - monster.minLevel) <= 2);\n    const randomMonster = finalMonsters[Math.floor(Math.random() * finalMonsters.length)];\n    const levelMultiplier = 1 + (character.level - 1) * 0.3;\n    const monster = {\n      id: `monster_${Date.now()}`,\n      name: randomMonster.name,\n      level: Math.max(1, character.level + Math.floor(Math.random() * 3 - 1)),\n      hp: Math.floor(randomMonster.baseHp * levelMultiplier),\n      maxHp: Math.floor(randomMonster.baseHp * levelMultiplier),\n      attack: Math.floor(randomMonster.baseAttack * levelMultiplier),\n      defense: Math.floor(randomMonster.baseDefense * levelMultiplier),\n      speed: 10,\n      exp: Math.floor(randomMonster.exp * levelMultiplier),\n      gold: Math.floor(randomMonster.gold * levelMultiplier),\n      dropItems: generateDropItems(),\n      isBoss: Math.random() < 0.1 // 10% 보스 확률\n    };\n    if (monster.isBoss) {\n      monster.name = `보스 ${monster.name}`;\n      monster.hp *= 3;\n      monster.maxHp *= 3;\n      monster.attack *= 2;\n      monster.defense *= 2;\n      monster.exp *= 5;\n      monster.gold *= 3;\n    }\n    setCurrentMonster(monster);\n    addToCombatLog(`${monster.name} Lv.${monster.level}${gameTexts.combat.appeared}`);\n  };\n\n  // 드롭 아이템 생성\n  const generateDropItems = () => {\n    const dropChance = Math.random();\n    if (dropChance < 0.1) {\n      // 10% 확률로 아이템 드롭\n      const rarities = [\"common\", \"rare\", \"epic\", \"legendary\", \"mythic\"];\n      const rarity = rarities[Math.floor(Math.random() * rarities.length)];\n      const itemTypes = [\"weapon\", \"armor\", \"helmet\", \"boots\", \"ring\", \"amulet\"];\n      const itemType = itemTypes[Math.floor(Math.random() * itemTypes.length)];\n      return [{\n        id: `drop_${Date.now()}`,\n        name: generateItemName(rarity, itemType),\n        type: itemType,\n        rarity,\n        level: character.level,\n        stats: generateItemStats(rarity),\n        price: calculateItemPrice(rarity, character.level),\n        enhancement: 0\n      }];\n    }\n    return [];\n  };\n  const generateItemName = (rarity, itemType) => {\n    const prefixes = {\n      common: [\"낡은\", \"일반적인\", \"기본\"],\n      rare: [\"날카로운\", \"튼튼한\", \"마법의\"],\n      epic: [\"전설적인\", \"고대의\", \"신성한\"],\n      legendary: [\"전설의\", \"영웅의\", \"불멸의\"],\n      mythic: [\"신화의\", \"창조의\", \"절대의\"]\n    };\n    const itemNames = {\n      weapon: [\"검\", \"도끼\", \"창\", \"활\", \"지팡이\"],\n      armor: [\"갑옷\", \"로브\", \"사슬갑옷\", \"가죽갑옷\"],\n      helmet: [\"투구\", \"모자\", \"관\", \"헬름\"],\n      boots: [\"신발\", \"부츠\", \"장화\", \"샌들\"],\n      ring: [\"반지\", \"링\", \"밴드\"],\n      amulet: [\"목걸이\", \"부적\", \"펜던트\"]\n    };\n    const prefix = prefixes[rarity][Math.floor(Math.random() * 3)];\n    const itemTypeNames = itemNames[itemType] || [\"아이템\"];\n    const item = itemTypeNames[Math.floor(Math.random() * itemTypeNames.length)];\n    return `${prefix} ${item}`;\n  };\n  const generateItemStats = rarity => {\n    const multipliers = {\n      common: 1,\n      rare: 1.5,\n      epic: 2.5,\n      legendary: 4,\n      mythic: 7\n    };\n    const base = multipliers[rarity];\n    return {\n      attack: Math.floor(Math.random() * 20 * base),\n      defense: Math.floor(Math.random() * 15 * base),\n      hp: Math.floor(Math.random() * 50 * base),\n      mp: Math.floor(Math.random() * 30 * base),\n      speed: Math.floor(Math.random() * 10 * base),\n      critRate: Math.floor(Math.random() * 10 * base),\n      critDamage: Math.floor(Math.random() * 20 * base)\n    };\n  };\n  const calculateItemPrice = (rarity, level) => {\n    const basePrice = {\n      common: 50,\n      rare: 150,\n      epic: 500,\n      legendary: 2000,\n      mythic: 10000\n    };\n    return Math.floor(basePrice[rarity] * (1 + level * 0.2));\n  };\n\n  // 전투 시스템\n  const attack = () => {\n    if (!currentMonster) return;\n    const buffedAttack = character.attack + character.buffs.attack.amount;\n    const damage = calculateDamage(buffedAttack, currentMonster.defense);\n    const isCritical = Math.random() < 0.1 + character.stats.luck * 0.01;\n    const finalDamage = isCritical ? Math.floor(damage * 1.5) : damage;\n    const newMonsterHp = Math.max(0, currentMonster.hp - finalDamage);\n    setCurrentMonster(prev => prev ? {\n      ...prev,\n      hp: newMonsterHp\n    } : null);\n    const gameTexts = window.gameTexts || {\n      combat: {\n        attack: \"의 공격!\",\n        damage: \"데미지!\",\n        critical: \"치명타!\"\n      }\n    };\n    addToCombatLog(`${character.name}${gameTexts.combat.attack} ${finalDamage}${isCritical ? ` (${gameTexts.combat.critical})` : \"\"} ${gameTexts.combat.damage}`);\n    onAction(\"combat_attack\", {\n      user_id: currentUser.user_id,\n      damage: finalDamage,\n      is_critical: isCritical,\n      monster_name: currentMonster.name,\n      monster_level: currentMonster.level,\n      character_level: character.level,\n      character_attack: character.attack,\n      monster_hp_remaining: newMonsterHp,\n      dungeon_name: (currentDungeon === null || currentDungeon === void 0 ? void 0 : currentDungeon.name) || null,\n      dungeon_floor: (currentDungeon === null || currentDungeon === void 0 ? void 0 : currentDungeon.currentFloor) || null\n    });\n    if (newMonsterHp <= 0) {\n      defeatMonster();\n    } else {\n      // 몬스터 반격\n      setTimeout(() => monsterAttack(), 1000);\n    }\n  };\n  const monsterAttack = () => {\n    if (!currentMonster || currentMonster.hp <= 0) return;\n    const buffedDefense = character.defense + character.buffs.defense.amount;\n    const damage = calculateDamage(currentMonster.attack, buffedDefense);\n    const newHp = Math.max(0, character.hp - damage);\n    setCharacter(prev => ({\n      ...prev,\n      hp: newHp\n    }));\n    const gameTexts = window.gameTexts || {\n      combat: {\n        attack: \"의 공격!\",\n        damage: \"데미지!\"\n      }\n    };\n    addToCombatLog(`${currentMonster.name}${gameTexts.combat.attack} ${damage} ${gameTexts.combat.damage}`);\n    if (newHp <= 0) {\n      const gameTexts = window.gameTexts || {\n        combat: {\n          defeat: \"전투에서 패배했습니다...\"\n        }\n      };\n      addToCombatLog(gameTexts.combat.defeat);\n      setIsAutoFighting(false);\n\n      // 전투 실패 이벤트 로깅\n      onAction(\"combat_defeat\", {\n        monster_name: currentMonster.name,\n        monster_level: currentMonster.level,\n        character_level: character.level,\n        dungeon_id: (currentDungeon === null || currentDungeon === void 0 ? void 0 : currentDungeon.id) || \"field\",\n        dungeon_name: (currentDungeon === null || currentDungeon === void 0 ? void 0 : currentDungeon.name) || \"field\",\n        damage_taken: currentMonster.attack,\n        character_defense: character.defense\n      });\n\n      // 던전에서 나가고 체력/마나 완전 회복\n      setTimeout(() => {\n        setCharacter(prev => ({\n          ...prev,\n          hp: prev.maxHp,\n          mp: prev.maxMp\n        }));\n        if (inDungeon && currentDungeon) {\n          // 던전에서 나가기 (죽음으로 인한 자동 퇴장)\n          onAction(\"dungeon_exited\", {\n            dungeon_id: currentDungeon.id,\n            dungeon_name: currentDungeon.name,\n            current_floor: currentDungeon.currentFloor,\n            total_floors: currentDungeon.floors,\n            character_level: character.level,\n            exit_reason: \"death\",\n            time_spent: new Date().getTime()\n          });\n          setInDungeon(false);\n          setCurrentDungeon(null);\n          setCurrentTab(\"lobby\");\n          setGameMode(\"lobby\");\n          addToCombatLog(\"던전에서 나왔습니다. 체력과 마나가 완전히 회복되었습니다!\");\n        } else {\n          // 일반 필드에서는 새 몬스터 스폰\n          addToCombatLog(\"체력과 마나가 완전히 회복되었습니다!\");\n          spawnMonster();\n        }\n      }, 2000);\n    }\n  };\n  const calculateDamage = (attack, defense) => {\n    const baseDamage = Math.max(1, attack - Math.floor(defense * 0.5));\n    return Math.floor(baseDamage * (0.8 + Math.random() * 0.4));\n  };\n  const defeatMonster = () => {\n    if (!currentMonster) return;\n    const expGained = currentMonster.exp;\n    const goldGained = currentMonster.gold;\n    setCharacter(prev => {\n      let newExp = prev.exp + expGained;\n      const newGold = prev.gold + goldGained;\n      let newLevel = prev.level;\n      let newMaxExp = prev.maxExp;\n      let newHp = prev.hp;\n      let newMp = prev.mp;\n      let newMaxHp = prev.maxHp;\n      let newMaxMp = prev.maxMp;\n      let availablePoints = prev.stats.availablePoints;\n\n      // 레벨업 체크\n      while (newExp >= newMaxExp) {\n        newLevel += 1;\n        newExp -= newMaxExp;\n        newMaxExp = Math.floor(newMaxExp * 1.5);\n        newMaxHp += 20;\n        newMaxMp += 10;\n        newHp = newMaxHp; // 레벨업 시 체력 완전 회복\n        newMp = newMaxMp; // 레벨업 시 마나 완전 회복\n        availablePoints += 5;\n        addToCombatLog(`🎉 레벨업! Lv.${newLevel}이 되었습니다!`);\n        onAction(\"level_up\", {\n          user_id: currentUser.user_id,\n          new_level: newLevel,\n          character_class: prev.class,\n          stat_points_gained: 5\n        });\n\n        // 던전 해금 체크\n        setAvailableDungeons(prevDungeons => prevDungeons.map(dungeon => ({\n          ...dungeon,\n          isUnlocked: dungeon.isUnlocked || newLevel >= dungeon.requiredLevel\n        })));\n      }\n      return {\n        ...prev,\n        exp: newExp,\n        gold: newGold,\n        level: newLevel,\n        maxExp: newMaxExp,\n        hp: newHp,\n        mp: newMp,\n        maxHp: newMaxHp,\n        maxMp: newMaxMp,\n        stats: {\n          ...prev.stats,\n          availablePoints\n        }\n      };\n    });\n\n    // 아이템 드롭 처리\n    if (currentMonster.dropItems.length > 0) {\n      setInventory(prev => [...prev, ...currentMonster.dropItems]);\n      addToCombatLog(`✨ ${currentMonster.dropItems[0].name}을 획득했습니다!`);\n    }\n    addToCombatLog(`${currentMonster.name}를 물리쳤다! EXP +${expGained}, 골드 +${goldGained}`);\n\n    // 추적 카운터 업데이트\n    setMonstersDefeated(prev => prev + 1);\n    setTotalGoldEarned(prev => prev + goldGained);\n    onAction(\"monster_defeated\", {\n      user_id: currentUser.user_id,\n      monster_name: currentMonster.name,\n      monster_level: currentMonster.level,\n      character_level: character.level,\n      exp_gained: expGained,\n      gold_gained: goldGained,\n      items_dropped: currentMonster.dropItems.length,\n      character_attack: character.attack,\n      dungeon_name: (currentDungeon === null || currentDungeon === void 0 ? void 0 : currentDungeon.name) || null,\n      dungeon_floor: (currentDungeon === null || currentDungeon === void 0 ? void 0 : currentDungeon.currentFloor) || null\n    });\n\n    // 현재 몬스터 제거\n    setCurrentMonster(null);\n\n    // 던전에 있는 경우 현재 층에서 새로운 몬스터 생성, 아니면 일반 몬스터 생성\n    if (inDungeon && currentDungeon) {\n      // 현재 층을 클리어한 것으로 마킹\n      const updatedDungeon = {\n        ...currentDungeon,\n        clearedFloors: new Set([...Array.from(currentDungeon.clearedFloors), currentDungeon.currentFloor])\n      };\n      setCurrentDungeon(updatedDungeon);\n\n      // 던전 리스트에서도 업데이트\n      setAvailableDungeons(prev => prev.map(d => d.id === updatedDungeon.id ? updatedDungeon : d));\n\n      // 던전에서는 현재 층에서 계속 사냥할 수 있도록 새 몬스터 생성\n      addToCombatLog(`몬스터를 처치했습니다! 현재 ${currentDungeon.currentFloor}층이 클리어되었습니다. 계속 사냥할 수 있습니다.`);\n      setTimeout(() => {\n        spawnDungeonMonster(updatedDungeon, true);\n      }, 2000);\n    } else {\n      // 일반 방치형 전투에서 새 몬스터 생성 (던전 상태가 아닐 때만)\n      if (!inDungeon) {\n        setTimeout(() => {\n          spawnMonster();\n        }, 2000);\n      }\n    }\n  };\n\n  // 다음 층으로 진행\n  const proceedToNextFloor = () => {\n    if (!currentDungeon) return;\n    const updatedDungeon = {\n      ...currentDungeon,\n      currentFloor: currentDungeon.currentFloor + 1\n    };\n    setCurrentDungeon(updatedDungeon);\n    setShowDungeonChoice(false);\n    setTimeout(() => {\n      spawnDungeonMonster(updatedDungeon, true); // 강제 스폰\n      addToCombatLog(`${updatedDungeon.currentFloor}층으로 진행합니다!`);\n    }, 500);\n  };\n\n  // 던전 나가기\n  const exitDungeonAfterVictory = () => {\n    if (!currentDungeon) return;\n\n    // 던전 나가기 이벤트 로깅\n    onAction(\"dungeon_exited\", {\n      dungeon_id: currentDungeon.id,\n      dungeon_name: currentDungeon.name,\n      current_floor: currentDungeon.currentFloor,\n      total_floors: currentDungeon.floors,\n      character_level: character.level,\n      exit_reason: \"victory_choice\",\n      time_spent: new Date().getTime()\n    });\n\n    // 던전 리셋 (현재 층을 1층으로 되돌림)\n    const resetDungeon = {\n      ...currentDungeon,\n      currentFloor: 1\n    };\n    setAvailableDungeons(prev => prev.map(d => d.id === resetDungeon.id ? resetDungeon : d));\n    setInDungeon(false);\n    setCurrentDungeon(null);\n    setCurrentTab(\"lobby\");\n    setGameMode(\"lobby\");\n    setShowDungeonChoice(false);\n\n    // 체력과 마나 완전 회복\n    setCharacter(prev => ({\n      ...prev,\n      hp: prev.maxHp,\n      mp: prev.maxMp\n    }));\n    addToCombatLog(\"던전에서 나왔습니다. 체력과 마나가 완전히 회복되었습니다!\");\n\n    // 새로운 일반 몬스터 생성\n    setTimeout(() => {\n      spawnMonster();\n    }, 1000);\n  };\n\n  // 자동 전투\n  useEffect(() => {\n    if (isAutoFighting && currentMonster && currentMonster.hp > 0 && character.hp > 0) {\n      const autoAttackTimer = setTimeout(() => {\n        attack();\n      }, 2000);\n      return () => clearTimeout(autoAttackTimer);\n    }\n  }, [isAutoFighting, currentMonster, character.hp]);\n\n  // 스킬 쿨다운 및 MP 회복\n  useEffect(() => {\n    const interval = setInterval(() => {\n      setCharacter(prev => ({\n        ...prev,\n        mp: Math.min(prev.maxMp, prev.mp + 1),\n        skills: prev.skills.map(skill => ({\n          ...skill,\n          currentCooldown: Math.max(0, skill.currentCooldown - 100)\n        })),\n        buffs: {\n          attack: {\n            amount: prev.buffs.attack.duration > 0 ? prev.buffs.attack.amount : 0,\n            duration: Math.max(0, prev.buffs.attack.duration - 100)\n          },\n          defense: {\n            amount: prev.buffs.defense.duration > 0 ? prev.buffs.defense.amount : 0,\n            duration: Math.max(0, prev.buffs.defense.duration - 100)\n          },\n          speed: {\n            amount: prev.buffs.speed.duration > 0 ? prev.buffs.speed.amount : 0,\n            duration: Math.max(0, prev.buffs.speed.duration - 100)\n          }\n        }\n      }));\n    }, 100);\n    return () => clearInterval(interval);\n  }, []);\n  const addToCombatLog = message => {\n    setCombatLog(prev => {\n      const newLog = [...prev, message];\n      if (newLog.length > 50) newLog.shift();\n      return newLog;\n    });\n\n    // Auto-scroll to bottom immediately and with backup timing\n    if (logRef.current) {\n      logRef.current.scrollTop = logRef.current.scrollHeight;\n    }\n\n    // Additional scroll with slight delay to ensure content is rendered\n    setTimeout(() => {\n      if (logRef.current) {\n        logRef.current.scrollTop = logRef.current.scrollHeight;\n      }\n    }, 10);\n\n    // Final backup scroll\n    setTimeout(() => {\n      if (logRef.current) {\n        logRef.current.scrollTop = logRef.current.scrollHeight;\n      }\n    }, 100);\n  };\n\n  // 스탯 분배\n  const allocateStatPoint = stat => {\n    if (character.stats.availablePoints <= 0) return;\n    setCharacter(prev => ({\n      ...prev,\n      stats: {\n        ...prev.stats,\n        [stat]: prev.stats[stat] + 1,\n        availablePoints: prev.stats.availablePoints - 1\n      },\n      // 스탯에 따른 능력치 업데이트\n      attack: stat === \"strength\" ? prev.attack + 2 : prev.attack,\n      defense: stat === \"vitality\" ? prev.defense + 1 : prev.defense,\n      maxHp: stat === \"vitality\" ? prev.maxHp + 10 : prev.maxHp,\n      maxMp: stat === \"intelligence\" ? prev.maxMp + 5 : prev.maxMp,\n      speed: stat === \"agility\" ? prev.speed + 1 : prev.speed\n    }));\n  };\n\n  // 아이템 장착\n  const equipItem = item => {\n    // 소비 아이템은 장착할 수 없음\n    if (item.type === \"consumable\") {\n      return;\n    }\n\n    // 기존에 장착된 아이템이 있는지 확인\n    const slot = item.type;\n    const currentEquippedItem = character.equipment[slot];\n    setCharacter(prev => {\n      const newEquipment = {\n        ...prev.equipment\n      };\n      newEquipment[slot] = item;\n\n      // 기존 아이템의 스탯 제거\n      let newAttack = prev.attack;\n      let newDefense = prev.defense;\n      let newMaxHp = prev.maxHp;\n      let newMaxMp = prev.maxMp;\n      let newSpeed = prev.speed;\n      if (currentEquippedItem) {\n        if (currentEquippedItem.stats.attack) newAttack -= currentEquippedItem.stats.attack;\n        if (currentEquippedItem.stats.defense) newDefense -= currentEquippedItem.stats.defense;\n        if (currentEquippedItem.stats.hp) newMaxHp -= currentEquippedItem.stats.hp;\n        if (currentEquippedItem.stats.mp) newMaxMp -= currentEquippedItem.stats.mp;\n        if (currentEquippedItem.stats.speed) newSpeed -= currentEquippedItem.stats.speed;\n      }\n\n      // 새 아이템의 스탯 적용\n      if (item.stats.attack) newAttack += item.stats.attack;\n      if (item.stats.defense) newDefense += item.stats.defense;\n      if (item.stats.hp) newMaxHp += item.stats.hp;\n      if (item.stats.mp) newMaxMp += item.stats.mp;\n      if (item.stats.speed) newSpeed += item.stats.speed;\n\n      // 스탯이 최소값 이하로 내려가지 않도록 보정\n      newAttack = Math.max(1, newAttack);\n      newDefense = Math.max(0, newDefense);\n      newMaxHp = Math.max(100, newMaxHp);\n      newMaxMp = Math.max(50, newMaxMp);\n      newSpeed = Math.max(1, newSpeed);\n      return {\n        ...prev,\n        equipment: newEquipment,\n        attack: newAttack,\n        defense: newDefense,\n        maxHp: newMaxHp,\n        maxMp: newMaxMp,\n        speed: newSpeed,\n        hp: Math.min(prev.hp, newMaxHp),\n        // 최대 체력이 줄어들 경우 현재 체력도 조정\n        mp: Math.min(prev.mp, newMaxMp) // 최대 마나가 줄어들 경우 현재 마나도 조정\n      };\n    });\n\n    // 기존에 장착된 아이템이 있었다면 인벤토리로 보내기\n    if (currentEquippedItem) {\n      setInventory(prev => [...prev, currentEquippedItem]);\n      addToCombatLog(`기존 ${currentEquippedItem.name}을 해제하고 ${item.name}을 장착했습니다!`);\n    } else {\n      addToCombatLog(`${item.name}을 장착했습니다!`);\n    }\n\n    // 인벤토리에서 새 아이템 제거\n    setInventory(prev => prev.filter(invItem => invItem.id !== item.id));\n  };\n\n  // 장비 해제\n  const unequipItem = slot => {\n    const equippedItem = character.equipment[slot];\n    if (!equippedItem) return;\n    setCharacter(prev => {\n      const newEquipment = {\n        ...prev.equipment\n      };\n      newEquipment[slot] = undefined;\n\n      // 장착 해제한 아이템의 스탯 제거\n      let newAttack = prev.attack;\n      let newDefense = prev.defense;\n      let newMaxHp = prev.maxHp;\n      let newMaxMp = prev.maxMp;\n      let newSpeed = prev.speed;\n      if (equippedItem.stats.attack) newAttack -= equippedItem.stats.attack;\n      if (equippedItem.stats.defense) newDefense -= equippedItem.stats.defense;\n      if (equippedItem.stats.hp) newMaxHp -= equippedItem.stats.hp;\n      if (equippedItem.stats.mp) newMaxMp -= equippedItem.stats.mp;\n      if (equippedItem.stats.speed) newSpeed -= equippedItem.stats.speed;\n\n      // HP가 maxHp를 초과하지 않도록 조정\n      const adjustedHp = Math.min(prev.hp, newMaxHp);\n      const adjustedMp = Math.min(prev.mp, newMaxMp);\n      return {\n        ...prev,\n        equipment: newEquipment,\n        attack: Math.max(1, newAttack),\n        // 최소 공격력 1\n        defense: Math.max(0, newDefense),\n        maxHp: Math.max(100, newMaxHp),\n        // 최소 체력 100\n        maxMp: Math.max(50, newMaxMp),\n        // 최소 마나 50\n        speed: Math.max(1, newSpeed),\n        // 최소 속도 1\n        hp: adjustedHp,\n        mp: adjustedMp\n      };\n    });\n\n    // 인벤토리에 아이템 추가\n    setInventory(prev => [...prev, equippedItem]);\n    addToCombatLog(`${equippedItem.name}을 해제했습니다!`);\n  };\n\n  // 아이템 판매\n  const sellItem = item => {\n    const sellPrice = Math.floor(item.price * 0.7);\n    setCharacter(prev => ({\n      ...prev,\n      gold: prev.gold + sellPrice\n    }));\n    setInventory(prev => prev.filter(invItem => invItem.id !== item.id));\n    addToCombatLog(`${item.name}을 ${sellPrice} 골드에 판매했습니다!`);\n  };\n\n  // 아이템 구매\n  const buyItem = item => {\n    if (character.gold < item.price) return;\n    setCharacter(prev => ({\n      ...prev,\n      gold: prev.gold - item.price\n    }));\n    setInventory(prev => [...prev, {\n      ...item,\n      id: `${item.id}_${Date.now()}`\n    }]);\n    addToCombatLog(`${item.name}을 구매했습니다!`);\n  };\n  const getRarityColor = rarity => {\n    const colors = {\n      common: \"#9ca3af\",\n      rare: \"#3b82f6\",\n      epic: \"#8b5cf6\",\n      legendary: \"#f59e0b\",\n      mythic: \"#ef4444\"\n    };\n    return colors[rarity] || \"#9ca3af\";\n  };\n\n  // 던전 입장 함수\n  const enterDungeon = dungeon => {\n    if (dungeon.isComingSoon) {\n      addToCombatLog(\"이 던전은 아직 업데이트 예정입니다!\");\n      return;\n    }\n    if (character.level < dungeon.requiredLevel) {\n      addToCombatLog(`레벨 ${dungeon.requiredLevel} 이상이어야 입장 가능합니다.`);\n      return;\n    }\n    setCurrentDungeon(dungeon);\n    setInDungeon(true);\n    setGameMode(\"dungeon\");\n    setCurrentTab(\"dungeon\");\n    spawnDungeonMonster(dungeon);\n\n    // 이벤트 로깅\n    onAction(\"dungeon_entered\", {\n      dungeon_id: dungeon.id,\n      dungeon_name: dungeon.name,\n      character_level: character.level,\n      floor: dungeon.currentFloor,\n      character_attack: character.attack,\n      character_defense: character.defense,\n      character_hp: character.hp,\n      character_mp: character.mp,\n      entry_time: new Date().getTime()\n    });\n  };\n\n  // 던전 몬스터 스폰\n  const spawnDungeonMonster = (dungeon, forceSpawn = false) => {\n    // 이미 몬스터가 있으면 새로 생성하지 않음 (강제 생성이 아닌 경우)\n    if (currentMonster && !forceSpawn) return;\n\n    // 강제 생성인 경우 기존 몬스터를 먼저 제거\n    if (forceSpawn && currentMonster) {\n      setCurrentMonster(null);\n    }\n    // 던전별 고유 몬스터 타입 정의\n    const getDungeonMonsters = dungeonId => {\n      switch (dungeonId) {\n        case \"forest\":\n          // 어둠의 숲\n          return [{\n            name: \"늑대\",\n            baseHp: 40,\n            baseAttack: 10,\n            baseDefense: 3\n          }, {\n            name: \"곰\",\n            baseHp: 80,\n            baseAttack: 16,\n            baseDefense: 6\n          }, {\n            name: \"거대 거미\",\n            baseHp: 120,\n            baseAttack: 22,\n            baseDefense: 10\n          }, {\n            name: \"숲의 수호자\",\n            baseHp: 200,\n            baseAttack: 35,\n            baseDefense: 18\n          }, {\n            name: \"고대 엔트\",\n            baseHp: 350,\n            baseAttack: 45,\n            baseDefense: 25\n          }];\n        case \"cave\":\n          // 고블린 동굴\n          return [{\n            name: \"고블린 전사\",\n            baseHp: 60,\n            baseAttack: 14,\n            baseDefense: 5\n          }, {\n            name: \"고블린 궁수\",\n            baseHp: 45,\n            baseAttack: 18,\n            baseDefense: 3\n          }, {\n            name: \"고블린 마법사\",\n            baseHp: 50,\n            baseAttack: 20,\n            baseDefense: 4\n          }, {\n            name: \"고블린 우두머리\",\n            baseHp: 180,\n            baseAttack: 30,\n            baseDefense: 15\n          }, {\n            name: \"고블린 왕\",\n            baseHp: 400,\n            baseAttack: 50,\n            baseDefense: 28\n          }];\n        case \"tower\":\n          // 마법사의 탑\n          return [{\n            name: \"마법 골렘\",\n            baseHp: 100,\n            baseAttack: 20,\n            baseDefense: 12\n          }, {\n            name: \"스켈레톤 메이지\",\n            baseHp: 70,\n            baseAttack: 25,\n            baseDefense: 8\n          }, {\n            name: \"플레임 엘리멘탈\",\n            baseHp: 110,\n            baseAttack: 28,\n            baseDefense: 10\n          }, {\n            name: \"리치\",\n            baseHp: 250,\n            baseAttack: 40,\n            baseDefense: 20\n          }, {\n            name: \"고대 마법사\",\n            baseHp: 500,\n            baseAttack: 60,\n            baseDefense: 35\n          }];\n        default:\n          return [{\n            name: \"슬라임\",\n            baseHp: 30,\n            baseAttack: 8,\n            baseDefense: 2\n          }, {\n            name: \"고블린\",\n            baseHp: 50,\n            baseAttack: 12,\n            baseDefense: 4\n          }, {\n            name: \"오크\",\n            baseHp: 100,\n            baseAttack: 18,\n            baseDefense: 8\n          }, {\n            name: \"트롤\",\n            baseHp: 150,\n            baseAttack: 25,\n            baseDefense: 12\n          }, {\n            name: \"드래곤\",\n            baseHp: 300,\n            baseAttack: 40,\n            baseDefense: 20\n          }];\n      }\n    };\n    const baseMonsters = getDungeonMonsters(dungeon.id);\n\n    // 층수에 따른 점진적 몬스터 선택 로직\n    const floorBasedMonsterIndex = () => {\n      const currentFloor = dungeon.currentFloor;\n      if (currentFloor <= 3) return 0; // 첫 번째 몬스터 (1~3층)\n      if (currentFloor <= 7) return 1; // 두 번째 몬스터 (4~7층)\n      if (currentFloor <= 12) return 2; // 세 번째 몬스터 (8~12층)\n      if (currentFloor <= 18) return 3; // 네 번째 몬스터 (13~18층)\n      return 4; // 다섯 번째 몬스터 (19층 이상)\n    };\n\n    // 층수 기반 기본 몬스터 + 약간의 랜덤성 추가\n    const baseIndex = floorBasedMonsterIndex();\n    const randomVariation = Math.random() < 0.3 && baseIndex > 0 ? -1 : 0; // 30% 확률로 한 단계 낮은 몬스터\n    const selectedIndex = Math.max(0, baseIndex + randomVariation);\n    const selectedMonster = baseMonsters[selectedIndex];\n    const levelMultiplier = 1 + (dungeon.level + dungeon.currentFloor - 1) * 0.2;\n    const monster = {\n      id: `dungeon_${dungeon.id}_${Date.now()}`,\n      name: selectedMonster.name,\n      level: dungeon.level + dungeon.currentFloor,\n      hp: Math.floor(selectedMonster.baseHp * levelMultiplier),\n      maxHp: Math.floor(selectedMonster.baseHp * levelMultiplier),\n      attack: Math.floor(selectedMonster.baseAttack * levelMultiplier),\n      defense: Math.floor(selectedMonster.baseDefense * levelMultiplier),\n      speed: 10,\n      exp: Math.floor((20 + dungeon.level * 8 + dungeon.currentFloor * 3) * levelMultiplier),\n      gold: Math.floor((10 + dungeon.level * 3) * levelMultiplier),\n      dropItems: generateDropItems(),\n      isBoss: dungeon.currentFloor % 5 === 0\n    };\n    if (monster.isBoss) {\n      monster.name = `보스 ${monster.name}`;\n      monster.hp *= 2;\n      monster.maxHp *= 2;\n      monster.attack *= 1.5;\n      monster.exp *= 3;\n      monster.gold *= 2;\n    }\n    setCurrentMonster(monster);\n    addToCombatLog(`${monster.name} Lv.${monster.level}이 나타났다!`);\n  };\n\n  // 물약 사용 함수\n  const consumeItem = item => {\n    if (item.type !== \"consumable\" || !item.consumableEffect) return;\n    const effect = item.consumableEffect;\n\n    // 체력 회복\n    if (effect.healHp) {\n      setCharacter(prev => ({\n        ...prev,\n        hp: Math.min(prev.maxHp, prev.hp + effect.healHp)\n      }));\n      addToCombatLog(`${item.name}을 사용하여 HP ${effect.healHp} 회복!`);\n    }\n\n    // 마나 회복\n    if (effect.healMp) {\n      setCharacter(prev => ({\n        ...prev,\n        mp: Math.min(prev.maxMp, prev.mp + effect.healMp)\n      }));\n      addToCombatLog(`${item.name}을 사용하여 MP ${effect.healMp} 회복!`);\n    }\n\n    // 버프 효과\n    if (effect.buffType && effect.buffAmount && effect.buffDuration) {\n      setCharacter(prev => ({\n        ...prev,\n        buffs: {\n          ...prev.buffs,\n          [effect.buffType]: {\n            amount: effect.buffAmount,\n            duration: effect.buffDuration\n          }\n        }\n      }));\n      addToCombatLog(`${item.name}을 사용하여 ${effect.buffType === \"attack\" ? \"공격력\" : effect.buffType === \"defense\" ? \"방어력\" : \"속도\"} ${effect.buffAmount} 증가! (${effect.buffDuration / 1000}초)`);\n    }\n\n    // 인벤토리에서 물약 제거 또는 수량 감소\n    setInventory(prev => {\n      const itemIndex = prev.findIndex(invItem => invItem.id === item.id);\n      if (itemIndex !== -1) {\n        const newInventory = [...prev];\n        const currentItem = newInventory[itemIndex];\n        if (currentItem.quantity && currentItem.quantity > 1) {\n          newInventory[itemIndex] = {\n            ...currentItem,\n            quantity: currentItem.quantity - 1\n          };\n        } else {\n          newInventory.splice(itemIndex, 1);\n        }\n        return newInventory;\n      }\n      return prev;\n    });\n\n    // 이벤트 로깅\n    onAction(\"consumable_used\", {\n      item_name: item.name,\n      item_type: item.type,\n      character_level: character.level,\n      heal_hp: effect.healHp || 0,\n      heal_mp: effect.healMp || 0,\n      buff_type: effect.buffType || \"none\",\n      buff_amount: effect.buffAmount || 0,\n      character_hp_before: character.hp,\n      character_mp_before: character.mp,\n      dungeon_name: (currentDungeon === null || currentDungeon === void 0 ? void 0 : currentDungeon.name) || null\n    });\n  };\n\n  // 스킬 사용 함수\n  const castSkill = skill => {\n    if (!skill.isLearned || skill.level === 0) {\n      addToCombatLog(\"스킬을 먼저 배워야 합니다!\");\n      return;\n    }\n    if (skill.currentCooldown > 0 || character.mp < skill.manaCost) return;\n\n    // 스킬 사용 로직\n    if (skill.id === \"heal\") {\n      const healAmount = 30 + skill.level * 5;\n      setCharacter(prev => ({\n        ...prev,\n        hp: Math.min(prev.maxHp, prev.hp + healAmount),\n        mp: prev.mp - skill.manaCost\n      }));\n      addToCombatLog(`${healAmount}만큼 회복했다!`);\n    } else {\n      // 공격 스킬\n      if (currentMonster) {\n        const damage = calculateSkillDamage(skill, character);\n        const newMonsterHp = Math.max(0, currentMonster.hp - damage);\n        setCurrentMonster(prev => prev ? {\n          ...prev,\n          hp: newMonsterHp\n        } : null);\n        setCharacter(prev => ({\n          ...prev,\n          mp: prev.mp - skill.manaCost\n        }));\n        addToCombatLog(`${skill.name}로 ${damage} 데미지!`);\n\n        // 몬스터가 죽지 않았으면 반격\n        if (newMonsterHp > 0) {\n          setTimeout(() => {\n            monsterAttack();\n          }, 1000);\n        } else {\n          // 몬스터가 죽었으면 처치 처리\n          setTimeout(() => {\n            defeatMonster();\n          }, 1500);\n        }\n      }\n    }\n\n    // 쿨다운 적용\n    setCharacter(prev => ({\n      ...prev,\n      skills: prev.skills.map(s => s.id === skill.id ? {\n        ...s,\n        currentCooldown: s.cooldown\n      } : s)\n    }));\n\n    // 이벤트 로깅\n    onAction(\"skill_used\", {\n      skill_name: skill.name,\n      skill_level: skill.level,\n      mana_cost: skill.manaCost,\n      character_level: character.level,\n      character_mp_before: character.mp,\n      character_mp_after: character.mp - skill.manaCost,\n      dungeon_name: (currentDungeon === null || currentDungeon === void 0 ? void 0 : currentDungeon.name) || null\n    });\n  };\n\n  // 스탯 포인트 할당\n  const allocateStat = statName => {\n    if (character.stats.availablePoints <= 0) return;\n    setCharacter(prev => ({\n      ...prev,\n      stats: {\n        ...prev.stats,\n        [statName]: prev.stats[statName] + 1,\n        availablePoints: prev.stats.availablePoints - 1\n      }\n    }));\n\n    // 스탯에 따른 능력치 업데이트\n    let hpBonus = 0,\n      mpBonus = 0,\n      attackBonus = 0,\n      defenseBonus = 0;\n    if (statName === \"vitality\") hpBonus = 5;\n    if (statName === \"intelligence\") mpBonus = 3;\n    if (statName === \"strength\") attackBonus = 2;\n    if (statName === \"agility\") {\n      attackBonus = 1;\n      defenseBonus = 1;\n    }\n    setCharacter(prev => ({\n      ...prev,\n      maxHp: prev.maxHp + hpBonus,\n      hp: prev.hp + hpBonus,\n      maxMp: prev.maxMp + mpBonus,\n      mp: prev.mp + mpBonus,\n      attack: prev.attack + attackBonus,\n      defense: prev.defense + defenseBonus\n    }));\n\n    // 이벤트 로깅\n    onAction(\"stat_allocated\", {\n      stat_name: statName,\n      stat_value: character.stats[statName] + 1,\n      character_level: character.level,\n      available_points: character.stats.availablePoints - 1\n    });\n  };\n\n  // 공통 캐릭터 정보 헤더 컴포넌트\n  const renderCharacterHeader = () => {\n    const expPercentage = character.exp / character.maxExp * 100;\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        background: \"linear-gradient(135deg, #4f46e5 0%, #7c3aed 100%)\",\n        borderRadius: \"15px\",\n        padding: \"15px 20px\",\n        marginBottom: \"20px\",\n        color: \"white\"\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: \"grid\",\n          gridTemplateColumns: \"repeat(auto-fit, minmax(120px, 1fr))\",\n          gap: \"15px\",\n          marginBottom: \"15px\"\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            textAlign: \"center\"\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              fontSize: \"20px\",\n              fontWeight: \"bold\",\n              color: \"#ffffff\"\n            },\n            children: [\"Lv.\", character.level]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 3112,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              color: \"#e0e7ff\",\n              fontSize: \"12px\"\n            },\n            children: \"\\uB808\\uBCA8\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 3117,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 3111,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            textAlign: \"center\"\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              fontSize: \"20px\",\n              fontWeight: \"bold\",\n              color: \"#fbbf24\"\n            },\n            children: [character.gold, \"G\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 3120,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              color: \"#e0e7ff\",\n              fontSize: \"12px\"\n            },\n            children: \"\\uACE8\\uB4DC\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 3125,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 3119,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            textAlign: \"center\"\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              fontSize: \"16px\",\n              fontWeight: \"bold\",\n              color: \"#f87171\"\n            },\n            children: character.attack\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 3128,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              color: \"#e0e7ff\",\n              fontSize: \"12px\"\n            },\n            children: \"\\uACF5\\uACA9\\uB825\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 3133,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 3127,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            textAlign: \"center\"\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              fontSize: \"16px\",\n              fontWeight: \"bold\",\n              color: \"#60a5fa\"\n            },\n            children: character.defense\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 3136,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              color: \"#e0e7ff\",\n              fontSize: \"12px\"\n            },\n            children: \"\\uBC29\\uC5B4\\uB825\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 3141,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 3135,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            textAlign: \"center\"\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              fontSize: \"16px\",\n              fontWeight: \"bold\",\n              color: \"#34d399\"\n            },\n            children: [character.hp, \"/\", character.maxHp]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 3144,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              color: \"#e0e7ff\",\n              fontSize: \"12px\"\n            },\n            children: \"\\uCCB4\\uB825\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 3149,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 3143,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            textAlign: \"center\"\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              fontSize: \"16px\",\n              fontWeight: \"bold\",\n              color: \"#a78bfa\"\n            },\n            children: [character.mp, \"/\", character.maxMp]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 3152,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              color: \"#e0e7ff\",\n              fontSize: \"12px\"\n            },\n            children: \"\\uB9C8\\uB098\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 3157,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 3151,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 3103,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          marginTop: \"15px\"\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: \"flex\",\n            justifyContent: \"space-between\",\n            alignItems: \"center\",\n            marginBottom: \"5px\"\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            style: {\n              fontSize: \"14px\",\n              color: \"#e0e7ff\"\n            },\n            children: \"\\uACBD\\uD5D8\\uCE58\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 3171,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            style: {\n              fontSize: \"14px\",\n              color: \"#ffffff\",\n              fontWeight: \"bold\"\n            },\n            children: [character.exp, \" / \", character.maxExp, \" (\", Math.floor(expPercentage), \"%)\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 3172,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 3163,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            width: \"100%\",\n            height: \"8px\",\n            backgroundColor: \"rgba(255, 255, 255, 0.2)\",\n            borderRadius: \"10px\",\n            overflow: \"hidden\"\n          },\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              width: `${expPercentage}%`,\n              height: \"100%\",\n              background: \"linear-gradient(90deg, #fbbf24 0%, #f59e0b 100%)\",\n              borderRadius: \"10px\",\n              transition: \"width 0.3s ease\"\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 3188,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 3179,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 3162,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 3093,\n      columnNumber: 7\n    }, this);\n  };\n\n  // 로비 렌더링\n  const renderLobbyTab = () => /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      padding: \"20px\",\n      background: \"#1f2937\",\n      minHeight: \"600px\"\n    },\n    children: [renderCharacterHeader(), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        marginBottom: \"20px\"\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        style: {\n          color: \"white\",\n          marginBottom: \"15px\",\n          fontSize: \"20px\"\n        },\n        children: \"\\uD83C\\uDFF0 \\uB358\\uC804 \\uBAA9\\uB85D\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 3211,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: \"grid\",\n          gap: \"15px\"\n        },\n        children: availableDungeons.map(dungeon => /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            background: dungeon.isUnlocked ? \"#374151\" : \"#1f2937\",\n            borderRadius: \"10px\",\n            padding: \"20px\",\n            border: dungeon.isUnlocked ? \"2px solid #10b981\" : \"2px solid #4b5563\",\n            opacity: dungeon.isUnlocked ? 1 : 0.6\n          },\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              display: \"flex\",\n              justifyContent: \"space-between\",\n              alignItems: \"center\"\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                style: {\n                  color: \"white\",\n                  margin: \"0 0 5px 0\",\n                  fontSize: \"18px\"\n                },\n                children: [dungeon.name, \" (Lv.\", dungeon.level, \")\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 3236,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                style: {\n                  color: \"#9ca3af\",\n                  margin: \"0 0 10px 0\",\n                  fontSize: \"14px\"\n                },\n                children: dungeon.description\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 3245,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  fontSize: \"12px\",\n                  color: \"#6b7280\"\n                },\n                children: [\"\\uD544\\uC694 \\uB808\\uBCA8: \", dungeon.requiredLevel, \" | \\uCE35\\uC218: \", dungeon.floors, \"\\uCE35 | \\uD604\\uC7AC \\uCE35: \", dungeon.currentFloor, \"\\uCE35\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 3254,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 3235,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => enterDungeon(dungeon),\n              disabled: !dungeon.isUnlocked || character.level < dungeon.requiredLevel || dungeon.isComingSoon,\n              style: {\n                background: dungeon.isComingSoon ? \"linear-gradient(135deg, #7c2d12 0%, #dc2626 100%)\" : dungeon.isUnlocked && character.level >= dungeon.requiredLevel ? \"linear-gradient(135deg, #10b981 0%, #059669 100%)\" : \"#4b5563\",\n                color: \"white\",\n                border: \"none\",\n                borderRadius: \"8px\",\n                padding: \"12px 20px\",\n                fontSize: \"14px\",\n                fontWeight: \"bold\",\n                cursor: dungeon.isUnlocked && character.level >= dungeon.requiredLevel && !dungeon.isComingSoon ? \"pointer\" : \"not-allowed\",\n                transition: \"all 0.3s ease\"\n              },\n              children: dungeon.isComingSoon ? \"업데이트 예정\" : dungeon.isUnlocked && character.level >= dungeon.requiredLevel ? \"입장\" : \"잠금\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 3259,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 3228,\n            columnNumber: 15\n          }, this)\n        }, dungeon.id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 3216,\n          columnNumber: 13\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 3214,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 3210,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 3205,\n    columnNumber: 5\n  }, this);\n\n  // 던전 탭 렌더링\n  const renderDungeonTab = () => {\n    if (!inDungeon || !currentDungeon) {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          padding: \"100px 20px\",\n          textAlign: \"center\",\n          background: \"#1f2937\",\n          color: \"#9ca3af\"\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"\\uB358\\uC804\\uC5D0 \\uC785\\uC7A5\\uD558\\uC9C0 \\uC54A\\uC558\\uC2B5\\uB2C8\\uB2E4\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 3315,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"\\uB85C\\uBE44\\uC5D0\\uC11C \\uB358\\uC804\\uC744 \\uC120\\uD0DD\\uD574\\uC8FC\\uC138\\uC694\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 3316,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 3307,\n        columnNumber: 9\n      }, this);\n    }\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        padding: \"20px\",\n        background: \"#1f2937\",\n        minHeight: \"600px\"\n      },\n      children: [renderCharacterHeader(), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          background: \"linear-gradient(135deg, #7c2d12 0%, #dc2626 100%)\",\n          borderRadius: \"15px\",\n          padding: \"20px\",\n          marginBottom: \"20px\",\n          color: \"white\"\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: \"flex\",\n            justifyContent: \"space-between\",\n            alignItems: \"center\",\n            marginBottom: \"15px\"\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n              style: {\n                margin: \"0 0 5px 0\",\n                fontSize: \"24px\"\n              },\n              children: [\"\\uD83C\\uDFF0 \", currentDungeon.name]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 3347,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              style: {\n                margin: 0,\n                opacity: 0.9,\n                fontSize: \"14px\"\n              },\n              children: [currentDungeon.currentFloor, \"\\uCE35 / \", currentDungeon.floors, \"\\uCE35\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 3350,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 3346,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => {\n              // 던전 나가기 이벤트 로깅\n              onAction(\"dungeon_exited\", {\n                dungeon_id: currentDungeon.id,\n                dungeon_name: currentDungeon.name,\n                current_floor: currentDungeon.currentFloor,\n                total_floors: currentDungeon.floors,\n                character_level: character.level,\n                exit_reason: \"manual\",\n                time_spent: new Date().getTime()\n              });\n              setInDungeon(false);\n              setCurrentDungeon(null);\n              setCurrentTab(\"lobby\");\n              setGameMode(\"lobby\");\n            },\n            style: {\n              background: \"#374151\",\n              color: \"white\",\n              border: \"none\",\n              borderRadius: \"8px\",\n              padding: \"10px 15px\",\n              cursor: \"pointer\"\n            },\n            children: \"\\uB358\\uC804 \\uB098\\uAC00\\uAE30\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 3354,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 3338,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: \"flex\",\n            gap: \"10px\",\n            alignItems: \"center\",\n            justifyContent: \"center\",\n            padding: \"15px\",\n            background: \"rgba(0, 0, 0, 0.2)\",\n            borderRadius: \"10px\"\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => {\n              if (currentDungeon.currentFloor > 1) {\n                const updatedDungeon = {\n                  ...currentDungeon,\n                  currentFloor: currentDungeon.currentFloor - 1\n                };\n                setCurrentDungeon(updatedDungeon);\n                setCurrentMonster(null);\n                addToCombatLog(`${updatedDungeon.currentFloor}층으로 이동했습니다.`);\n                setTimeout(() => {\n                  spawnDungeonMonster(updatedDungeon, true);\n                }, 1000);\n              }\n            },\n            disabled: currentDungeon.currentFloor <= 1,\n            style: {\n              background: currentDungeon.currentFloor <= 1 ? \"#6b7280\" : \"#3b82f6\",\n              color: \"white\",\n              border: \"none\",\n              borderRadius: \"6px\",\n              padding: \"8px 12px\",\n              cursor: currentDungeon.currentFloor <= 1 ? \"not-allowed\" : \"pointer\",\n              fontSize: \"14px\"\n            },\n            children: \"\\u2B06\\uFE0F \\uC774\\uC804 \\uCE35\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 3396,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"number\",\n            min: \"1\",\n            max: currentDungeon.floors,\n            value: currentDungeon.currentFloor,\n            placeholder: \"\\uCE35\",\n            onChange: e => {\n              const targetFloor = parseInt(e.target.value);\n              if (targetFloor >= 1 && targetFloor <= currentDungeon.floors) {\n                // Check if all previous floors are cleared\n                let canMoveTo = true;\n                for (let i = 1; i < targetFloor; i++) {\n                  if (!currentDungeon.clearedFloors.has(i)) {\n                    canMoveTo = false;\n                    addToCombatLog(`${i}층을 먼저 클리어해야 ${targetFloor}층으로 이동할 수 있습니다.`);\n                    break;\n                  }\n                }\n                if (canMoveTo) {\n                  const updatedDungeon = {\n                    ...currentDungeon,\n                    currentFloor: targetFloor\n                  };\n                  setCurrentDungeon(updatedDungeon);\n                  setCurrentMonster(null);\n                  addToCombatLog(`${targetFloor}층으로 이동했습니다.`);\n                  setTimeout(() => {\n                    spawnDungeonMonster(updatedDungeon, true);\n                  }, 1000);\n                }\n              }\n            },\n            style: {\n              background: \"rgba(255, 255, 255, 0.1)\",\n              color: \"white\",\n              border: \"1px solid rgba(255, 255, 255, 0.3)\",\n              borderRadius: \"6px\",\n              padding: \"8px 12px\",\n              fontSize: \"16px\",\n              fontWeight: \"bold\",\n              textAlign: \"center\",\n              width: \"80px\"\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 3429,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => {\n              const nextFloor = currentDungeon.currentFloor + 1;\n              const currentFloorCleared = currentDungeon.clearedFloors.has(currentDungeon.currentFloor);\n              if (currentDungeon.currentFloor < currentDungeon.floors && currentFloorCleared) {\n                const updatedDungeon = {\n                  ...currentDungeon,\n                  currentFloor: nextFloor\n                };\n                setCurrentDungeon(updatedDungeon);\n                setCurrentMonster(null);\n                addToCombatLog(`${updatedDungeon.currentFloor}층으로 이동했습니다.`);\n                setTimeout(() => {\n                  spawnDungeonMonster(updatedDungeon, true);\n                }, 1000);\n              } else if (!currentFloorCleared) {\n                addToCombatLog(`현재 층에서 적어도 한 마리의 몬스터를 처치해야 다음 층으로 진행할 수 있습니다.`);\n              }\n            },\n            disabled: currentDungeon.currentFloor >= currentDungeon.floors || !currentDungeon.clearedFloors.has(currentDungeon.currentFloor),\n            style: {\n              background: currentDungeon.currentFloor >= currentDungeon.floors || !currentDungeon.clearedFloors.has(currentDungeon.currentFloor) ? \"#6b7280\" : \"#10b981\",\n              color: \"white\",\n              border: \"none\",\n              borderRadius: \"6px\",\n              padding: \"8px 12px\",\n              cursor: currentDungeon.currentFloor >= currentDungeon.floors || !currentDungeon.clearedFloors.has(currentDungeon.currentFloor) ? \"not-allowed\" : \"pointer\",\n              fontSize: \"14px\"\n            },\n            children: \"\\u2B07\\uFE0F \\uB2E4\\uC74C \\uCE35\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 3477,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 3385,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 3329,\n        columnNumber: 9\n      }, this), showDungeonChoice && /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          background: \"linear-gradient(135deg, #f59e0b 0%, #d97706 100%)\",\n          borderRadius: \"15px\",\n          padding: \"20px\",\n          marginBottom: \"20px\",\n          color: \"white\",\n          textAlign: \"center\"\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            fontSize: \"18px\",\n            fontWeight: \"bold\",\n            marginBottom: \"10px\"\n          },\n          children: \"\\uD83C\\uDFC3 \\uB2E4\\uC74C \\uCE35\\uC73C\\uB85C \\uC774\\uB3D9 \\uC911...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 3545,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            background: \"rgba(255, 255, 255, 0.2)\",\n            borderRadius: \"10px\",\n            height: \"8px\",\n            overflow: \"hidden\",\n            marginBottom: \"10px\"\n          },\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              background: \"linear-gradient(90deg, #10b981, #059669)\",\n              height: \"100%\",\n              width: \"100%\",\n              borderRadius: \"10px\",\n              animation: \"progress 3s linear\"\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 3563,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 3554,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            fontSize: \"14px\",\n            opacity: 0.9\n          },\n          children: \"\\uC7A0\\uC2DC\\uB9CC \\uAE30\\uB2E4\\uB824\\uC8FC\\uC138\\uC694...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 3573,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 3535,\n        columnNumber: 11\n      }, this), currentMonster && /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          background: \"#374151\",\n          borderRadius: \"15px\",\n          padding: \"20px\",\n          marginBottom: \"20px\"\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: \"grid\",\n            gridTemplateColumns: \"1fr 1fr\",\n            gap: \"20px\",\n            marginBottom: \"20px\"\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              textAlign: \"center\"\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                width: \"80px\",\n                height: \"80px\",\n                background: \"linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%)\",\n                borderRadius: \"50%\",\n                margin: \"0 auto 10px\",\n                display: \"flex\",\n                alignItems: \"center\",\n                justifyContent: \"center\",\n                fontSize: \"30px\"\n              },\n              children: \"\\u2694\\uFE0F\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 3599,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                color: \"white\",\n                marginBottom: \"10px\"\n              },\n              children: [character.name, \" Lv.\", character.level]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 3615,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                background: \"#1f2937\",\n                borderRadius: \"10px\",\n                padding: \"5px\",\n                marginBottom: \"5px\"\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  background: \"linear-gradient(90deg, #ef4444 0%, #dc2626 100%)\",\n                  height: \"8px\",\n                  borderRadius: \"4px\",\n                  width: `${character.hp / character.maxHp * 100}%`\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 3626,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  color: \"white\",\n                  fontSize: \"12px\",\n                  marginTop: \"5px\"\n                },\n                children: [\"HP: \", character.hp, \"/\", character.maxHp]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 3635,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 3618,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 3598,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              textAlign: \"center\"\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                width: \"80px\",\n                height: \"80px\",\n                background: \"linear-gradient(135deg, #dc2626 0%, #991b1b 100%)\",\n                borderRadius: \"50%\",\n                margin: \"0 auto 10px\",\n                display: \"flex\",\n                alignItems: \"center\",\n                justifyContent: \"center\",\n                fontSize: \"30px\"\n              },\n              children: \"\\uD83D\\uDC79\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 3649,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                color: \"white\",\n                marginBottom: \"10px\"\n              },\n              children: [currentMonster.name, \" Lv.\", currentMonster.level, currentMonster.isBoss && /*#__PURE__*/_jsxDEV(\"span\", {\n                style: {\n                  color: \"#fbbf24\"\n                },\n                children: \" \\uD83D\\uDC51\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 3668,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 3665,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                background: \"#1f2937\",\n                borderRadius: \"10px\",\n                padding: \"5px\",\n                marginBottom: \"5px\"\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  background: \"linear-gradient(90deg, #ef4444 0%, #dc2626 100%)\",\n                  height: \"8px\",\n                  borderRadius: \"4px\",\n                  width: `${currentMonster.hp / currentMonster.maxHp * 100}%`\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 3679,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  color: \"white\",\n                  fontSize: \"12px\",\n                  marginTop: \"5px\"\n                },\n                children: [\"HP: \", currentMonster.hp, \"/\", currentMonster.maxHp]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 3690,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 3671,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 3648,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 3589,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: \"flex\",\n            gap: \"10px\",\n            justifyContent: \"center\",\n            marginBottom: \"20px\"\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: attack,\n            disabled: character.hp <= 0,\n            style: {\n              background: \"linear-gradient(135deg, #ef4444 0%, #dc2626 100%)\",\n              color: \"white\",\n              border: \"none\",\n              borderRadius: \"10px\",\n              padding: \"12px 24px\",\n              fontSize: \"16px\",\n              fontWeight: \"bold\",\n              cursor: character.hp > 0 ? \"pointer\" : \"not-allowed\",\n              opacity: character.hp > 0 ? 1 : 0.5\n            },\n            children: \"\\u2694\\uFE0F \\uACF5\\uACA9\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 3712,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => setIsAutoFighting(!isAutoFighting),\n            style: {\n              background: isAutoFighting ? \"linear-gradient(135deg, #dc2626 0%, #991b1b 100%)\" : \"linear-gradient(135deg, #10b981 0%, #059669 100%)\",\n              color: \"white\",\n              border: \"none\",\n              borderRadius: \"10px\",\n              padding: \"12px 24px\",\n              fontSize: \"16px\",\n              fontWeight: \"bold\",\n              cursor: \"pointer\"\n            },\n            children: isAutoFighting ? \"⏸️ 자동 중지\" : \"▶️ 자동 전투\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 3730,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 3704,\n          columnNumber: 13\n        }, this), character.skills.filter(skill => skill.type === \"active\" && skill.isLearned && skill.level > 0).length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            marginBottom: \"20px\"\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n            style: {\n              color: \"white\",\n              marginBottom: \"10px\",\n              textAlign: \"center\",\n              fontSize: \"16px\"\n            },\n            children: [\"\\u2728 \\uC2A4\\uD0AC \\uC0AC\\uC6A9 (MP: \", character.mp, \"/\", character.maxMp, \")\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 3755,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              display: \"flex\",\n              gap: \"8px\",\n              justifyContent: \"center\",\n              flexWrap: \"wrap\"\n            },\n            children: character.skills.filter(skill => skill.type === \"active\" && skill.isLearned && skill.level > 0).map(skill => /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => castSkill(skill),\n              disabled: character.hp <= 0 || skill.currentCooldown > 0 || character.mp < skill.manaCost,\n              style: {\n                background: character.hp > 0 && skill.currentCooldown === 0 && character.mp >= skill.manaCost ? \"linear-gradient(135deg, #7c3aed 0%, #a855f7 100%)\" : \"#4b5563\",\n                color: \"white\",\n                border: \"none\",\n                borderRadius: \"8px\",\n                padding: \"10px 16px\",\n                fontSize: \"14px\",\n                fontWeight: \"bold\",\n                cursor: character.hp > 0 && skill.currentCooldown === 0 && character.mp >= skill.manaCost ? \"pointer\" : \"not-allowed\",\n                opacity: character.hp > 0 && skill.currentCooldown === 0 && character.mp >= skill.manaCost ? 1 : 0.6,\n                position: \"relative\"\n              },\n              title: `${skill.description}\\n대미지: ${calculateSkillDamage(skill, character)} | 마나: ${skill.manaCost}`,\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                children: skill.name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 3823,\n                columnNumber: 25\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  fontSize: \"10px\",\n                  opacity: 0.8\n                },\n                children: [\"MP: \", skill.manaCost, skill.currentCooldown > 0 && /*#__PURE__*/_jsxDEV(_Fragment, {\n                  children: [\" | \", (skill.currentCooldown / 1000).toFixed(1), \"s\"]\n                }, void 0, true)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 3824,\n                columnNumber: 25\n              }, this)]\n            }, skill.id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 3781,\n              columnNumber: 23\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 3765,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 3754,\n          columnNumber: 15\n        }, this), inventory.filter(item => item.type === \"consumable\").length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            marginBottom: \"20px\"\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n            style: {\n              color: \"white\",\n              marginBottom: \"10px\",\n              textAlign: \"center\",\n              fontSize: \"16px\"\n            },\n            children: \"\\uD83E\\uDDEA \\uBB3C\\uC57D \\uC0AC\\uC6A9\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 3840,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              display: \"flex\",\n              gap: \"8px\",\n              justifyContent: \"center\",\n              flexWrap: \"wrap\"\n            },\n            children: inventory.filter(item => item.type === \"consumable\").map(item => {\n              var _item$consumableEffec, _item$consumableEffec2, _item$consumableEffec3, _item$consumableEffec4, _item$consumableEffec5;\n              return /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => consumeItem(item),\n                disabled: character.hp <= 0,\n                style: {\n                  background: character.hp > 0 ? `linear-gradient(135deg, ${getRarityColor(item.rarity)} 0%, #374151 100%)` : \"#4b5563\",\n                  color: \"white\",\n                  border: \"none\",\n                  borderRadius: \"8px\",\n                  padding: \"8px 12px\",\n                  fontSize: \"12px\",\n                  fontWeight: \"bold\",\n                  cursor: character.hp > 0 ? \"pointer\" : \"not-allowed\",\n                  opacity: character.hp > 0 ? 1 : 0.6,\n                  position: \"relative\"\n                },\n                title: `${item.name}\\n${(_item$consumableEffec = item.consumableEffect) !== null && _item$consumableEffec !== void 0 && _item$consumableEffec.healHp ? `HP +${item.consumableEffect.healHp}` : \"\"}${(_item$consumableEffec2 = item.consumableEffect) !== null && _item$consumableEffec2 !== void 0 && _item$consumableEffec2.healMp ? `MP +${item.consumableEffect.healMp}` : \"\"}${(_item$consumableEffec3 = item.consumableEffect) !== null && _item$consumableEffec3 !== void 0 && _item$consumableEffec3.buffType ? `${item.consumableEffect.buffType} +${item.consumableEffect.buffAmount}` : \"\"}`,\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  children: item.name\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 3896,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  style: {\n                    fontSize: \"10px\",\n                    opacity: 0.8\n                  },\n                  children: [item.quantity && item.quantity > 1 ? `x${item.quantity}` : \"\", ((_item$consumableEffec4 = item.consumableEffect) === null || _item$consumableEffec4 === void 0 ? void 0 : _item$consumableEffec4.healHp) && ` HP+${item.consumableEffect.healHp}`, ((_item$consumableEffec5 = item.consumableEffect) === null || _item$consumableEffec5 === void 0 ? void 0 : _item$consumableEffec5.healMp) && ` MP+${item.consumableEffect.healMp}`]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 3897,\n                  columnNumber: 25\n                }, this)]\n              }, item.id, true, {\n                fileName: _jsxFileName,\n                lineNumber: 3861,\n                columnNumber: 23\n              }, this);\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 3850,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 3839,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            background: \"#1f2937\",\n            borderRadius: \"10px\",\n            padding: \"15px\",\n            height: \"200px\",\n            overflowY: \"auto\",\n            fontSize: \"14px\"\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              color: \"#9ca3af\",\n              marginBottom: \"10px\",\n              fontWeight: \"bold\"\n            },\n            children: \"\\uC804\\uD22C \\uB85C\\uADF8:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 3923,\n            columnNumber: 15\n          }, this), combatLog.slice(-10).map((log, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              color: \"#e5e7eb\",\n              marginBottom: \"5px\",\n              lineHeight: \"1.4\"\n            },\n            children: log\n          }, index, false, {\n            fileName: _jsxFileName,\n            lineNumber: 3933,\n            columnNumber: 17\n          }, this))]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 3913,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 3581,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 3322,\n      columnNumber: 7\n    }, this);\n  };\n\n  // 캐릭터 탭 렌더링 (RPG 스타일 UI)\n  const renderCharacterTab = () => /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      padding: \"20px\",\n      background: \"#1f2937\",\n      minHeight: \"600px\"\n    },\n    children: [renderCharacterHeader(), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        background: \"linear-gradient(135deg, #1e293b 0%, #334155 100%)\",\n        border: \"2px solid #475569\",\n        borderRadius: \"12px\",\n        padding: \"20px\",\n        display: \"flex\",\n        gap: \"30px\",\n        minHeight: \"500px\"\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          flex: \"0 0 300px\"\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          style: {\n            color: \"#f1f5f9\",\n            margin: \"0 0 20px 0\",\n            fontSize: \"18px\",\n            fontWeight: \"bold\",\n            textAlign: \"center\"\n          },\n          children: \"\\u2694\\uFE0F \\uC7A5\\uBE44\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 3971,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: \"grid\",\n            gridTemplateColumns: \"repeat(3, 1fr)\",\n            gap: \"10px\",\n            marginBottom: \"20px\"\n          },\n          children: [renderEquipmentSlot(\"helmet\", \"⛑️\"), /*#__PURE__*/_jsxDEV(\"div\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 3994,\n            columnNumber: 13\n          }, this), \" \", /*#__PURE__*/_jsxDEV(\"div\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 3995,\n            columnNumber: 13\n          }, this), \" \", renderEquipmentSlot(\"ring\", \"💍\"), renderEquipmentSlot(\"armor\", \"🛡️\"), renderEquipmentSlot(\"weapon\", \"⚔️\"), renderEquipmentSlot(\"boots\", \"👢\"), renderEquipmentSlot(\"amulet\", \"📿\"), /*#__PURE__*/_jsxDEV(\"div\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 4006,\n            columnNumber: 13\n          }, this), \" \"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 3984,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 3970,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          flex: \"1\"\n        },\n        children: [character.stats.availablePoints > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            background: \"rgba(16, 185, 129, 0.2)\",\n            border: \"1px solid #10b981\",\n            borderRadius: \"8px\",\n            padding: \"12px\",\n            marginBottom: \"20px\",\n            textAlign: \"center\"\n          },\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              color: \"#10b981\",\n              fontSize: \"16px\",\n              fontWeight: \"bold\"\n            },\n            children: [\"\\uC0AC\\uC6A9 \\uAC00\\uB2A5\\uD55C \\uD3EC\\uC778\\uD2B8: \", character.stats.availablePoints]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 4024,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 4014,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            background: \"rgba(15, 23, 42, 0.8)\",\n            border: \"1px solid #475569\",\n            borderRadius: \"8px\",\n            padding: \"15px\",\n            marginBottom: \"20px\"\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n            style: {\n              color: \"#f1f5f9\",\n              margin: \"0 0 15px 0\",\n              fontSize: \"16px\",\n              fontWeight: \"bold\"\n            },\n            children: \"\\uD83D\\uDCCA \\uAE30\\uBCF8 \\uB2A5\\uB825\\uCE58\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 4046,\n            columnNumber: 13\n          }, this), [{\n            key: \"strength\",\n            name: \"힘\",\n            icon: \"💪\",\n            color: \"#dc2626\",\n            bonus: character.stats.strength * 2,\n            bonusType: \"공격력\"\n          }, {\n            key: \"agility\",\n            name: \"민첩성\",\n            icon: \"⚡\",\n            color: \"#10b981\",\n            bonus: character.stats.agility,\n            bonusType: \"속도\"\n          }, {\n            key: \"vitality\",\n            name: \"체력\",\n            icon: \"🛡️\",\n            color: \"#3b82f6\",\n            bonus: character.stats.vitality * 10,\n            bonusType: \"HP\"\n          }, {\n            key: \"intelligence\",\n            name: \"지능\",\n            icon: \"🧠\",\n            color: \"#7c3aed\",\n            bonus: character.stats.intelligence * 5,\n            bonusType: \"MP\"\n          }].map(stat => /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              display: \"flex\",\n              justifyContent: \"space-between\",\n              alignItems: \"center\",\n              padding: \"8px 0\",\n              borderBottom: \"1px solid rgba(71, 85, 105, 0.3)\"\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                display: \"flex\",\n                alignItems: \"center\",\n                gap: \"10px\"\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                style: {\n                  fontSize: \"16px\"\n                },\n                children: stat.icon\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 4105,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                style: {\n                  color: \"#f1f5f9\",\n                  fontSize: \"14px\"\n                },\n                children: stat.name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 4106,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                style: {\n                  color: stat.color,\n                  fontSize: \"16px\",\n                  fontWeight: \"bold\"\n                },\n                children: character.stats[stat.key]\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 4109,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 4102,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                display: \"flex\",\n                alignItems: \"center\",\n                gap: \"10px\"\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                style: {\n                  color: stat.color,\n                  fontSize: \"12px\"\n                },\n                children: [\"+\", stat.bonus, \" \", stat.bonusType]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 4122,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => allocateStat(stat.key),\n                disabled: character.stats.availablePoints <= 0,\n                style: {\n                  background: character.stats.availablePoints > 0 ? stat.color : \"#4b5563\",\n                  color: \"white\",\n                  border: \"none\",\n                  borderRadius: \"4px\",\n                  padding: \"4px 8px\",\n                  fontSize: \"12px\",\n                  cursor: character.stats.availablePoints > 0 ? \"pointer\" : \"not-allowed\",\n                  minWidth: \"24px\"\n                },\n                children: \"+\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 4125,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 4119,\n              columnNumber: 17\n            }, this)]\n          }, stat.key, true, {\n            fileName: _jsxFileName,\n            lineNumber: 4092,\n            columnNumber: 15\n          }, this))]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 4037,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            background: \"rgba(15, 23, 42, 0.8)\",\n            border: \"1px solid #475569\",\n            borderRadius: \"8px\",\n            padding: \"15px\"\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n            style: {\n              color: \"#f1f5f9\",\n              margin: \"0 0 15px 0\",\n              fontSize: \"16px\",\n              fontWeight: \"bold\"\n            },\n            children: \"\\u2694\\uFE0F \\uC804\\uD22C \\uB2A5\\uB825\\uCE58\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 4163,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              display: \"grid\",\n              gridTemplateColumns: \"1fr 1fr\",\n              gap: \"15px\"\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  color: \"#dc2626\",\n                  fontSize: \"14px\",\n                  fontWeight: \"bold\"\n                },\n                children: \"\\uACF5\\uACA9\\uB825\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 4182,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  color: \"#f1f5f9\",\n                  fontSize: \"18px\",\n                  fontWeight: \"bold\"\n                },\n                children: character.attack\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 4191,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 4181,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  color: \"#3b82f6\",\n                  fontSize: \"14px\",\n                  fontWeight: \"bold\"\n                },\n                children: \"\\uBC29\\uC5B4\\uB825\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 4202,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  color: \"#f1f5f9\",\n                  fontSize: \"18px\",\n                  fontWeight: \"bold\"\n                },\n                children: character.defense\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 4211,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 4201,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  color: \"#ef4444\",\n                  fontSize: \"14px\",\n                  fontWeight: \"bold\"\n                },\n                children: \"\\uCCB4\\uB825\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 4222,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  color: \"#f1f5f9\",\n                  fontSize: \"16px\"\n                },\n                children: [character.hp, \" / \", character.maxHp]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 4231,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 4221,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  color: \"#8b5cf6\",\n                  fontSize: \"14px\",\n                  fontWeight: \"bold\"\n                },\n                children: \"\\uB9C8\\uB098\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 4236,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  color: \"#f1f5f9\",\n                  fontSize: \"16px\"\n                },\n                children: [character.mp, \" / \", character.maxMp]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 4245,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 4235,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 4174,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 4155,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 4011,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 3958,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 3953,\n    columnNumber: 5\n  }, this);\n\n  // 장비 슬롯 렌더링 함수\n  const renderEquipmentSlot = (slot, icon) => {\n    const item = character.equipment[slot];\n    const rarityColor = (item === null || item === void 0 ? void 0 : item.rarity) === \"legendary\" ? \"#f59e0b\" : (item === null || item === void 0 ? void 0 : item.rarity) === \"epic\" ? \"#a855f7\" : (item === null || item === void 0 ? void 0 : item.rarity) === \"rare\" ? \"#3b82f6\" : (item === null || item === void 0 ? void 0 : item.rarity) === \"mythic\" ? \"#ef4444\" : \"#9ca3af\";\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        width: \"70px\",\n        height: \"70px\",\n        background: item ? \"rgba(16, 185, 129, 0.2)\" : \"rgba(71, 85, 105, 0.3)\",\n        border: item ? `2px solid ${rarityColor}` : \"2px solid #475569\",\n        borderRadius: \"8px\",\n        display: \"flex\",\n        flexDirection: \"column\",\n        alignItems: \"center\",\n        justifyContent: \"center\",\n        position: \"relative\",\n        cursor: item ? \"pointer\" : \"default\"\n      },\n      children: item ? /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            fontSize: \"24px\"\n          },\n          children: icon\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 4290,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            fontSize: \"8px\",\n            color: rarityColor,\n            fontWeight: \"bold\",\n            textAlign: \"center\",\n            lineHeight: \"1\"\n          },\n          children: item.name.length > 6 ? item.name.substring(0, 6) + \"...\" : item.name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 4291,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => unequipItem(slot),\n          style: {\n            position: \"absolute\",\n            top: \"-5px\",\n            right: \"-5px\",\n            background: \"#dc2626\",\n            color: \"white\",\n            border: \"none\",\n            borderRadius: \"50%\",\n            width: \"16px\",\n            height: \"16px\",\n            fontSize: \"10px\",\n            cursor: \"pointer\",\n            display: \"flex\",\n            alignItems: \"center\",\n            justifyContent: \"center\"\n          },\n          children: \"\\xD7\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 4304,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true) : /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          fontSize: \"24px\",\n          opacity: 0.3\n        },\n        children: icon\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 4327,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 4271,\n      columnNumber: 7\n    }, this);\n  };\n\n  // 인벤토리 탭 렌더링\n  // 아이템 아이콘 맵핑\n  const getItemIcon = item => {\n    const iconMap = {\n      // 무기\n      \"iron-sword\": \"⚔️\",\n      \"steel-sword\": \"🗡️\",\n      \"magic-sword\": \"⚡\",\n      \"legendary-sword\": \"🔥\",\n      \"dragon-slayer\": \"🐉\",\n      // 방어구\n      \"leather-armor\": \"🛡️\",\n      \"iron-armor\": \"⛨\",\n      \"steel-armor\": \"🛡️\",\n      \"magic-armor\": \"✨\",\n      \"dragon-armor\": \"🔮\",\n      // 헬멧\n      \"iron-helmet\": \"⛑️\",\n      \"steel-helmet\": \"👑\",\n      \"magic-helmet\": \"💎\",\n      // 부츠\n      \"leather-boots\": \"👢\",\n      \"iron-boots\": \"🥾\",\n      \"steel-boots\": \"👢\",\n      \"magic-boots\": \"⚡\",\n      // 반지/목걸이\n      \"power-ring\": \"💍\",\n      \"magic-ring\": \"💫\",\n      \"health-ring\": \"❤️\",\n      \"defense-ring\": \"🛡️\",\n      // 소모품\n      \"health-potion\": \"🧪\",\n      \"mana-potion\": \"💙\",\n      \"strength-potion\": \"💪\",\n      \"defense-potion\": \"🛡️\"\n    };\n    return iconMap[item.id] || \"📦\";\n  };\n\n  // 선택된 아이템 상세 정보\n  const [selectedItem, setSelectedItem] = useState(null);\n  const renderInventoryTab = () => /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      padding: \"20px\",\n      background: \"#1f2937\",\n      minHeight: \"600px\"\n    },\n    children: [renderCharacterHeader(), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        display: \"flex\",\n        gap: \"20px\"\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          flex: 1\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          style: {\n            color: \"white\",\n            marginBottom: \"15px\"\n          },\n          children: [\"\\uD83D\\uDCE6 \\uC18C\\uC9C0\\uD488 (\", inventory.length, \"/50)\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 4383,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: \"grid\",\n            gridTemplateColumns: \"repeat(10, 1fr)\",\n            gap: \"4px\",\n            background: \"rgba(0, 0, 0, 0.3)\",\n            padding: \"15px\",\n            borderRadius: \"10px\",\n            border: \"2px solid #4b5563\"\n          },\n          children: Array.from({\n            length: 50\n          }, (_, index) => {\n            const item = inventory[index];\n            const isEmpty = !item;\n            return /*#__PURE__*/_jsxDEV(\"div\", {\n              onClick: () => item && setSelectedItem(item),\n              style: {\n                width: \"50px\",\n                height: \"50px\",\n                background: isEmpty ? \"rgba(255, 255, 255, 0.05)\" : \"rgba(255, 255, 255, 0.1)\",\n                border: isEmpty ? \"1px solid #374151\" : `2px solid ${getRarityColor(item.rarity)}`,\n                borderRadius: \"8px\",\n                display: \"flex\",\n                flexDirection: \"column\",\n                alignItems: \"center\",\n                justifyContent: \"center\",\n                cursor: item ? \"pointer\" : \"default\",\n                position: \"relative\",\n                transition: \"all 0.2s ease\"\n              },\n              onMouseEnter: e => {\n                if (item) {\n                  e.currentTarget.style.transform = \"scale(1.05)\";\n                  e.currentTarget.style.boxShadow = `0 0 15px ${getRarityColor(item.rarity)}50`;\n                }\n              },\n              onMouseLeave: e => {\n                if (item) {\n                  e.currentTarget.style.transform = \"scale(1)\";\n                  e.currentTarget.style.boxShadow = \"none\";\n                }\n              },\n              children: item && /*#__PURE__*/_jsxDEV(_Fragment, {\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  style: {\n                    fontSize: \"24px\"\n                  },\n                  children: getItemIcon(item)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 4441,\n                  columnNumber: 23\n                }, this), inventory.filter(inv => inv.name === item.name).length > 1 && /*#__PURE__*/_jsxDEV(\"div\", {\n                  style: {\n                    position: \"absolute\",\n                    bottom: \"2px\",\n                    right: \"2px\",\n                    background: \"#000\",\n                    color: \"white\",\n                    fontSize: \"10px\",\n                    padding: \"1px 3px\",\n                    borderRadius: \"3px\",\n                    lineHeight: \"1\"\n                  },\n                  children: inventory.filter(inv => inv.name === item.name).length\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 4447,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true)\n            }, index, false, {\n              fileName: _jsxFileName,\n              lineNumber: 4403,\n              columnNumber: 17\n            }, this);\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 4386,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 4382,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          width: \"300px\"\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          style: {\n            color: \"white\",\n            marginBottom: \"15px\"\n          },\n          children: \"\\uD83D\\uDCCB \\uC544\\uC774\\uD15C \\uC815\\uBCF4\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 4476,\n          columnNumber: 11\n        }, this), selectedItem ? /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            background: \"rgba(255, 255, 255, 0.1)\",\n            border: `2px solid ${getRarityColor(selectedItem.rarity)}`,\n            borderRadius: \"10px\",\n            padding: \"20px\"\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              textAlign: \"center\",\n              marginBottom: \"15px\"\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                fontSize: \"48px\",\n                marginBottom: \"10px\"\n              },\n              children: getItemIcon(selectedItem)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 4489,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n              style: {\n                color: getRarityColor(selectedItem.rarity),\n                margin: \"0 0 5px 0\",\n                fontSize: \"18px\",\n                fontWeight: \"bold\"\n              },\n              children: selectedItem.name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 4492,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              style: {\n                color: \"#9ca3af\",\n                margin: \"0 0 15px 0\",\n                fontSize: \"14px\",\n                textTransform: \"capitalize\"\n              },\n              children: [selectedItem.type, \" \\u2022 \", selectedItem.rarity]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 4502,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 4488,\n            columnNumber: 15\n          }, this), selectedItem.stats && Object.keys(selectedItem.stats).length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              marginBottom: \"15px\"\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n              style: {\n                color: \"white\",\n                margin: \"0 0 10px 0\",\n                fontSize: \"14px\"\n              },\n              children: \"\\uB2A5\\uB825\\uCE58\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 4518,\n              columnNumber: 21\n            }, this), Object.entries(selectedItem.stats).map(([stat, value]) => /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                display: \"flex\",\n                justifyContent: \"space-between\",\n                color: \"#10b981\",\n                fontSize: \"12px\",\n                marginBottom: \"5px\"\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                children: stat === \"attack\" ? \"공격력\" : stat === \"defense\" ? \"방어력\" : stat === \"hp\" ? \"체력\" : stat === \"mp\" ? \"마나\" : stat\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 4538,\n                columnNumber: 25\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                children: [\"+\", value]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 4549,\n                columnNumber: 25\n              }, this)]\n            }, stat, true, {\n              fileName: _jsxFileName,\n              lineNumber: 4528,\n              columnNumber: 23\n            }, this))]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 4517,\n            columnNumber: 19\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              marginBottom: \"15px\"\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n              style: {\n                color: \"white\",\n                margin: \"0 0 10px 0\",\n                fontSize: \"14px\"\n              },\n              children: \"\\uAC00\\uACA9\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 4557,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              style: {\n                color: \"#f59e0b\",\n                fontSize: \"12px\",\n                margin: 0\n              },\n              children: [selectedItem.price.toLocaleString(), \"G\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 4566,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 4556,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              display: \"flex\",\n              flexDirection: \"column\",\n              gap: \"10px\"\n            },\n            children: [selectedItem.type !== \"consumable\" && /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => {\n                equipItem(selectedItem);\n                setSelectedItem(null);\n              },\n              style: {\n                background: \"linear-gradient(135deg, #10b981 0%, #059669 100%)\",\n                color: \"white\",\n                border: \"none\",\n                borderRadius: \"6px\",\n                padding: \"10px\",\n                fontSize: \"14px\",\n                cursor: \"pointer\",\n                fontWeight: \"bold\"\n              },\n              children: \"\\uC7A5\\uCC29\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 4580,\n              columnNumber: 19\n            }, this), selectedItem.type === \"consumable\" && /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => {\n                // 사용 로직 (임시)\n                console.log(\"Use item:\", selectedItem.name);\n                setSelectedItem(null);\n              },\n              style: {\n                background: \"linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%)\",\n                color: \"white\",\n                border: \"none\",\n                borderRadius: \"6px\",\n                padding: \"10px\",\n                fontSize: \"14px\",\n                cursor: \"pointer\",\n                fontWeight: \"bold\"\n              },\n              children: \"\\uC0AC\\uC6A9\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 4601,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => {\n                const sellPrice = Math.floor(selectedItem.price * 0.7);\n                setCharacter(prev => ({\n                  ...prev,\n                  gold: prev.gold + sellPrice\n                }));\n                setInventory(prev => prev.filter(invItem => invItem.id !== selectedItem.id));\n                addToCombatLog(`${selectedItem.name}을 ${sellPrice} 골드에 판매했습니다!`);\n                setSelectedItem(null);\n              },\n              style: {\n                background: \"#dc2626\",\n                color: \"white\",\n                border: \"none\",\n                borderRadius: \"6px\",\n                padding: \"10px\",\n                fontSize: \"14px\",\n                cursor: \"pointer\"\n              },\n              children: [\"\\uD310\\uB9E4 (\", Math.floor(selectedItem.price * 0.7), \"G)\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 4622,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 4572,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 4480,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            background: \"rgba(255, 255, 255, 0.05)\",\n            borderRadius: \"10px\",\n            padding: \"40px\",\n            textAlign: \"center\",\n            color: \"#6b7280\"\n          },\n          children: /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"\\uC544\\uC774\\uD15C\\uC744 \\uD074\\uB9AD\\uD558\\uC5EC \\uC815\\uBCF4\\uB97C \\uD655\\uC778\\uD558\\uC138\\uC694\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 4661,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 4652,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 4475,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 4380,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 4376,\n    columnNumber: 5\n  }, this);\n\n  // 상점 카테고리 상태\n  const [shopCategory, setShopCategory] = useState('buy');\n  const [selectedShopItem, setSelectedShopItem] = useState(null);\n  const renderShopTab = () => /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      padding: '20px',\n      background: '#1f2937',\n      minHeight: '600px'\n    },\n    children: [renderCharacterHeader(), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        display: 'flex',\n        background: 'rgba(255, 255, 255, 0.1)',\n        borderRadius: '10px',\n        marginBottom: '20px',\n        overflow: 'hidden'\n      },\n      children: [{\n        id: 'buy',\n        label: '구매',\n        icon: '🛒',\n        color: '#10b981'\n      }, {\n        id: 'sell',\n        label: '판매',\n        icon: '💰',\n        color: '#f59e0b'\n      }, {\n        id: 'craft',\n        label: '제작구매',\n        icon: '⚒️',\n        color: '#8b5cf6'\n      }].map(tab => /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => setShopCategory(tab.id),\n        style: {\n          flex: 1,\n          padding: '15px 20px',\n          background: shopCategory === tab.id ? `linear-gradient(135deg, ${tab.color} 0%, ${tab.color}AA 100%)` : 'transparent',\n          color: shopCategory === tab.id ? 'white' : '#9ca3af',\n          border: 'none',\n          cursor: 'pointer',\n          fontSize: '14px',\n          fontWeight: shopCategory === tab.id ? 'bold' : 'normal',\n          transition: 'all 0.3s ease',\n          display: 'flex',\n          alignItems: 'center',\n          justifyContent: 'center',\n          gap: '8px'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          children: tab.icon\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 4712,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          children: tab.label\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 4713,\n          columnNumber: 13\n        }, this)]\n      }, tab.id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 4691,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 4679,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        display: 'flex',\n        gap: '20px'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          flex: 1\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          style: {\n            color: 'white',\n            marginBottom: '15px',\n            fontSize: '16px'\n          },\n          children: shopCategory === 'buy' ? '🛒 구매 가능 아이템' : shopCategory === 'sell' ? '💰 판매 가능 아이템' : '⚒️ 제작 가능 아이템'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 4721,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: 'grid',\n            gridTemplateColumns: 'repeat(8, 1fr)',\n            gap: '6px',\n            background: 'rgba(0, 0, 0, 0.3)',\n            padding: '15px',\n            borderRadius: '10px',\n            border: '2px solid #4b5563',\n            minHeight: '400px'\n          },\n          children: Array.from({\n            length: 32\n          }, (_, index) => {\n            let items = [];\n            if (shopCategory === 'buy') {\n              items = shop;\n            } else if (shopCategory === 'sell') {\n              items = inventory.filter(item => item.type !== 'consumable');\n            } else {\n              // 제작 아이템 (임시로 상점 아이템 사용)\n              items = shop.filter(item => item.rarity === 'epic' || item.rarity === 'legendary');\n            }\n            const item = items[index];\n            const isEmpty = !item;\n            const canAfford = shopCategory === 'buy' ? character.gold >= ((item === null || item === void 0 ? void 0 : item.price) || 0) : true;\n            return /*#__PURE__*/_jsxDEV(\"div\", {\n              onClick: () => item && setSelectedShopItem(item),\n              style: {\n                width: '50px',\n                height: '50px',\n                background: isEmpty ? 'rgba(255, 255, 255, 0.05)' : canAfford ? 'rgba(16, 185, 129, 0.1)' : 'rgba(107, 114, 128, 0.1)',\n                border: isEmpty ? '1px solid #374151' : `2px solid ${getRarityColor(item.rarity)}`,\n                borderRadius: '8px',\n                display: 'flex',\n                flexDirection: 'column',\n                alignItems: 'center',\n                justifyContent: 'center',\n                cursor: item ? 'pointer' : 'default',\n                position: 'relative',\n                transition: 'all 0.2s ease'\n              },\n              onMouseEnter: e => {\n                if (item) {\n                  e.currentTarget.style.transform = 'scale(1.1)';\n                  e.currentTarget.style.boxShadow = `0 0 15px ${getRarityColor(item.rarity)}50`;\n                }\n              },\n              onMouseLeave: e => {\n                if (item) {\n                  e.currentTarget.style.transform = 'scale(1)';\n                  e.currentTarget.style.boxShadow = 'none';\n                }\n              },\n              children: item && /*#__PURE__*/_jsxDEV(_Fragment, {\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  style: {\n                    fontSize: '20px',\n                    opacity: canAfford ? 1 : 0.5\n                  },\n                  children: getItemIcon(item)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 4788,\n                  columnNumber: 23\n                }, this), shopCategory === 'buy' && /*#__PURE__*/_jsxDEV(\"div\", {\n                  style: {\n                    position: 'absolute',\n                    bottom: '2px',\n                    right: '2px',\n                    background: canAfford ? '#10b981' : '#dc2626',\n                    color: 'white',\n                    fontSize: '8px',\n                    padding: '1px 3px',\n                    borderRadius: '3px',\n                    lineHeight: '1'\n                  },\n                  children: item.price >= 1000 ? `${Math.floor(item.price / 1000)}K` : item.price\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 4796,\n                  columnNumber: 25\n                }, this), shopCategory === 'sell' && /*#__PURE__*/_jsxDEV(\"div\", {\n                  style: {\n                    position: 'absolute',\n                    bottom: '2px',\n                    right: '2px',\n                    background: '#f59e0b',\n                    color: 'white',\n                    fontSize: '8px',\n                    padding: '1px 3px',\n                    borderRadius: '3px',\n                    lineHeight: '1'\n                  },\n                  children: Math.floor(item.price * 0.7)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 4811,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true)\n            }, index, false, {\n              fileName: _jsxFileName,\n              lineNumber: 4754,\n              columnNumber: 17\n            }, this);\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 4726,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 4720,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          width: '300px'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          style: {\n            color: 'white',\n            marginBottom: '15px',\n            fontSize: '16px'\n          },\n          children: \"\\uD83D\\uDCCB \\uC0C1\\uD488 \\uC815\\uBCF4\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 4835,\n          columnNumber: 11\n        }, this), selectedShopItem ? /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            background: 'rgba(255, 255, 255, 0.1)',\n            border: `2px solid ${getRarityColor(selectedShopItem.rarity)}`,\n            borderRadius: '10px',\n            padding: '20px'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              textAlign: 'center',\n              marginBottom: '15px'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                fontSize: '48px',\n                marginBottom: '10px'\n              },\n              children: getItemIcon(selectedShopItem)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 4844,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n              style: {\n                color: getRarityColor(selectedShopItem.rarity),\n                margin: '0 0 5px 0',\n                fontSize: '18px',\n                fontWeight: 'bold'\n              },\n              children: selectedShopItem.name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 4847,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              style: {\n                color: '#9ca3af',\n                margin: '0 0 15px 0',\n                fontSize: '14px',\n                textTransform: 'capitalize'\n              },\n              children: [selectedShopItem.type, \" \\u2022 Lv.\", selectedShopItem.level, \" \\u2022 \", selectedShopItem.rarity]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 4855,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 4843,\n            columnNumber: 15\n          }, this), selectedShopItem.stats && Object.keys(selectedShopItem.stats).length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              marginBottom: '15px'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n              style: {\n                color: 'white',\n                margin: '0 0 10px 0',\n                fontSize: '14px'\n              },\n              children: \"\\uB2A5\\uB825\\uCE58\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 4868,\n              columnNumber: 19\n            }, this), Object.entries(selectedShopItem.stats).map(([stat, value]) => value > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                display: 'flex',\n                justifyContent: 'space-between',\n                color: '#10b981',\n                fontSize: '12px',\n                marginBottom: '5px'\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                children: stat === 'attack' ? '⚔️ 공격력' : stat === 'defense' ? '🛡️ 방어력' : stat === 'hp' ? '❤️ 체력' : stat === 'mp' ? '💙 마나' : stat === 'speed' ? '💨 속도' : stat === 'critRate' ? '💥 크리티컬' : stat\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 4878,\n                columnNumber: 25\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                children: [\"+\", value]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 4886,\n                columnNumber: 25\n              }, this)]\n            }, stat, true, {\n              fileName: _jsxFileName,\n              lineNumber: 4871,\n              columnNumber: 23\n            }, this))]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 4867,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              marginBottom: '15px'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n              style: {\n                color: 'white',\n                margin: '0 0 10px 0',\n                fontSize: '14px'\n              },\n              children: shopCategory === 'buy' ? '구매 가격' : shopCategory === 'sell' ? '판매 가격' : '제작 비용'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 4895,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              style: {\n                color: '#f59e0b',\n                fontSize: '14px',\n                margin: 0,\n                fontWeight: 'bold'\n              },\n              children: [shopCategory === 'buy' ? selectedShopItem.price.toLocaleString() : shopCategory === 'sell' ? Math.floor(selectedShopItem.price * 0.7).toLocaleString() : (selectedShopItem.price * 1.5).toLocaleString(), \"\\uACE8\\uB4DC\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 4899,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 4894,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              display: 'flex',\n              flexDirection: 'column',\n              gap: '10px'\n            },\n            children: [shopCategory === 'buy' && /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => {\n                buyItem(selectedShopItem);\n                setSelectedShopItem(null);\n              },\n              disabled: character.gold < selectedShopItem.price,\n              style: {\n                background: character.gold >= selectedShopItem.price ? 'linear-gradient(135deg, #10b981 0%, #059669 100%)' : '#6b7280',\n                color: 'white',\n                border: 'none',\n                borderRadius: '6px',\n                padding: '12px',\n                fontSize: '14px',\n                cursor: character.gold >= selectedShopItem.price ? 'pointer' : 'not-allowed',\n                fontWeight: 'bold'\n              },\n              children: [\"\\uAD6C\\uB9E4\\uD558\\uAE30 (\", selectedShopItem.price.toLocaleString(), \"G)\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 4909,\n              columnNumber: 19\n            }, this), shopCategory === 'sell' && /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => {\n                const sellPrice = Math.floor(selectedShopItem.price * 0.7);\n                setCharacter(prev => ({\n                  ...prev,\n                  gold: prev.gold + sellPrice\n                }));\n                setInventory(prev => prev.filter(invItem => invItem.id !== selectedShopItem.id));\n                addToCombatLog(`${selectedShopItem.name}을 ${sellPrice} 골드에 판매했습니다!`);\n                setSelectedShopItem(null);\n              },\n              style: {\n                background: 'linear-gradient(135deg, #f59e0b 0%, #d97706 100%)',\n                color: 'white',\n                border: 'none',\n                borderRadius: '6px',\n                padding: '12px',\n                fontSize: '14px',\n                cursor: 'pointer',\n                fontWeight: 'bold'\n              },\n              children: [\"\\uD310\\uB9E4\\uD558\\uAE30 (\", Math.floor(selectedShopItem.price * 0.7).toLocaleString(), \"G)\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 4933,\n              columnNumber: 19\n            }, this), shopCategory === 'craft' && /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => {\n                const craftPrice = Math.floor(selectedShopItem.price * 1.5);\n                if (character.gold >= craftPrice) {\n                  setCharacter(prev => ({\n                    ...prev,\n                    gold: prev.gold - craftPrice\n                  }));\n                  setInventory(prev => [...prev, {\n                    ...selectedShopItem,\n                    id: `${selectedShopItem.id}_${Date.now()}`\n                  }]);\n                  addToCombatLog(`${selectedShopItem.name}을 제작했습니다!`);\n                  setSelectedShopItem(null);\n                }\n              },\n              disabled: character.gold < Math.floor(selectedShopItem.price * 1.5),\n              style: {\n                background: character.gold >= Math.floor(selectedShopItem.price * 1.5) ? 'linear-gradient(135deg, #8b5cf6 0%, #7c3aed 100%)' : '#6b7280',\n                color: 'white',\n                border: 'none',\n                borderRadius: '6px',\n                padding: '12px',\n                fontSize: '14px',\n                cursor: character.gold >= Math.floor(selectedShopItem.price * 1.5) ? 'pointer' : 'not-allowed',\n                fontWeight: 'bold'\n              },\n              children: [\"\\uC81C\\uC791\\uD558\\uAE30 (\", Math.floor(selectedShopItem.price * 1.5).toLocaleString(), \"G)\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 4957,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 4907,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 4837,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            background: 'rgba(255, 255, 255, 0.05)',\n            borderRadius: '10px',\n            padding: '40px',\n            textAlign: 'center',\n            color: '#6b7280'\n          },\n          children: /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"\\uC0C1\\uD488\\uC744 \\uD074\\uB9AD\\uD558\\uC5EC \\uC815\\uBCF4\\uB97C \\uD655\\uC778\\uD558\\uC138\\uC694\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 4994,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 4987,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 4834,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 4718,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        marginTop: '20px',\n        background: 'linear-gradient(135deg, #f59e0b 0%, #d97706 100%)',\n        borderRadius: '10px',\n        padding: '15px',\n        display: 'flex',\n        justifyContent: 'space-between',\n        alignItems: 'center',\n        color: 'white'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: 'flex',\n          alignItems: 'center',\n          gap: '10px'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          style: {\n            fontSize: '24px'\n          },\n          children: \"\\uD83D\\uDCB0\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 5012,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              fontSize: '14px',\n              opacity: 0.9\n            },\n            children: \"\\uBCF4\\uC720 \\uACE8\\uB4DC\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 5014,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              fontSize: '20px',\n              fontWeight: 'bold'\n            },\n            children: [character.gold.toLocaleString(), \"G\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 5015,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 5013,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 5011,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          textAlign: 'right'\n        },\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            fontSize: '12px',\n            opacity: 0.8\n          },\n          children: shopCategory === 'buy' ? '구매할 수 있는 아이템을 선택하세요' : shopCategory === 'sell' ? '판매할 아이템을 선택하세요' : '제작할 아이템을 선택하세요'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 5021,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 5020,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 5001,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 4674,\n    columnNumber: 5\n  }, this);\n  const renderTabs = () => /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      background: \"#374151\",\n      display: \"flex\",\n      borderRadius: \"15px 15px 0 0\",\n      overflow: \"hidden\"\n    },\n    children: [{\n      id: \"lobby\",\n      name: t(\"rpg.tabs.lobby\"),\n      icon: \"🏠\"\n    }, {\n      id: \"character\",\n      name: t(\"rpg.tabs.character\"),\n      icon: \"👤\"\n    }, {\n      id: \"inventory\",\n      name: t(\"rpg.tabs.inventory\"),\n      icon: \"🎒\"\n    }, {\n      id: \"skills\",\n      name: t(\"rpg.tabs.skills\"),\n      icon: \"✨\"\n    }, {\n      id: \"dungeon\",\n      name: t(\"rpg.tabs.dungeon\"),\n      icon: \"🏰\"\n    }, {\n      id: \"shop\",\n      name: t(\"rpg.tabs.shop\"),\n      icon: \"🛒\"\n    }].map(tab => /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: () => setCurrentTab(tab.id),\n      style: {\n        background: currentTab === tab.id ? colors.accent : \"transparent\",\n        color: colors.text,\n        border: \"none\",\n        padding: \"15px 20px\",\n        fontSize: \"14px\",\n        cursor: \"pointer\",\n        flex: 1,\n        transition: \"all 0.3s ease\"\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: tab.icon\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 5062,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          fontSize: \"12px\",\n          marginTop: \"5px\"\n        },\n        children: tab.name\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 5063,\n        columnNumber: 11\n      }, this)]\n    }, tab.id, true, {\n      fileName: _jsxFileName,\n      lineNumber: 5048,\n      columnNumber: 9\n    }, this))\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 5032,\n    columnNumber: 5\n  }, this);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      width: \"100%\",\n      maxWidth: \"1200px\",\n      margin: \"0 auto\",\n      background: colors.cardBg,\n      borderRadius: \"20px\",\n      overflow: \"hidden\",\n      boxShadow: \"0 20px 60px rgba(0, 0, 0, 0.3)\",\n      fontFamily: '-apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto, sans-serif',\n      border: `1px solid ${colors.cardBorder}`\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        background: colors.backgroundSecondary,\n        padding: \"20px\",\n        textAlign: \"center\",\n        position: \"relative\",\n        overflow: \"hidden\"\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          position: \"absolute\",\n          top: 0,\n          left: 0,\n          right: 0,\n          bottom: 0,\n          background: \"radial-gradient(circle at 50% 50%, rgba(147, 51, 234, 0.3) 0%, transparent 70%)\"\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 5094,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n        style: {\n          margin: 0,\n          fontSize: \"32px\",\n          fontWeight: \"bold\",\n          color: colors.text,\n          textShadow: \"0 4px 20px rgba(147, 51, 234, 0.5)\",\n          position: \"relative\",\n          zIndex: 1\n        },\n        children: t(\"rpg.title\")\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 5105,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        style: {\n          margin: \"10px 0 0 0\",\n          color: colors.textSecondary,\n          fontSize: \"16px\",\n          position: \"relative\",\n          zIndex: 1\n        },\n        children: t(\"rpg.subtitle\")\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 5118,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 5085,\n      columnNumber: 7\n    }, this), renderTabs(), currentTab === \"lobby\" && renderLobbyTab(), currentTab === \"dungeon\" && renderDungeonTab(), currentTab === \"character\" && renderCharacterTab(), currentTab === \"inventory\" && renderInventoryTab(), currentTab === \"skills\" && renderSkillsTab(), currentTab === \"shop\" && renderShopTab()]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 5070,\n    columnNumber: 5\n  }, this);\n};\n_s(AdvancedIdleRPG, \"KCb+Alz2CN/68MJU9U5KXEspUPE=\", false, function () {\n  return [useTheme, useLanguage];\n});\n_c = AdvancedIdleRPG;\nvar _c;\n$RefreshReg$(_c, \"AdvancedIdleRPG\");","map":{"version":3,"names":["React","useState","useEffect","useRef","useTheme","useLanguage","jsxDEV","_jsxDEV","Fragment","_Fragment","AdvancedIdleRPG","onAction","isSimulating","currentAction","userStats","setUserStats","currentUser","_s","colors","t","calculateSkillDamage","skill","character","level","isLearned","damage","baseDamage","damageMultiplier","statMultiplier","attack","defense","hp","maxHp","mp","maxMp","Math","floor","style","document","createElement","textContent","head","appendChild","removeChild","getInitialCharacter","id","name","exp","maxExp","speed","gold","class","skills","maxLevel","manaCost","cooldown","currentCooldown","type","category","description","requiredLevel","isUnlocked","equipment","stats","strength","agility","intelligence","vitality","luck","availablePoints","prestige","rebirth","buffs","amount","duration","currentTab","setCurrentTab","gameMode","setGameMode","isAutoFighting","setIsAutoFighting","currentMonster","setCurrentMonster","combatLog","setCombatLog","selectedDungeon","setSelectedDungeon","inventory","setInventory","availableDungeons","setAvailableDungeons","currentDungeon","setCurrentDungeon","inDungeon","setInDungeon","guild","setGuild","shop","setShop","achievements","setAchievements","monstersDefeated","setMonstersDefeated","totalGoldEarned","setTotalGoldEarned","showDungeonChoice","setShowDungeonChoice","logRef","initializeGame","monsters_defeated","character_class","total_gold_earned","inventory_items","map","item","rarity","quantity","current_buffs","Object","entries","filter","_","buff","ceil","translations","ko","slash","heal","critical","dungeons","forest","cave","tower","items","sword1","armor1","helmet1","health_potion","mana_potion","greater_health_potion","strength_potion","defense_potion","monsters","slime","goblin","orc","troll","dragon","combat","appeared","levelUp","defeated","itemObtained","dungeonCleared","nextFloor","dungeonExited","hpMpRecovered","defeat","en","zh","currentLang","localStorage","getItem","texts","getAllSkills","currentLevel","existingSkills","_existingSkills$find","allSkills","find","s","initialSkills","initialDungeons","floors","currentFloor","clearedFloors","Set","rewards","goldRange","expRange","itemDropChance","isComingSoon","getShopItems","_availableDungeons$fi","baseItems","price","enhancement","consumableEffect","healHp","healMp","goblinCaveUnlocked","d","push","buffType","buffAmount","buffDuration","shopItems","setCharacter","prev","window","gameTexts","spawnMonster","updateShop","_availableDungeons$fi2","_availableDungeons$fi3","existingIds","newItems","includes","wizardTowerUnlocked","wizardItems","updateSkills","updatedSkills","executeSkill","addToCombatLog","healAmount","min","newMonsterHp","max","setTimeout","defeatMonster","learnSkill","cost","getSkillIcon","iconMap","shield","haste","blessing","vampire","selectedSkill","setSelectedSkill","skillSubTab","setSkillSubTab","renderSkillsTab","padding","background","minHeight","children","renderCharacterHeader","display","gap","width","color","marginBottom","fontSize","fileName","_jsxFileName","lineNumber","columnNumber","flexDirection","label","count","length","tab","index","onClick","border","borderRadius","cursor","fontWeight","transition","textAlign","justifyContent","alignItems","minWidth","flex","gridTemplateColumns","Array","from","filteredSkills","isEmpty","height","position","onMouseEnter","e","currentTarget","transform","boxShadow","onMouseLeave","opacity","bottom","right","lineHeight","top","animation","margin","marginTop","toLocaleString","disabled","baseHp","baseAttack","baseDefense","minLevel","availableMonsters","monster","finalMonsters","abs","randomMonster","random","levelMultiplier","Date","now","dropItems","generateDropItems","isBoss","dropChance","rarities","itemTypes","itemType","generateItemName","generateItemStats","calculateItemPrice","prefixes","common","rare","epic","legendary","mythic","itemNames","weapon","armor","helmet","boots","ring","amulet","prefix","itemTypeNames","multipliers","base","critRate","critDamage","basePrice","buffedAttack","calculateDamage","isCritical","finalDamage","user_id","is_critical","monster_name","monster_level","character_level","character_attack","monster_hp_remaining","dungeon_name","dungeon_floor","monsterAttack","buffedDefense","newHp","dungeon_id","damage_taken","character_defense","current_floor","total_floors","exit_reason","time_spent","getTime","expGained","goldGained","newExp","newGold","newLevel","newMaxExp","newMp","newMaxHp","newMaxMp","new_level","stat_points_gained","prevDungeons","dungeon","exp_gained","gold_gained","items_dropped","updatedDungeon","spawnDungeonMonster","proceedToNextFloor","exitDungeonAfterVictory","resetDungeon","autoAttackTimer","clearTimeout","interval","setInterval","clearInterval","message","newLog","shift","current","scrollTop","scrollHeight","allocateStatPoint","stat","equipItem","slot","currentEquippedItem","newEquipment","newAttack","newDefense","newSpeed","invItem","unequipItem","equippedItem","undefined","adjustedHp","adjustedMp","sellItem","sellPrice","buyItem","getRarityColor","enterDungeon","character_hp","character_mp","entry_time","forceSpawn","getDungeonMonsters","dungeonId","baseMonsters","floorBasedMonsterIndex","baseIndex","randomVariation","selectedIndex","selectedMonster","consumeItem","effect","itemIndex","findIndex","newInventory","currentItem","splice","item_name","item_type","heal_hp","heal_mp","buff_type","buff_amount","character_hp_before","character_mp_before","castSkill","skill_name","skill_level","mana_cost","character_mp_after","allocateStat","statName","hpBonus","mpBonus","attackBonus","defenseBonus","stat_name","stat_value","available_points","expPercentage","backgroundColor","overflow","renderLobbyTab","renderDungeonTab","value","placeholder","onChange","targetFloor","parseInt","target","canMoveTo","i","has","currentFloorCleared","flexWrap","title","toFixed","_item$consumableEffec","_item$consumableEffec2","_item$consumableEffec3","_item$consumableEffec4","_item$consumableEffec5","overflowY","slice","log","renderCharacterTab","renderEquipmentSlot","key","icon","bonus","bonusType","borderBottom","rarityColor","substring","getItemIcon","selectedItem","setSelectedItem","renderInventoryTab","inv","textTransform","keys","console","shopCategory","setShopCategory","selectedShopItem","setSelectedShopItem","renderShopTab","canAfford","craftPrice","renderTabs","accent","text","maxWidth","cardBg","fontFamily","cardBorder","backgroundSecondary","left","textShadow","zIndex","textSecondary","_c","$RefreshReg$"],"sources":["/Users/jegaljin-u/workspace/thinking-guide/src/components/AdvancedIdleRPG.tsx"],"sourcesContent":["import React, { useState, useEffect, useRef } from \"react\";\nimport { useTheme } from \"../contexts/ThemeContext\";\nimport { useLanguage } from \"../contexts/LanguageContext\";\n\ninterface Dungeon {\n  id: string;\n  name: string;\n  level: number;\n  description: string;\n  floors: number;\n  currentFloor: number;\n  clearedFloors: Set<number>; // Track which floors have been cleared\n  monsters: Monster[];\n  rewards: {\n    goldRange: [number, number];\n    expRange: [number, number];\n    itemDropChance: number;\n  };\n  requiredLevel: number;\n  isUnlocked: boolean;\n  isComingSoon?: boolean; // 업데이트 예정 던전인지\n}\n\ninterface Monster {\n  id: string;\n  name: string;\n  level: number;\n  hp: number;\n  maxHp: number;\n  attack: number;\n  defense: number;\n  speed: number;\n  exp: number;\n  gold: number;\n  dropItems: Item[];\n  isBoss?: boolean;\n}\n\ninterface Character {\n  id: string;\n  name: string;\n  level: number;\n  exp: number;\n  maxExp: number;\n  hp: number;\n  maxHp: number;\n  mp: number;\n  maxMp: number;\n  attack: number;\n  defense: number;\n  speed: number;\n  gold: number;\n  class: string;\n  skills: Skill[];\n  equipment: Equipment;\n  stats: CharacterStats;\n  prestige: number;\n  rebirth: number;\n  buffs: {\n    attack: { amount: number; duration: number };\n    defense: { amount: number; duration: number };\n    speed: { amount: number; duration: number };\n  };\n}\n\ninterface CharacterStats {\n  strength: number;\n  agility: number;\n  intelligence: number;\n  vitality: number;\n  luck: number;\n  availablePoints: number;\n}\n\ninterface Skill {\n  id: string;\n  name: string;\n  level: number;\n  maxLevel: number;\n  baseDamage: number;\n  damageMultiplier: number; // 레벨당 증가율\n  statMultiplier: {\n    attack?: number;\n    defense?: number;\n    hp?: number;\n    mp?: number;\n  }; // 스탯 기반 데미지 배율\n  manaCost: number;\n  cooldown: number;\n  currentCooldown: number;\n  type: \"active\" | \"passive\";\n  category: \"combat\" | \"magic\" | \"support\" | \"passive\"; // 스킬 분류\n  description: string;\n  requiredLevel?: number;\n  isUnlocked?: boolean;\n  isLearned?: boolean; // 배운 스킬인지 (0레벨에서 1레벨로 업그레이드했는지)\n}\n\ninterface Equipment {\n  weapon?: Item;\n  armor?: Item;\n  helmet?: Item;\n  boots?: Item;\n  ring?: Item;\n  amulet?: Item;\n}\n\ninterface Item {\n  id: string;\n  name: string;\n  type:\n    | \"weapon\"\n    | \"armor\"\n    | \"helmet\"\n    | \"boots\"\n    | \"ring\"\n    | \"amulet\"\n    | \"consumable\";\n  rarity: \"common\" | \"rare\" | \"epic\" | \"legendary\" | \"mythic\";\n  level: number;\n  stats: {\n    attack?: number;\n    defense?: number;\n    hp?: number;\n    mp?: number;\n    speed?: number;\n    critRate?: number;\n    critDamage?: number;\n  };\n  price: number;\n  enhancement: number;\n  // 물약용 속성들\n  consumableEffect?: {\n    healHp?: number;\n    healMp?: number;\n    buffDuration?: number; // 버프 지속시간 (밀리초)\n    buffType?: \"attack\" | \"defense\" | \"speed\"; // 버프 타입\n    buffAmount?: number; // 버프 수치\n  };\n  quantity?: number; // 소비 아이템 수량\n}\n\ninterface Guild {\n  id: string;\n  name: string;\n  level: number;\n  members: number;\n  maxMembers: number;\n  benefits: {\n    expBonus: number;\n    goldBonus: number;\n    dropBonus: number;\n  };\n}\n\ninterface AppProps {\n  onAction: (eventType: string, data: any) => void;\n  isSimulating: boolean;\n  currentAction: string | null;\n  userStats: any;\n  setUserStats: (stats: any) => void;\n  currentUser: any;\n}\n\nexport const AdvancedIdleRPG: React.FC<AppProps> = ({\n  onAction,\n  isSimulating,\n  currentAction,\n  userStats,\n  setUserStats,\n  currentUser,\n}) => {\n  const { colors } = useTheme();\n  const { t } = useLanguage();\n\n  // 스킬 데미지 계산 함수\n  const calculateSkillDamage = (skill: Skill, character: Character): number => {\n    if (skill.level === 0 || !skill.isLearned) return 0;\n\n    let damage = skill.baseDamage;\n\n    // 레벨에 따른 데미지 증가\n    damage += skill.baseDamage * skill.damageMultiplier * (skill.level - 1);\n\n    // 스탯에 따른 데미지 증가\n    if (skill.statMultiplier.attack) {\n      damage += character.attack * skill.statMultiplier.attack * skill.level;\n    }\n    if (skill.statMultiplier.defense) {\n      damage += character.defense * skill.statMultiplier.defense * skill.level;\n    }\n    if (skill.statMultiplier.hp) {\n      damage += character.maxHp * skill.statMultiplier.hp * skill.level;\n    }\n    if (skill.statMultiplier.mp) {\n      damage += character.maxMp * skill.statMultiplier.mp * skill.level;\n    }\n\n    return Math.floor(damage);\n  };\n\n  // CSS 애니메이션 추가\n  React.useEffect(() => {\n    const style = document.createElement(\"style\");\n    style.textContent = `\n      @keyframes progress {\n        0% {\n          width: 0%;\n        }\n        100% {\n          width: 100%;\n        }\n      }\n      @keyframes pulse {\n        0%, 100% {\n          opacity: 1;\n        }\n        50% {\n          opacity: 0.7;\n        }\n      }\n    `;\n    document.head.appendChild(style);\n\n    return () => {\n      document.head.removeChild(style);\n    };\n  }, []);\n  // 캐릭터 초기 상태를 함수로 분리하여 재사용성 증대\n  const getInitialCharacter = (): Character => ({\n    id: \"1\",\n    name: \"용사\",\n    level: 1,\n    exp: 0,\n    maxExp: 100,\n    hp: 100,\n    maxHp: 100,\n    mp: 50,\n    maxMp: 50,\n    attack: 20,\n    defense: 10,\n    speed: 15,\n    gold: 100,\n    class: \"전사\",\n    skills: [\n      // 기본 스킬들을 미리 정의하여 초기화 문제 방지\n      {\n        id: 'basic-attack',\n        name: '기본 공격',\n        level: 1,\n        maxLevel: 10,\n        baseDamage: 15,\n        damageMultiplier: 0.2,\n        statMultiplier: { attack: 1.0 },\n        manaCost: 0,\n        cooldown: 1000,\n        currentCooldown: 0,\n        type: 'active',\n        category: 'combat',\n        description: '기본적인 물리 공격입니다.',\n        requiredLevel: 1,\n        isUnlocked: true,\n        isLearned: true\n      },\n      {\n        id: 'power-strike',\n        name: '강력한 베기',\n        level: 0,\n        maxLevel: 10,\n        baseDamage: 25,\n        damageMultiplier: 0.3,\n        statMultiplier: { attack: 1.5 },\n        manaCost: 15,\n        cooldown: 3000,\n        currentCooldown: 0,\n        type: 'active',\n        category: 'combat',\n        description: '강력한 일격을 가합니다.',\n        requiredLevel: 3,\n        isUnlocked: true,\n        isLearned: false\n      },\n      {\n        id: 'heal',\n        name: '치유',\n        level: 0,\n        maxLevel: 10,\n        baseDamage: 30,\n        damageMultiplier: 0.25,\n        statMultiplier: { mp: 0.5 },\n        manaCost: 20,\n        cooldown: 5000,\n        currentCooldown: 0,\n        type: 'active',\n        category: 'support',\n        description: 'HP를 회복합니다.',\n        requiredLevel: 2,\n        isUnlocked: true,\n        isLearned: false\n      },\n      {\n        id: 'strength-boost',\n        name: '힘 증가',\n        level: 0,\n        maxLevel: 5,\n        baseDamage: 0,\n        damageMultiplier: 0,\n        statMultiplier: { attack: 0.1 },\n        manaCost: 0,\n        cooldown: 0,\n        currentCooldown: 0,\n        type: 'passive',\n        category: 'passive',\n        description: '공격력을 영구적으로 증가시킵니다.',\n        requiredLevel: 5,\n        isUnlocked: true,\n        isLearned: false\n      }\n    ],\n    equipment: {},\n    stats: {\n      strength: 10,\n      agility: 8,\n      intelligence: 5,\n      vitality: 12,\n      luck: 7,\n      availablePoints: 0,\n    },\n    prestige: 0,\n    rebirth: 0,\n    buffs: {\n      attack: { amount: 0, duration: 0 },\n      defense: { amount: 0, duration: 0 },\n      speed: { amount: 0, duration: 0 },\n    },\n  });\n\n  const [currentTab, setCurrentTab] = useState<\n    \"lobby\" | \"dungeon\" | \"character\" | \"inventory\" | \"skills\" | \"shop\"\n  >(\"lobby\");\n  const [gameMode, setGameMode] = useState<\"lobby\" | \"dungeon\" | \"combat\">(\n    \"lobby\"\n  );\n  const [isAutoFighting, setIsAutoFighting] = useState(false);\n  const [currentMonster, setCurrentMonster] = useState<Monster | null>(null);\n  const [combatLog, setCombatLog] = useState<string[]>([]);\n  const [selectedDungeon, setSelectedDungeon] = useState<Dungeon | null>(null);\n  const [inventory, setInventory] = useState<Item[]>([]);\n  const [availableDungeons, setAvailableDungeons] = useState<Dungeon[]>([]);\n  const [currentDungeon, setCurrentDungeon] = useState<Dungeon | null>(null);\n  const [inDungeon, setInDungeon] = useState(false);\n  const [guild, setGuild] = useState<Guild | null>(null);\n  const [shop, setShop] = useState<Item[]>([]);\n  const [achievements, setAchievements] = useState<string[]>([]);\n  const [monstersDefeated, setMonstersDefeated] = useState(0);\n  const [totalGoldEarned, setTotalGoldEarned] = useState(0);\n  const [showDungeonChoice, setShowDungeonChoice] = useState(false);\n\n  const logRef = useRef<HTMLDivElement>(null);\n\n  // 게임 초기화\n  useEffect(() => {\n    initializeGame();\n  }, []);\n\n  // 캐릭터 상태가 변경될 때마다 userStats 업데이트\n  useEffect(() => {\n    setUserStats({\n      level: character.level,\n      gold: character.gold,\n      attack: character.attack,\n      defense: character.defense,\n      hp: character.hp,\n      maxHp: character.maxHp,\n      exp: character.exp,\n      maxExp: character.maxExp,\n      monsters_defeated: monstersDefeated,\n      character_class: character.class,\n      total_gold_earned: totalGoldEarned,\n      inventory_items: inventory.map((item) => ({\n        id: item.id,\n        name: item.name,\n        type: item.type,\n        rarity: item.rarity,\n        quantity: item.quantity || 1,\n        stats: item.stats,\n      })),\n      skills: character.skills.map((skill) => ({\n        id: skill.id,\n        name: skill.name,\n        level: skill.level,\n        type: skill.type,\n      })),\n      current_buffs: Object.entries(character.buffs)\n        .filter(([_, buff]) => buff.duration > 0)\n        .map(([type, buff]) => ({\n          type,\n          amount: buff.amount,\n          duration: Math.ceil(buff.duration / 1000),\n        })),\n    });\n  }, [character, inventory, monstersDefeated, totalGoldEarned, setUserStats]);\n\n  const initializeGame = () => {\n    // 언어별 텍스트 정의\n    const translations = {\n      ko: {\n        character: {\n          name: \"용사\",\n          class: \"전사\",\n        },\n        skills: {\n          slash: {\n            name: \"강력한 베기\",\n            description: \"강력한 일격을 가합니다.\",\n          },\n          heal: { name: \"치유\", description: \"HP를 회복합니다.\" },\n          critical: {\n            name: \"치명타 숙련\",\n            description: \"치명타 확률을 증가시킵니다.\",\n          },\n        },\n        dungeons: {\n          forest: {\n            name: \"어둠의 숲\",\n            description: \"초보자를 위한 던전입니다.\",\n          },\n          cave: {\n            name: \"고블린 동굴\",\n            description: \"고블린들이 서식하는 위험한 동굴입니다.\",\n          },\n          tower: {\n            name: \"마법사의 탑\",\n            description: \"강력한 마법 몬스터들이 있는 탑입니다.\",\n          },\n        },\n        items: {\n          sword1: \"강철 검\",\n          armor1: \"가죽 갑옷\",\n          helmet1: \"철제 투구\",\n          health_potion: \"체력 물약\",\n          mana_potion: \"마나 물약\",\n          greater_health_potion: \"고급 체력 물약\",\n          strength_potion: \"힘의 물약\",\n          defense_potion: \"방어의 물약\",\n        },\n        monsters: {\n          slime: \"슬라임\",\n          goblin: \"고블린\",\n          orc: \"오크\",\n          troll: \"트롤\",\n          dragon: \"드래곤\",\n        },\n        combat: {\n          appeared: \"이 나타났다!\",\n          attack: \"의 공격!\",\n          damage: \"데미지!\",\n          critical: \"치명타!\",\n          levelUp: \"🎉 레벨업! Lv.\",\n          defeated: \"를 물리쳤다! EXP +\",\n          gold: \", 골드 +\",\n          itemObtained: \"✨ 을 획득했습니다!\",\n          dungeonCleared: \"🎉  던전을 클리어했습니다!\",\n          nextFloor: \"층으로 자동 진행합니다!\",\n          dungeonExited:\n            \"던전에서 자동으로 나왔습니다. 체력과 마나가 완전히 회복되었습니다!\",\n          hpMpRecovered: \"체력과 마나가 완전히 회복되었습니다!\",\n          defeat: \"전투에서 패배했습니다...\",\n        },\n      },\n      en: {\n        character: {\n          name: \"Hero\",\n          class: \"Warrior\",\n        },\n        skills: {\n          slash: {\n            name: \"Power Slash\",\n            description: \"Delivers a powerful strike.\",\n          },\n          heal: { name: \"Heal\", description: \"Restores HP.\" },\n          critical: {\n            name: \"Critical Mastery\",\n            description: \"Increases critical hit chance.\",\n          },\n        },\n        dungeons: {\n          forest: {\n            name: \"Dark Forest\",\n            description: \"A dungeon for beginners.\",\n          },\n          cave: {\n            name: \"Goblin Cave\",\n            description: \"A dangerous cave inhabited by goblins.\",\n          },\n          tower: {\n            name: \"Mage Tower\",\n            description: \"A tower with powerful magic monsters.\",\n          },\n        },\n        items: {\n          sword1: \"Steel Sword\",\n          armor1: \"Leather Armor\",\n          helmet1: \"Iron Helmet\",\n          health_potion: \"Health Potion\",\n          mana_potion: \"Mana Potion\",\n          greater_health_potion: \"Greater Health Potion\",\n          strength_potion: \"Strength Potion\",\n          defense_potion: \"Defense Potion\",\n        },\n        monsters: {\n          slime: \"Slime\",\n          goblin: \"Goblin\",\n          orc: \"Orc\",\n          troll: \"Troll\",\n          dragon: \"Dragon\",\n        },\n        combat: {\n          appeared: \" appeared!\",\n          attack: \"'s attack!\",\n          damage: \" damage!\",\n          critical: \" (Critical!)\",\n          levelUp: \"🎉 Level up! Lv.\",\n          defeated: \" defeated! EXP +\",\n          gold: \", Gold +\",\n          itemObtained: \"✨ obtained!\",\n          dungeonCleared: \"🎉  dungeon cleared!\",\n          nextFloor: \"Proceeding to floor  automatically!\",\n          dungeonExited:\n            \"Automatically exited dungeon. HP and MP fully restored!\",\n          hpMpRecovered: \"HP and MP fully restored!\",\n          defeat: \"Defeated in battle...\",\n        },\n      },\n      zh: {\n        character: {\n          name: \"勇者\",\n          class: \"战士\",\n        },\n        skills: {\n          slash: { name: \"强力斩击\", description: \"发动强力一击。\" },\n          heal: { name: \"治疗\", description: \"恢复生命值。\" },\n          critical: { name: \"暴击精通\", description: \"增加暴击几率。\" },\n        },\n        dungeons: {\n          forest: { name: \"黑暗森林\", description: \"适合新手的地下城。\" },\n          cave: { name: \"哥布林洞穴\", description: \"哥布林栖息的危险洞穴。\" },\n          tower: { name: \"法师塔\", description: \"有强力魔法怪物的塔。\" },\n        },\n        items: {\n          sword1: \"钢铁剑\",\n          armor1: \"皮甲\",\n          helmet1: \"铁盔\",\n          health_potion: \"生命药水\",\n          mana_potion: \"魔法药水\",\n          greater_health_potion: \"高级生命药水\",\n          strength_potion: \"力量药水\",\n          defense_potion: \"防御药水\",\n        },\n        monsters: {\n          slime: \"史莱姆\",\n          goblin: \"哥布林\",\n          orc: \"兽人\",\n          troll: \"巨魔\",\n          dragon: \"龙\",\n        },\n        combat: {\n          appeared: \"出现了！\",\n          attack: \"的攻击！\",\n          damage: \"伤害！\",\n          critical: \"暴击！\",\n          levelUp: \"🎉 升级！Lv.\",\n          defeated: \"被击败！经验 +\",\n          gold: \"，金币 +\",\n          itemObtained: \"✨ 获得了！\",\n          dungeonCleared: \"🎉 地下城通关！\",\n          nextFloor: \"自动前往第 层！\",\n          dungeonExited: \"自动离开地下城。生命值和魔法值完全恢复！\",\n          hpMpRecovered: \"生命值和魔法值完全恢复！\",\n          defeat: \"战斗失败...\",\n        },\n      },\n    };\n\n    // 현재 언어 가져오기 (기본값: 한국어)\n    const currentLang = localStorage.getItem(\"language\") || \"ko\";\n    const texts =\n      translations[currentLang as keyof typeof translations] || translations.ko;\n    // 모든 스킬 정의 함수 (공통 사용)\n    const getAllSkills = (\n      currentLevel: number,\n      existingSkills?: Skill[]\n    ): Skill[] => {\n      const allSkills = [\n        // 전투 스킬 (레벨 1)\n        {\n          id: \"slash\",\n          name: \"강력한 베기\",\n          level: existingSkills?.find((s) => s.id === \"slash\")?.level || 0,\n          maxLevel: 10,\n          baseDamage: 20,\n          damageMultiplier: 0.5,\n          statMultiplier: { attack: 2.0 },\n          manaCost: 10,\n          cooldown: 3000,\n          currentCooldown: 0,\n          type: \"active\" as const,\n          category: \"combat\" as const,\n          description: \"강력한 일격을 가합니다. (기본 데미지 + 공격력 x 2.0)\",\n          requiredLevel: 1,\n          isUnlocked: currentLevel >= 1,\n          isLearned: false,\n        },\n        {\n          id: \"heal\",\n          name: \"치유\",\n          level: 0,\n          maxLevel: 10,\n          baseDamage: 30,\n          damageMultiplier: 0.3,\n          statMultiplier: { mp: 1.5 },\n          manaCost: 15,\n          cooldown: 5000,\n          currentCooldown: 0,\n          type: \"active\" as const,\n          category: \"support\" as const,\n          description: \"HP를 회복합니다. (기본 회복량 + 마나 x 1.5)\",\n          requiredLevel: 1,\n          isUnlocked: currentLevel >= 1,\n          isLearned: false,\n        },\n        {\n          id: \"critical\",\n          name: \"치명타 숙련\",\n          level: 0,\n          maxLevel: 10,\n          baseDamage: 0,\n          damageMultiplier: 0,\n          statMultiplier: {},\n          manaCost: 0,\n          cooldown: 0,\n          currentCooldown: 0,\n          type: \"passive\" as const,\n          category: \"passive\" as const,\n          description: \"치명타 확률을 증가시킵니다. (레벨당 +2%)\",\n          requiredLevel: 1,\n          isUnlocked: currentLevel >= 1,\n          isLearned: false,\n        },\n        // 레벨 5 스킬\n        {\n          id: \"double_strike\",\n          name: \"이중 공격\",\n          level: 0,\n          maxLevel: 10,\n          baseDamage: 25,\n          damageMultiplier: 0.4,\n          statMultiplier: { attack: 1.5 },\n          manaCost: 20,\n          cooldown: 4000,\n          currentCooldown: 0,\n          type: \"active\" as const,\n          category: \"combat\" as const,\n          description:\n            \"연속으로 두 번 공격합니다. (기본 데미지 x 2 + 공격력 x 1.5)\",\n          requiredLevel: 5,\n          isUnlocked: currentLevel >= 5,\n          isLearned: false,\n        },\n        {\n          id: \"mana_shield\",\n          name: \"마나 방패\",\n          level: 0,\n          maxLevel: 10,\n          baseDamage: 20,\n          damageMultiplier: 0.2,\n          statMultiplier: { mp: 1.0, defense: 0.5 },\n          manaCost: 25,\n          cooldown: 8000,\n          currentCooldown: 0,\n          type: \"active\" as const,\n          category: \"magic\" as const,\n          description: \"마나로 피해를 흡수합니다. (방어력 + 마나 x 1.0)\",\n          requiredLevel: 5,\n          isUnlocked: currentLevel >= 5,\n          isLearned: false,\n        },\n        {\n          id: \"defense_mastery\",\n          name: \"방어 숙련\",\n          level: 0,\n          maxLevel: 10,\n          baseDamage: 0,\n          damageMultiplier: 0,\n          statMultiplier: {},\n          manaCost: 0,\n          cooldown: 0,\n          currentCooldown: 0,\n          type: \"passive\" as const,\n          category: \"passive\" as const,\n          description: \"방어력을 영구히 증가시킵니다. (레벨당 +3 방어력)\",\n          requiredLevel: 5,\n          isUnlocked: currentLevel >= 5,\n          isLearned: false,\n        },\n        // 레벨 10 스킬\n        {\n          id: \"whirlwind\",\n          name: \"회오리 공격\",\n          level: 0,\n          maxLevel: 10,\n          baseDamage: 40,\n          damageMultiplier: 0.6,\n          statMultiplier: { attack: 1.8 },\n          manaCost: 35,\n          cooldown: 6000,\n          currentCooldown: 0,\n          type: \"active\" as const,\n          category: \"combat\" as const,\n          description:\n            \"주변의 모든 적을 공격합니다. (기본 데미지 + 공격력 x 1.8)\",\n          requiredLevel: 10,\n          isUnlocked: currentLevel >= 10,\n          isLearned: false,\n        },\n        {\n          id: \"regeneration\",\n          name: \"재생\",\n          level: 0,\n          maxLevel: 10,\n          baseDamage: 50,\n          damageMultiplier: 0.4,\n          statMultiplier: { hp: 0.1, mp: 2.0 },\n          manaCost: 40,\n          cooldown: 12000,\n          currentCooldown: 0,\n          type: \"active\" as const,\n          category: \"support\" as const,\n          description:\n            \"지속적으로 HP를 회복합니다. (기본 회복량 + 최대체력 x 0.1 + 마나 x 2.0)\",\n          requiredLevel: 10,\n          isUnlocked: currentLevel >= 10,\n          isLearned: false,\n        },\n        {\n          id: \"mp_efficiency\",\n          name: \"마나 효율\",\n          level: 0,\n          maxLevel: 10,\n          baseDamage: 0,\n          damageMultiplier: 0,\n          statMultiplier: {},\n          manaCost: 0,\n          cooldown: 0,\n          currentCooldown: 0,\n          type: \"passive\" as const,\n          category: \"passive\" as const,\n          description: \"모든 스킬의 마나 소모량을 감소시킵니다. (레벨당 -5%)\",\n          requiredLevel: 10,\n          isUnlocked: currentLevel >= 10,\n          isLearned: false,\n        },\n        // 레벨 15 스킬\n        {\n          id: \"meteor\",\n          name: \"메테오\",\n          level: 0,\n          maxLevel: 10,\n          baseDamage: 80,\n          damageMultiplier: 1.0,\n          statMultiplier: { mp: 3.0, attack: 1.0 },\n          manaCost: 60,\n          cooldown: 10000,\n          currentCooldown: 0,\n          type: \"active\" as const,\n          category: \"magic\" as const,\n          description:\n            \"강력한 마법 공격을 가합니다. (기본 데미지 + 마나 x 3.0 + 공격력 x 1.0)\",\n          requiredLevel: 15,\n          isUnlocked: currentLevel >= 15,\n          isLearned: false,\n        },\n        {\n          id: \"time_stop\",\n          name: \"시간 정지\",\n          level: 0,\n          maxLevel: 10,\n          baseDamage: 0,\n          damageMultiplier: 0,\n          statMultiplier: { mp: 1.0 },\n          manaCost: 80,\n          cooldown: 15000,\n          currentCooldown: 0,\n          type: \"active\" as const,\n          category: \"magic\" as const,\n          description:\n            \"모든 적의 움직임을 잠시 멈춥니다. (지속시간: 마나 x 0.1초)\",\n          requiredLevel: 15,\n          isUnlocked: currentLevel >= 15,\n          isLearned: false,\n        },\n        {\n          id: \"exp_boost\",\n          name: \"경험치 증폭\",\n          level: 0,\n          maxLevel: 10,\n          baseDamage: 0,\n          damageMultiplier: 0,\n          statMultiplier: {},\n          manaCost: 0,\n          cooldown: 0,\n          currentCooldown: 0,\n          type: \"passive\" as const,\n          category: \"passive\" as const,\n          description: \"획득하는 경험치를 증가시킵니다. (레벨당 +10%)\",\n          requiredLevel: 15,\n          isUnlocked: currentLevel >= 15,\n          isLearned: false,\n        },\n      ];\n\n      // 해금된 스킬만 반환\n      return allSkills.filter((skill) => skill.isUnlocked);\n    };\n\n    const initialSkills = getAllSkills(1);\n\n    // 던전 초기화\n    const initialDungeons: Dungeon[] = [\n      {\n        id: \"forest\",\n        name: \"어둠의 숲\",\n        level: 1,\n        description: \"초보자를 위한 던전입니다.\",\n        floors: 10,\n        currentFloor: 1,\n        clearedFloors: new Set<number>(),\n        monsters: [],\n        rewards: {\n          goldRange: [10, 25],\n          expRange: [15, 30],\n          itemDropChance: 0.1,\n        },\n        requiredLevel: 1,\n        isUnlocked: true,\n      },\n      {\n        id: \"cave\",\n        name: \"고블린 동굴\",\n        level: 5,\n        description: \"고블린들이 서식하는 위험한 동굴입니다.\",\n        floors: 15,\n        currentFloor: 1,\n        clearedFloors: new Set<number>(),\n        monsters: [],\n        rewards: {\n          goldRange: [25, 50],\n          expRange: [40, 75],\n          itemDropChance: 0.15,\n        },\n        requiredLevel: 5,\n        isUnlocked: false,\n      },\n      {\n        id: \"tower\",\n        name: \"마법사의 탑\",\n        level: 10,\n        description: \"강력한 마법 몬스터들이 있는 탑입니다.\",\n        floors: 20,\n        currentFloor: 1,\n        clearedFloors: new Set<number>(),\n        monsters: [],\n        rewards: {\n          goldRange: [50, 100],\n          expRange: [80, 150],\n          itemDropChance: 0.2,\n        },\n        requiredLevel: 10,\n        isUnlocked: false,\n      },\n      {\n        id: \"abyss\",\n        name: \"심연의 던전\",\n        level: 20,\n        description: \"업데이트 예정 - 최강의 도전자들을 위한 던전입니다.\",\n        floors: 50,\n        currentFloor: 1,\n        clearedFloors: new Set<number>(),\n        monsters: [],\n        rewards: {\n          goldRange: [100, 200],\n          expRange: [200, 300],\n          itemDropChance: 0.3,\n        },\n        requiredLevel: 20,\n        isUnlocked: false,\n        isComingSoon: true, // 업데이트 예정 플래그\n      },\n    ];\n\n    // 상점 아이템 초기화 (기본 아이템들)\n    const getShopItems = () => {\n      const baseItems: Item[] = [\n        {\n          id: \"sword1\",\n          name: \"강철 검\",\n          type: \"weapon\",\n          rarity: \"common\",\n          level: 1,\n          stats: { attack: 15 },\n          price: 200,\n          enhancement: 0,\n        },\n        {\n          id: \"armor1\",\n          name: \"가죽 갑옷\",\n          type: \"armor\",\n          rarity: \"common\",\n          level: 1,\n          stats: { defense: 10, hp: 20 },\n          price: 150,\n          enhancement: 0,\n        },\n        {\n          id: \"helmet1\",\n          name: \"철제 투구\",\n          type: \"helmet\",\n          rarity: \"common\",\n          level: 1,\n          stats: { defense: 5, hp: 15 },\n          price: 100,\n          enhancement: 0,\n        },\n        // 기본 물약들\n        {\n          id: \"health_potion\",\n          name: \"체력 물약\",\n          type: \"consumable\",\n          rarity: \"common\",\n          level: 1,\n          stats: {},\n          price: 50,\n          enhancement: 0,\n          consumableEffect: {\n            healHp: 50,\n          },\n          quantity: 1,\n        },\n        {\n          id: \"mana_potion\",\n          name: \"마나 물약\",\n          type: \"consumable\",\n          rarity: \"common\",\n          level: 1,\n          stats: {},\n          price: 40,\n          enhancement: 0,\n          consumableEffect: {\n            healMp: 30,\n          },\n          quantity: 1,\n        },\n      ];\n\n      // 고블린 동굴이 해금되면 고급 아이템 추가\n      const goblinCaveUnlocked = availableDungeons.find(\n        (d) => d.id === \"goblin_cave\"\n      )?.isUnlocked;\n      if (goblinCaveUnlocked) {\n        baseItems.push(\n          // 고급 장비\n          {\n            id: \"steel_sword\",\n            name: \"강화 강철 검\",\n            type: \"weapon\",\n            rarity: \"rare\",\n            level: 3,\n            stats: { attack: 25 },\n            price: 500,\n            enhancement: 0,\n          },\n          {\n            id: \"plate_armor\",\n            name: \"판금 갑옷\",\n            type: \"armor\",\n            rarity: \"rare\",\n            level: 3,\n            stats: { defense: 20, hp: 40 },\n            price: 400,\n            enhancement: 0,\n          },\n          {\n            id: \"steel_helmet\",\n            name: \"강철 투구\",\n            type: \"helmet\",\n            rarity: \"rare\",\n            level: 3,\n            stats: { defense: 12, hp: 25 },\n            price: 300,\n            enhancement: 0,\n          },\n          // 고급 물약들\n          {\n            id: \"greater_health_potion\",\n            name: \"고급 체력 물약\",\n            type: \"consumable\",\n            rarity: \"rare\",\n            level: 2,\n            stats: {},\n            price: 120,\n            enhancement: 0,\n            consumableEffect: {\n              healHp: 120,\n            },\n            quantity: 1,\n          },\n          {\n            id: \"greater_mana_potion\",\n            name: \"고급 마나 물약\",\n            type: \"consumable\",\n            rarity: \"rare\",\n            level: 2,\n            stats: {},\n            price: 100,\n            enhancement: 0,\n            consumableEffect: {\n              healMp: 80,\n            },\n            quantity: 1,\n          },\n          {\n            id: \"strength_potion\",\n            name: \"힘의 물약\",\n            type: \"consumable\",\n            rarity: \"rare\",\n            level: 2,\n            stats: {},\n            price: 150,\n            enhancement: 0,\n            consumableEffect: {\n              buffType: \"attack\",\n              buffAmount: 10,\n              buffDuration: 30000,\n            },\n            quantity: 1,\n          },\n          {\n            id: \"defense_potion\",\n            name: \"방어의 물약\",\n            type: \"consumable\",\n            rarity: \"rare\",\n            level: 2,\n            stats: {},\n            price: 150,\n            enhancement: 0,\n            consumableEffect: {\n              buffType: \"defense\",\n              buffAmount: 8,\n              buffDuration: 30000,\n            },\n            quantity: 1,\n          }\n        );\n      }\n\n      return baseItems;\n    };\n\n    const shopItems = getShopItems();\n\n    setCharacter((prev) => ({\n      ...prev,\n      name: texts.character.name,\n      class: texts.character.class,\n      skills: initialSkills,\n    }));\n    setAvailableDungeons(initialDungeons);\n    setShop(shopItems);\n    // Store texts globally for other functions to use\n    (window as any).gameTexts = texts;\n\n    // 던전에 있지 않을 때만 일반 몬스터 생성\n    if (!inDungeon) {\n      spawnMonster();\n    }\n  };\n\n  // 던전 해금 상태에 따른 상점 업데이트\n  useEffect(() => {\n    const updateShop = () => {\n      const getShopItems = () => {\n        const baseItems: Item[] = [\n          {\n            id: \"sword1\",\n            name: \"강철 검\",\n            type: \"weapon\",\n            rarity: \"common\",\n            level: 1,\n            stats: { attack: 15 },\n            price: 200,\n            enhancement: 0,\n          },\n          {\n            id: \"armor1\",\n            name: \"가죽 갑옷\",\n            type: \"armor\",\n            rarity: \"common\",\n            level: 1,\n            stats: { defense: 10, hp: 20 },\n            price: 150,\n            enhancement: 0,\n          },\n          {\n            id: \"helmet1\",\n            name: \"철제 투구\",\n            type: \"helmet\",\n            rarity: \"common\",\n            level: 1,\n            stats: { defense: 5, hp: 15 },\n            price: 100,\n            enhancement: 0,\n          },\n          // 기본 물약들\n          {\n            id: \"health_potion\",\n            name: \"체력 물약\",\n            type: \"consumable\",\n            rarity: \"common\",\n            level: 1,\n            stats: {},\n            price: 50,\n            enhancement: 0,\n            consumableEffect: {\n              healHp: 50,\n            },\n            quantity: 1,\n          },\n          {\n            id: \"mana_potion\",\n            name: \"마나 물약\",\n            type: \"consumable\",\n            rarity: \"common\",\n            level: 1,\n            stats: {},\n            price: 40,\n            enhancement: 0,\n            consumableEffect: {\n              healMp: 30,\n            },\n            quantity: 1,\n          },\n        ];\n\n        // 고블린 동굴이 해금되면 고급 아이템 추가\n        const goblinCaveUnlocked = availableDungeons.find(\n          (d) => d.id === \"goblin_cave\"\n        )?.isUnlocked;\n        if (goblinCaveUnlocked) {\n          // 중복 방지: 이미 있는 아이템은 추가하지 않음\n          const existingIds = baseItems.map((item) => item.id);\n          const newItems = [\n            {\n              id: \"steel_sword\",\n              name: \"강화 강철 검\",\n              type: \"weapon\" as const,\n              rarity: \"rare\" as const,\n              level: 3,\n              stats: { attack: 25 },\n              price: 500,\n              enhancement: 0,\n            },\n            {\n              id: \"plate_armor\",\n              name: \"판금 갑옷\",\n              type: \"armor\" as const,\n              rarity: \"rare\" as const,\n              level: 3,\n              stats: { defense: 20, hp: 40 },\n              price: 400,\n              enhancement: 0,\n            },\n            {\n              id: \"steel_helmet\",\n              name: \"강철 투구\",\n              type: \"helmet\" as const,\n              rarity: \"rare\" as const,\n              level: 3,\n              stats: { defense: 12, hp: 25 },\n              price: 300,\n              enhancement: 0,\n            },\n            {\n              id: \"greater_health_potion\",\n              name: \"고급 체력 물약\",\n              type: \"consumable\" as const,\n              rarity: \"rare\" as const,\n              level: 2,\n              stats: {},\n              price: 120,\n              enhancement: 0,\n              consumableEffect: {\n                healHp: 120,\n              },\n              quantity: 1,\n            },\n            {\n              id: \"greater_mana_potion\",\n              name: \"고급 마나 물약\",\n              type: \"consumable\" as const,\n              rarity: \"rare\" as const,\n              level: 2,\n              stats: {},\n              price: 100,\n              enhancement: 0,\n              consumableEffect: {\n                healMp: 80,\n              },\n              quantity: 1,\n            },\n            {\n              id: \"strength_potion\",\n              name: \"힘의 물약\",\n              type: \"consumable\" as const,\n              rarity: \"rare\" as const,\n              level: 2,\n              stats: {},\n              price: 150,\n              enhancement: 0,\n              consumableEffect: {\n                buffType: \"attack\" as const,\n                buffAmount: 10,\n                buffDuration: 30000,\n              },\n              quantity: 1,\n            },\n            {\n              id: \"defense_potion\",\n              name: \"방어의 물약\",\n              type: \"consumable\" as const,\n              rarity: \"rare\" as const,\n              level: 2,\n              stats: {},\n              price: 150,\n              enhancement: 0,\n              consumableEffect: {\n                buffType: \"defense\" as const,\n                buffAmount: 8,\n                buffDuration: 30000,\n              },\n              quantity: 1,\n            },\n          ].filter((item) => !existingIds.includes(item.id));\n\n          baseItems.push(...newItems);\n        }\n\n        // 마법사의 탑이 해금되면 최고급 아이템 추가\n        const wizardTowerUnlocked = availableDungeons.find(\n          (d) => d.id === \"wizard_tower\"\n        )?.isUnlocked;\n        if (wizardTowerUnlocked) {\n          const existingIds = baseItems.map((item) => item.id);\n          const wizardItems = [\n            {\n              id: \"enchanted_sword\",\n              name: \"마법 부여 검\",\n              type: \"weapon\" as const,\n              rarity: \"epic\" as const,\n              level: 5,\n              stats: { attack: 40, mp: 20 },\n              price: 1200,\n              enhancement: 0,\n            },\n            {\n              id: \"dragon_armor\",\n              name: \"드래곤 갑옷\",\n              type: \"armor\" as const,\n              rarity: \"epic\" as const,\n              level: 5,\n              stats: { defense: 35, hp: 80 },\n              price: 1000,\n              enhancement: 0,\n            },\n            {\n              id: \"mystic_helmet\",\n              name: \"신비의 투구\",\n              type: \"helmet\" as const,\n              rarity: \"epic\" as const,\n              level: 5,\n              stats: { defense: 20, hp: 40, mp: 30 },\n              price: 800,\n              enhancement: 0,\n            },\n            {\n              id: \"supreme_health_potion\",\n              name: \"최고급 체력 물약\",\n              type: \"consumable\" as const,\n              rarity: \"epic\" as const,\n              level: 3,\n              stats: {},\n              price: 300,\n              enhancement: 0,\n              consumableEffect: {\n                healHp: 250,\n              },\n              quantity: 1,\n            },\n            {\n              id: \"supreme_mana_potion\",\n              name: \"최고급 마나 물약\",\n              type: \"consumable\" as const,\n              rarity: \"epic\" as const,\n              level: 3,\n              stats: {},\n              price: 250,\n              enhancement: 0,\n              consumableEffect: {\n                healMp: 200,\n              },\n              quantity: 1,\n            },\n            {\n              id: \"berserker_potion\",\n              name: \"광전사의 물약\",\n              type: \"consumable\" as const,\n              rarity: \"epic\" as const,\n              level: 3,\n              stats: {},\n              price: 400,\n              enhancement: 0,\n              consumableEffect: {\n                buffType: \"attack\" as const,\n                buffAmount: 25,\n                buffDuration: 60000,\n              },\n              quantity: 1,\n            },\n            {\n              id: \"guardian_potion\",\n              name: \"수호자의 물약\",\n              type: \"consumable\" as const,\n              rarity: \"epic\" as const,\n              level: 3,\n              stats: {},\n              price: 400,\n              enhancement: 0,\n              consumableEffect: {\n                buffType: \"defense\" as const,\n                buffAmount: 20,\n                buffDuration: 60000,\n              },\n              quantity: 1,\n            },\n          ].filter((item) => !existingIds.includes(item.id));\n\n          baseItems.push(...wizardItems);\n        }\n\n        return baseItems;\n      };\n\n      setShop(getShopItems());\n    };\n\n    updateShop();\n  }, [availableDungeons]);\n\n  // 레벨업 시 스킬 업데이트\n  useEffect(() => {\n    const updateSkills = () => {\n      setCharacter((prev) => {\n        // 기존 스킬들의 해금 상태만 업데이트\n        const updatedSkills = prev.skills.map((skill) => ({\n          ...skill,\n          isUnlocked: prev.level >= (skill.requiredLevel || 1),\n        }));\n        return { ...prev, skills: updatedSkills };\n      });\n    };\n\n    updateSkills();\n  }, [character.level]);\n\n  // 스킬 사용 함수 (수정된 데미지 계산 포함)\n  const executeSkill = (skill: Skill) => {\n    if (!skill.isLearned || skill.level === 0) {\n      addToCombatLog(\"스킬을 먼저 배워야 합니다!\");\n      return;\n    }\n\n    if (character.mp < skill.manaCost) {\n      addToCombatLog(\"마나가 부족합니다!\");\n      return;\n    }\n\n    if (skill.currentCooldown > 0) {\n      addToCombatLog(\"스킬이 재사용 대기 중입니다!\");\n      return;\n    }\n\n    const damage = calculateSkillDamage(skill, character);\n\n    // 스킬 사용 로직\n    if (skill.id === \"heal\" || skill.id === \"regeneration\") {\n      // 힐링 스킬\n      const healAmount = damage;\n      setCharacter((prev) => ({\n        ...prev,\n        hp: Math.min(prev.maxHp, prev.hp + healAmount),\n        mp: prev.mp - skill.manaCost,\n      }));\n      addToCombatLog(`${skill.name} 사용! ${healAmount} 체력 회복!`);\n    } else if (currentMonster) {\n      // 공격 스킬\n      const newMonsterHp = Math.max(0, currentMonster.hp - damage);\n      setCurrentMonster((prev) =>\n        prev ? { ...prev, hp: newMonsterHp } : null\n      );\n      setCharacter((prev) => ({ ...prev, mp: prev.mp - skill.manaCost }));\n      addToCombatLog(`${skill.name} 사용! ${damage} 데미지!`);\n\n      if (newMonsterHp === 0) {\n        setTimeout(defeatMonster, 500);\n      }\n    }\n\n    // 쿨다운 설정\n    setCharacter((prev) => ({\n      ...prev,\n      skills: prev.skills.map((s) =>\n        s.id === skill.id ? { ...s, currentCooldown: skill.cooldown } : s\n      ),\n    }));\n  };\n\n  // 스킬 배우기 (0레벨에서 1레벨로 업그레이드) 함수\n  const learnSkill = (skill: Skill) => {\n    if (skill.level > 0) {\n      addToCombatLog(\"이미 배운 스킬입니다!\");\n      return;\n    }\n\n    const cost = 100; // 스킬 배우기 비용\n    if (character.gold < cost) {\n      addToCombatLog(\"골드가 부족합니다!\");\n      return;\n    }\n\n    setCharacter((prev) => ({\n      ...prev,\n      gold: prev.gold - cost,\n      skills: prev.skills.map((s) =>\n        s.id === skill.id ? { ...s, level: 1, isLearned: true } : s\n      ),\n    }));\n    addToCombatLog(`${skill.name}을(를) 배웠습니다!`);\n  };\n\n  // 스킬 렌더링 함수 (분류별)\n  // 스킬 아이콘 맵핑\n  const getSkillIcon = (skill: Skill) => {\n    const iconMap: { [key: string]: string } = {\n      // 전투 스킬\n      \"basic-attack\": \"⚔️\",\n      \"power-strike\": \"💥\",\n      \"fire-slash\": \"🔥\",\n      \"lightning-bolt\": \"⚡\",\n      \"ice-shard\": \"❄️\",\n      \"double-attack\": \"⚔️⚔️\",\n      // 지원 스킬\n      heal: \"💚\",\n      \"mana-recovery\": \"💙\",\n      shield: \"🛡️\",\n      haste: \"💨\",\n      blessing: \"✨\",\n      // 패시브 스킬\n      \"strength-boost\": \"💪\",\n      \"defense-boost\": \"🛡️\",\n      \"agility-boost\": \"🏃\",\n      \"mana-boost\": \"🔮\",\n      \"critical-chance\": \"💎\",\n      vampire: \"🩸\",\n    };\n    return iconMap[skill.id] || \"📜\";\n  };\n\n  // 선택된 스킬 상태\n  const [selectedSkill, setSelectedSkill] = useState<Skill | null>(null);\n\n  // 스킬 탭 내부의 서브 탭 상태\n  const [skillSubTab, setSkillSubTab] = React.useState<\n    \"combat\" | \"support\" | \"passive\"\n  >(\"combat\");\n\n  // 스킬 탭 컨텐츠 렌더링 (게임 스타일 UI)\n  const renderSkillsTab = () => (\n    <div style={{ padding: \"20px\", background: \"#1f2937\", minHeight: \"600px\" }}>\n      {/* 공통 캐릭터 헤더 */}\n      {renderCharacterHeader()}\n\n      <div style={{ display: \"flex\", gap: \"20px\" }}>\n        {/* 왼쪽 카테고리 사이드바 */}\n        <div style={{ width: \"200px\" }}>\n          <h3\n            style={{ color: \"white\", marginBottom: \"15px\", fontSize: \"16px\" }}\n          >\n            📚 스킬 분류\n          </h3>\n          <div style={{ display: \"flex\", flexDirection: \"column\", gap: \"5px\" }}>\n            {[\n              {\n                id: \"combat\",\n                label: \"전체\",\n                count: character.skills.filter((s) => s.isUnlocked).length,\n                color: \"#8b5cf6\",\n              },\n              {\n                id: \"combat\",\n                label: \"전투\",\n                count: character.skills.filter(\n                  (s) =>\n                    s.isUnlocked &&\n                    (s.category === \"combat\" || s.category === \"magic\")\n                ).length,\n                color: \"#dc2626\",\n              },\n              {\n                id: \"support\",\n                label: \"지원\",\n                count: character.skills.filter(\n                  (s) => s.isUnlocked && s.category === \"support\"\n                ).length,\n                color: \"#10b981\",\n              },\n              {\n                id: \"passive\",\n                label: \"패시브\",\n                count: character.skills.filter(\n                  (s) => s.isUnlocked && s.category === \"passive\"\n                ).length,\n                color: \"#f59e0b\",\n              },\n            ].map((tab, index) => (\n              <button\n                key={index}\n                onClick={() =>\n                  setSkillSubTab(index === 0 ? \"combat\" : (tab.id as any))\n                }\n                style={{\n                  padding: \"12px 15px\",\n                  background:\n                    (index === 0 && skillSubTab) || skillSubTab === tab.id\n                      ? `linear-gradient(135deg, ${tab.color} 0%, ${tab.color}CC 100%)`\n                      : \"rgba(255, 255, 255, 0.1)\",\n                  color:\n                    (index === 0 && skillSubTab) || skillSubTab === tab.id\n                      ? \"white\"\n                      : \"#9ca3af\",\n                  border: \"1px solid #4b5563\",\n                  borderRadius: \"8px\",\n                  cursor: \"pointer\",\n                  fontSize: \"14px\",\n                  fontWeight: \"normal\",\n                  transition: \"all 0.2s ease\",\n                  textAlign: \"left\",\n                  display: \"flex\",\n                  justifyContent: \"space-between\",\n                  alignItems: \"center\",\n                }}\n              >\n                <span>{tab.label}</span>\n                <span\n                  style={{\n                    background: \"rgba(0, 0, 0, 0.3)\",\n                    color: \"white\",\n                    fontSize: \"11px\",\n                    padding: \"2px 6px\",\n                    borderRadius: \"10px\",\n                    minWidth: \"20px\",\n                    textAlign: \"center\",\n                  }}\n                >\n                  {index === 0\n                    ? character.skills.filter((s) => s.isUnlocked).length\n                    : tab.count}\n                </span>\n              </button>\n            ))}\n          </div>\n        </div>\n\n        {/* 중앙 스킬 그리드 */}\n        <div style={{ flex: 1 }}>\n          <h3\n            style={{ color: \"white\", marginBottom: \"15px\", fontSize: \"16px\" }}\n          >\n            🎯{\" \"}\n            {skillSubTab === \"combat\"\n              ? \"전투 스킬\"\n              : skillSubTab === \"support\"\n              ? \"지원 스킬\"\n              : \"패시브 스킬\"}\n          </h3>\n          <div\n            style={{\n              display: \"grid\",\n              gridTemplateColumns: \"repeat(8, 1fr)\",\n              gap: \"6px\",\n              background: \"rgba(0, 0, 0, 0.3)\",\n              padding: \"15px\",\n              borderRadius: \"10px\",\n              border: \"2px solid #4b5563\",\n              minHeight: \"400px\",\n            }}\n          >\n            {/* 스킬 슬롯 렌더링 */}\n            {Array.from({ length: 32 }, (_, index) => {\n              const filteredSkills = character.skills.filter((skill) => {\n                if (skillSubTab === \"combat\") {\n                  return (\n                    skill.isUnlocked &&\n                    (skill.category === \"combat\" || skill.category === \"magic\")\n                  );\n                }\n                return skill.isUnlocked && skill.category === skillSubTab;\n              });\n\n              const skill = filteredSkills[index];\n              const isEmpty = !skill;\n\n              return (\n                <div\n                  key={index}\n                  onClick={() => skill && setSelectedSkill(skill)}\n                  style={{\n                    width: \"50px\",\n                    height: \"50px\",\n                    background: isEmpty\n                      ? \"rgba(255, 255, 255, 0.05)\"\n                      : skill.isLearned\n                      ? \"rgba(16, 185, 129, 0.2)\"\n                      : \"rgba(107, 114, 128, 0.2)\",\n                    border: isEmpty\n                      ? \"1px solid #374151\"\n                      : skill.isLearned\n                      ? \"2px solid #10b981\"\n                      : \"2px solid #6b7280\",\n                    borderRadius: \"8px\",\n                    display: \"flex\",\n                    flexDirection: \"column\",\n                    alignItems: \"center\",\n                    justifyContent: \"center\",\n                    cursor: skill ? \"pointer\" : \"default\",\n                    position: \"relative\",\n                    transition: \"all 0.2s ease\",\n                  }}\n                  onMouseEnter={(e) => {\n                    if (skill) {\n                      e.currentTarget.style.transform = \"scale(1.1)\";\n                      e.currentTarget.style.boxShadow = skill.isLearned\n                        ? \"0 0 15px #10b98150\"\n                        : \"0 0 15px #6b728050\";\n                    }\n                  }}\n                  onMouseLeave={(e) => {\n                    if (skill) {\n                      e.currentTarget.style.transform = \"scale(1)\";\n                      e.currentTarget.style.boxShadow = \"none\";\n                    }\n                  }}\n                >\n                  {skill && (\n                    <>\n                      <div\n                        style={{\n                          fontSize: \"20px\",\n                          filter: skill.isLearned ? \"none\" : \"grayscale(1)\",\n                          opacity: skill.isLearned ? 1 : 0.5,\n                        }}\n                      >\n                        {getSkillIcon(skill)}\n                      </div>\n                      {/* 레벨 표시 */}\n                      {skill.level > 0 && (\n                        <div\n                          style={{\n                            position: \"absolute\",\n                            bottom: \"2px\",\n                            right: \"2px\",\n                            background: \"#10b981\",\n                            color: \"white\",\n                            fontSize: \"10px\",\n                            padding: \"1px 4px\",\n                            borderRadius: \"3px\",\n                            lineHeight: \"1\",\n                            fontWeight: \"bold\",\n                          }}\n                        >\n                          {skill.level}\n                        </div>\n                      )}\n                      {/* 배울 수 있음 표시 */}\n                      {skill.level === 0 && character.gold >= 100 && (\n                        <div\n                          style={{\n                            position: \"absolute\",\n                            top: \"2px\",\n                            right: \"2px\",\n                            background: \"#fbbf24\",\n                            width: \"8px\",\n                            height: \"8px\",\n                            borderRadius: \"50%\",\n                            animation: \"pulse 2s infinite\",\n                          }}\n                        />\n                      )}\n                    </>\n                  )}\n                </div>\n              );\n            })}\n          </div>\n        </div>\n\n        {/* 오른쪽 스킬 상세 정보 */}\n        <div style={{ width: \"300px\" }}>\n          <h3\n            style={{ color: \"white\", marginBottom: \"15px\", fontSize: \"16px\" }}\n          >\n            📋 스킬 정보\n          </h3>\n          {selectedSkill ? (\n            <div\n              style={{\n                background: \"rgba(255, 255, 255, 0.1)\",\n                border: selectedSkill.isLearned\n                  ? \"2px solid #10b981\"\n                  : \"2px solid #6b7280\",\n                borderRadius: \"10px\",\n                padding: \"20px\",\n              }}\n            >\n              <div style={{ textAlign: \"center\", marginBottom: \"15px\" }}>\n                <div\n                  style={{\n                    fontSize: \"48px\",\n                    marginBottom: \"10px\",\n                    filter: selectedSkill.isLearned ? \"none\" : \"grayscale(1)\",\n                    opacity: selectedSkill.isLearned ? 1 : 0.7,\n                  }}\n                >\n                  {getSkillIcon(selectedSkill)}\n                </div>\n                <h4\n                  style={{\n                    color: selectedSkill.isLearned ? \"#10b981\" : \"#9ca3af\",\n                    margin: \"0 0 5px 0\",\n                    fontSize: \"18px\",\n                    fontWeight: \"bold\",\n                  }}\n                >\n                  {selectedSkill.name}\n                </h4>\n                <p\n                  style={{\n                    color: \"#9ca3af\",\n                    margin: \"0 0 15px 0\",\n                    fontSize: \"14px\",\n                  }}\n                >\n                  Lv.{selectedSkill.level}/{selectedSkill.maxLevel} •{\" \"}\n                  {selectedSkill.type === \"active\" ? \"액티브\" : \"패시브\"}\n                </p>\n              </div>\n\n              {/* 스킬 효과 */}\n              <div style={{ marginBottom: \"15px\" }}>\n                <h5\n                  style={{\n                    color: \"white\",\n                    margin: \"0 0 10px 0\",\n                    fontSize: \"14px\",\n                  }}\n                >\n                  효과\n                </h5>\n                <p\n                  style={{\n                    color: \"#d1d5db\",\n                    fontSize: \"12px\",\n                    lineHeight: \"1.4\",\n                    margin: 0,\n                  }}\n                >\n                  {selectedSkill.description}\n                </p>\n                {selectedSkill.level > 0 && selectedSkill.type === \"active\" && (\n                  <p\n                    style={{\n                      color: \"#fbbf24\",\n                      fontSize: \"12px\",\n                      fontWeight: \"bold\",\n                      marginTop: \"8px\",\n                    }}\n                  >\n                    데미지: {calculateSkillDamage(selectedSkill, character)}\n                  </p>\n                )}\n              </div>\n\n              {/* 스킬 정보 */}\n              {selectedSkill.type === \"active\" && (\n                <div style={{ marginBottom: \"15px\" }}>\n                  <h5\n                    style={{\n                      color: \"white\",\n                      margin: \"0 0 10px 0\",\n                      fontSize: \"14px\",\n                    }}\n                  >\n                    사용 정보\n                  </h5>\n                  <div style={{ fontSize: \"12px\", color: \"#9ca3af\" }}>\n                    <div\n                      style={{\n                        display: \"flex\",\n                        justifyContent: \"space-between\",\n                        marginBottom: \"5px\",\n                      }}\n                    >\n                      <span>마나 소모</span>\n                      <span style={{ color: \"#60a5fa\" }}>\n                        {selectedSkill.manaCost}\n                      </span>\n                    </div>\n                    <div\n                      style={{\n                        display: \"flex\",\n                        justifyContent: \"space-between\",\n                        marginBottom: \"5px\",\n                      }}\n                    >\n                      <span>쿨다운</span>\n                      <span style={{ color: \"#f472b6\" }}>\n                        {selectedSkill.cooldown / 1000}초\n                      </span>\n                    </div>\n                  </div>\n                </div>\n              )}\n\n              {/* 업그레이드 비용 */}\n              <div style={{ marginBottom: \"15px\" }}>\n                <h5\n                  style={{\n                    color: \"white\",\n                    margin: \"0 0 10px 0\",\n                    fontSize: \"14px\",\n                  }}\n                >\n                  {selectedSkill.level === 0 ? \"학습 비용\" : \"업그레이드 비용\"}\n                </h5>\n                <p style={{ color: \"#f59e0b\", fontSize: \"12px\", margin: 0 }}>\n                  {selectedSkill.level === 0\n                    ? \"100\"\n                    : (selectedSkill.level * 100).toLocaleString()}\n                  골드\n                </p>\n              </div>\n\n              {/* 액션 버튼 */}\n              <div\n                style={{\n                  display: \"flex\",\n                  flexDirection: \"column\",\n                  gap: \"10px\",\n                }}\n              >\n                {selectedSkill.level === 0 ? (\n                  <button\n                    onClick={() => {\n                      learnSkill(selectedSkill);\n                      setSelectedSkill(null);\n                    }}\n                    disabled={character.gold < 100}\n                    style={{\n                      background:\n                        character.gold >= 100\n                          ? \"linear-gradient(135deg, #10b981 0%, #059669 100%)\"\n                          : \"#6b7280\",\n                      color: \"white\",\n                      border: \"none\",\n                      borderRadius: \"6px\",\n                      padding: \"12px\",\n                      fontSize: \"14px\",\n                      cursor: character.gold >= 100 ? \"pointer\" : \"not-allowed\",\n                      fontWeight: \"bold\",\n                    }}\n                  >\n                    스킬 배우기 (100G)\n                  </button>\n                ) : selectedSkill.level < selectedSkill.maxLevel ? (\n                  <button\n                    onClick={() => {\n                      const cost = selectedSkill.level * 100;\n                      if (character.gold >= cost) {\n                        setCharacter((prev) => ({\n                          ...prev,\n                          gold: prev.gold - cost,\n                          skills: prev.skills.map((s) =>\n                            s.id === selectedSkill.id\n                              ? { ...s, level: s.level + 1 }\n                              : s\n                          ),\n                        }));\n                        addToCombatLog(\n                          `${selectedSkill.name}을(를) 레벨업했다! (Lv.${\n                            selectedSkill.level + 1\n                          })`\n                        );\n                        setSelectedSkill((prev) =>\n                          prev ? { ...prev, level: prev.level + 1 } : null\n                        );\n                      }\n                    }}\n                    disabled={character.gold < selectedSkill.level * 100}\n                    style={{\n                      background:\n                        character.gold >= selectedSkill.level * 100\n                          ? \"linear-gradient(135deg, #fbbf24 0%, #f59e0b 100%)\"\n                          : \"#6b7280\",\n                      color: \"white\",\n                      border: \"none\",\n                      borderRadius: \"6px\",\n                      padding: \"12px\",\n                      fontSize: \"14px\",\n                      cursor:\n                        character.gold >= selectedSkill.level * 100\n                          ? \"pointer\"\n                          : \"not-allowed\",\n                      fontWeight: \"bold\",\n                    }}\n                  >\n                    레벨업 ({(selectedSkill.level * 100).toLocaleString()}G)\n                  </button>\n                ) : (\n                  <div\n                    style={{\n                      background: \"#374151\",\n                      color: \"#9ca3af\",\n                      border: \"none\",\n                      borderRadius: \"6px\",\n                      padding: \"12px\",\n                      fontSize: \"14px\",\n                      textAlign: \"center\",\n                    }}\n                  >\n                    최대 레벨 달성\n                  </div>\n                )}\n              </div>\n            </div>\n          ) : (\n            <div\n              style={{\n                background: \"rgba(255, 255, 255, 0.05)\",\n                borderRadius: \"10px\",\n                padding: \"40px\",\n                textAlign: \"center\",\n                color: \"#6b7280\",\n              }}\n            >\n              <p>스킬을 클릭하여 정보를 확인하세요</p>\n            </div>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n\n  // 몬스터 생성\n  const spawnMonster = () => {\n    // 이미 몬스터가 있거나 던전에 있으면 새로 생성하지 않음\n    if (currentMonster || inDungeon) {\n      return;\n    }\n\n    const gameTexts = (window as any).gameTexts || {\n      monsters: {\n        slime: \"슬라임\",\n        goblin: \"고블린\",\n        orc: \"오크\",\n        troll: \"트롤\",\n        dragon: \"드래곤\",\n      },\n      combat: { appeared: \"이 나타났다!\" },\n    };\n    const monsters = [\n      {\n        name: gameTexts.monsters.slime,\n        baseHp: 40,\n        baseAttack: 8,\n        baseDefense: 2,\n        exp: 15,\n        gold: 10,\n        minLevel: 1,\n        maxLevel: 3,\n      },\n      {\n        name: gameTexts.monsters.goblin,\n        baseHp: 60,\n        baseAttack: 12,\n        baseDefense: 4,\n        exp: 25,\n        gold: 18,\n        minLevel: 3,\n        maxLevel: 6,\n      },\n      {\n        name: gameTexts.monsters.orc,\n        baseHp: 100,\n        baseAttack: 18,\n        baseDefense: 8,\n        exp: 40,\n        gold: 30,\n        minLevel: 6,\n        maxLevel: 10,\n      },\n      {\n        name: gameTexts.monsters.troll,\n        baseHp: 150,\n        baseAttack: 25,\n        baseDefense: 12,\n        exp: 60,\n        gold: 45,\n        minLevel: 10,\n        maxLevel: 15,\n      },\n      {\n        name: gameTexts.monsters.dragon,\n        baseHp: 300,\n        baseAttack: 40,\n        baseDefense: 20,\n        exp: 120,\n        gold: 100,\n        minLevel: 15,\n        maxLevel: 999,\n      },\n    ];\n\n    // 캐릭터 레벨에 적합한 몬스터만 필터링\n    const availableMonsters = monsters.filter(\n      (monster) =>\n        character.level >= monster.minLevel &&\n        character.level <= monster.maxLevel\n    );\n\n    // 적합한 몬스터가 없으면 레벨 범위를 확장\n    const finalMonsters =\n      availableMonsters.length > 0\n        ? availableMonsters\n        : monsters.filter(\n            (monster) => Math.abs(character.level - monster.minLevel) <= 2\n          );\n\n    const randomMonster =\n      finalMonsters[Math.floor(Math.random() * finalMonsters.length)];\n    const levelMultiplier = 1 + (character.level - 1) * 0.3;\n\n    const monster: Monster = {\n      id: `monster_${Date.now()}`,\n      name: randomMonster.name,\n      level: Math.max(1, character.level + Math.floor(Math.random() * 3 - 1)),\n      hp: Math.floor(randomMonster.baseHp * levelMultiplier),\n      maxHp: Math.floor(randomMonster.baseHp * levelMultiplier),\n      attack: Math.floor(randomMonster.baseAttack * levelMultiplier),\n      defense: Math.floor(randomMonster.baseDefense * levelMultiplier),\n      speed: 10,\n      exp: Math.floor(randomMonster.exp * levelMultiplier),\n      gold: Math.floor(randomMonster.gold * levelMultiplier),\n      dropItems: generateDropItems(),\n      isBoss: Math.random() < 0.1, // 10% 보스 확률\n    };\n\n    if (monster.isBoss) {\n      monster.name = `보스 ${monster.name}`;\n      monster.hp *= 3;\n      monster.maxHp *= 3;\n      monster.attack *= 2;\n      monster.defense *= 2;\n      monster.exp *= 5;\n      monster.gold *= 3;\n    }\n\n    setCurrentMonster(monster);\n    addToCombatLog(\n      `${monster.name} Lv.${monster.level}${gameTexts.combat.appeared}`\n    );\n  };\n\n  // 드롭 아이템 생성\n  const generateDropItems = (): Item[] => {\n    const dropChance = Math.random();\n    if (dropChance < 0.1) {\n      // 10% 확률로 아이템 드롭\n      const rarities: Array<\n        \"common\" | \"rare\" | \"epic\" | \"legendary\" | \"mythic\"\n      > = [\"common\", \"rare\", \"epic\", \"legendary\", \"mythic\"];\n      const rarity = rarities[Math.floor(Math.random() * rarities.length)];\n      const itemTypes = [\n        \"weapon\",\n        \"armor\",\n        \"helmet\",\n        \"boots\",\n        \"ring\",\n        \"amulet\",\n      ] as const;\n      const itemType = itemTypes[Math.floor(Math.random() * itemTypes.length)];\n\n      return [\n        {\n          id: `drop_${Date.now()}`,\n          name: generateItemName(rarity, itemType),\n          type: itemType,\n          rarity,\n          level: character.level,\n          stats: generateItemStats(rarity),\n          price: calculateItemPrice(rarity, character.level),\n          enhancement: 0,\n        },\n      ];\n    }\n    return [];\n  };\n\n  const generateItemName = (rarity: string, itemType: string): string => {\n    const prefixes = {\n      common: [\"낡은\", \"일반적인\", \"기본\"],\n      rare: [\"날카로운\", \"튼튼한\", \"마법의\"],\n      epic: [\"전설적인\", \"고대의\", \"신성한\"],\n      legendary: [\"전설의\", \"영웅의\", \"불멸의\"],\n      mythic: [\"신화의\", \"창조의\", \"절대의\"],\n    };\n\n    const itemNames = {\n      weapon: [\"검\", \"도끼\", \"창\", \"활\", \"지팡이\"],\n      armor: [\"갑옷\", \"로브\", \"사슬갑옷\", \"가죽갑옷\"],\n      helmet: [\"투구\", \"모자\", \"관\", \"헬름\"],\n      boots: [\"신발\", \"부츠\", \"장화\", \"샌들\"],\n      ring: [\"반지\", \"링\", \"밴드\"],\n      amulet: [\"목걸이\", \"부적\", \"펜던트\"],\n    };\n\n    const prefix =\n      prefixes[rarity as keyof typeof prefixes][Math.floor(Math.random() * 3)];\n    const itemTypeNames = itemNames[itemType as keyof typeof itemNames] || [\n      \"아이템\",\n    ];\n    const item =\n      itemTypeNames[Math.floor(Math.random() * itemTypeNames.length)];\n\n    return `${prefix} ${item}`;\n  };\n\n  const generateItemStats = (rarity: string) => {\n    const multipliers = {\n      common: 1,\n      rare: 1.5,\n      epic: 2.5,\n      legendary: 4,\n      mythic: 7,\n    };\n\n    const base = multipliers[rarity as keyof typeof multipliers];\n    return {\n      attack: Math.floor(Math.random() * 20 * base),\n      defense: Math.floor(Math.random() * 15 * base),\n      hp: Math.floor(Math.random() * 50 * base),\n      mp: Math.floor(Math.random() * 30 * base),\n      speed: Math.floor(Math.random() * 10 * base),\n      critRate: Math.floor(Math.random() * 10 * base),\n      critDamage: Math.floor(Math.random() * 20 * base),\n    };\n  };\n\n  const calculateItemPrice = (rarity: string, level: number): number => {\n    const basePrice = {\n      common: 50,\n      rare: 150,\n      epic: 500,\n      legendary: 2000,\n      mythic: 10000,\n    };\n\n    return Math.floor(\n      basePrice[rarity as keyof typeof basePrice] * (1 + level * 0.2)\n    );\n  };\n\n  // 전투 시스템\n  const attack = () => {\n    if (!currentMonster) return;\n\n    const buffedAttack = character.attack + character.buffs.attack.amount;\n    const damage = calculateDamage(buffedAttack, currentMonster.defense);\n    const isCritical = Math.random() < 0.1 + character.stats.luck * 0.01;\n    const finalDamage = isCritical ? Math.floor(damage * 1.5) : damage;\n\n    const newMonsterHp = Math.max(0, currentMonster.hp - finalDamage);\n    setCurrentMonster((prev) => (prev ? { ...prev, hp: newMonsterHp } : null));\n\n    const gameTexts = (window as any).gameTexts || {\n      combat: { attack: \"의 공격!\", damage: \"데미지!\", critical: \"치명타!\" },\n    };\n    addToCombatLog(\n      `${character.name}${gameTexts.combat.attack} ${finalDamage}${\n        isCritical ? ` (${gameTexts.combat.critical})` : \"\"\n      } ${gameTexts.combat.damage}`\n    );\n\n    onAction(\"combat_attack\", {\n      user_id: currentUser.user_id,\n      damage: finalDamage,\n      is_critical: isCritical,\n      monster_name: currentMonster.name,\n      monster_level: currentMonster.level,\n      character_level: character.level,\n      character_attack: character.attack,\n      monster_hp_remaining: newMonsterHp,\n      dungeon_name: currentDungeon?.name || null,\n      dungeon_floor: currentDungeon?.currentFloor || null,\n    });\n\n    if (newMonsterHp <= 0) {\n      defeatMonster();\n    } else {\n      // 몬스터 반격\n      setTimeout(() => monsterAttack(), 1000);\n    }\n  };\n\n  const monsterAttack = () => {\n    if (!currentMonster || currentMonster.hp <= 0) return;\n\n    const buffedDefense = character.defense + character.buffs.defense.amount;\n    const damage = calculateDamage(currentMonster.attack, buffedDefense);\n    const newHp = Math.max(0, character.hp - damage);\n\n    setCharacter((prev) => ({ ...prev, hp: newHp }));\n    const gameTexts = (window as any).gameTexts || {\n      combat: { attack: \"의 공격!\", damage: \"데미지!\" },\n    };\n    addToCombatLog(\n      `${currentMonster.name}${gameTexts.combat.attack} ${damage} ${gameTexts.combat.damage}`\n    );\n\n    if (newHp <= 0) {\n      const gameTexts = (window as any).gameTexts || {\n        combat: { defeat: \"전투에서 패배했습니다...\" },\n      };\n      addToCombatLog(gameTexts.combat.defeat);\n      setIsAutoFighting(false);\n\n      // 전투 실패 이벤트 로깅\n      onAction(\"combat_defeat\", {\n        monster_name: currentMonster.name,\n        monster_level: currentMonster.level,\n        character_level: character.level,\n        dungeon_id: currentDungeon?.id || \"field\",\n        dungeon_name: currentDungeon?.name || \"field\",\n        damage_taken: currentMonster.attack,\n        character_defense: character.defense,\n      });\n\n      // 던전에서 나가고 체력/마나 완전 회복\n      setTimeout(() => {\n        setCharacter((prev) => ({\n          ...prev,\n          hp: prev.maxHp,\n          mp: prev.maxMp,\n        }));\n\n        if (inDungeon && currentDungeon) {\n          // 던전에서 나가기 (죽음으로 인한 자동 퇴장)\n          onAction(\"dungeon_exited\", {\n            dungeon_id: currentDungeon.id,\n            dungeon_name: currentDungeon.name,\n            current_floor: currentDungeon.currentFloor,\n            total_floors: currentDungeon.floors,\n            character_level: character.level,\n            exit_reason: \"death\",\n            time_spent: new Date().getTime(),\n          });\n          setInDungeon(false);\n          setCurrentDungeon(null);\n          setCurrentTab(\"lobby\");\n          setGameMode(\"lobby\");\n          addToCombatLog(\n            \"던전에서 나왔습니다. 체력과 마나가 완전히 회복되었습니다!\"\n          );\n        } else {\n          // 일반 필드에서는 새 몬스터 스폰\n          addToCombatLog(\"체력과 마나가 완전히 회복되었습니다!\");\n          spawnMonster();\n        }\n      }, 2000);\n    }\n  };\n\n  const calculateDamage = (attack: number, defense: number): number => {\n    const baseDamage = Math.max(1, attack - Math.floor(defense * 0.5));\n    return Math.floor(baseDamage * (0.8 + Math.random() * 0.4));\n  };\n\n  const defeatMonster = () => {\n    if (!currentMonster) return;\n\n    const expGained = currentMonster.exp;\n    const goldGained = currentMonster.gold;\n\n    setCharacter((prev) => {\n      let newExp = prev.exp + expGained;\n      const newGold = prev.gold + goldGained;\n      let newLevel = prev.level;\n      let newMaxExp = prev.maxExp;\n      let newHp = prev.hp;\n      let newMp = prev.mp;\n      let newMaxHp = prev.maxHp;\n      let newMaxMp = prev.maxMp;\n      let availablePoints = prev.stats.availablePoints;\n\n      // 레벨업 체크\n      while (newExp >= newMaxExp) {\n        newLevel += 1;\n        newExp -= newMaxExp;\n        newMaxExp = Math.floor(newMaxExp * 1.5);\n        newMaxHp += 20;\n        newMaxMp += 10;\n        newHp = newMaxHp; // 레벨업 시 체력 완전 회복\n        newMp = newMaxMp; // 레벨업 시 마나 완전 회복\n        availablePoints += 5;\n\n        addToCombatLog(`🎉 레벨업! Lv.${newLevel}이 되었습니다!`);\n\n        onAction(\"level_up\", {\n          user_id: currentUser.user_id,\n          new_level: newLevel,\n          character_class: prev.class,\n          stat_points_gained: 5,\n        });\n\n        // 던전 해금 체크\n        setAvailableDungeons((prevDungeons) =>\n          prevDungeons.map((dungeon) => ({\n            ...dungeon,\n            isUnlocked: dungeon.isUnlocked || newLevel >= dungeon.requiredLevel,\n          }))\n        );\n      }\n\n      return {\n        ...prev,\n        exp: newExp,\n        gold: newGold,\n        level: newLevel,\n        maxExp: newMaxExp,\n        hp: newHp,\n        mp: newMp,\n        maxHp: newMaxHp,\n        maxMp: newMaxMp,\n        stats: { ...prev.stats, availablePoints },\n      };\n    });\n\n    // 아이템 드롭 처리\n    if (currentMonster.dropItems.length > 0) {\n      setInventory((prev) => [...prev, ...currentMonster.dropItems]);\n      addToCombatLog(`✨ ${currentMonster.dropItems[0].name}을 획득했습니다!`);\n    }\n\n    addToCombatLog(\n      `${currentMonster.name}를 물리쳤다! EXP +${expGained}, 골드 +${goldGained}`\n    );\n\n    // 추적 카운터 업데이트\n    setMonstersDefeated((prev) => prev + 1);\n    setTotalGoldEarned((prev) => prev + goldGained);\n\n    onAction(\"monster_defeated\", {\n      user_id: currentUser.user_id,\n      monster_name: currentMonster.name,\n      monster_level: currentMonster.level,\n      character_level: character.level,\n      exp_gained: expGained,\n      gold_gained: goldGained,\n      items_dropped: currentMonster.dropItems.length,\n      character_attack: character.attack,\n      dungeon_name: currentDungeon?.name || null,\n      dungeon_floor: currentDungeon?.currentFloor || null,\n    });\n\n    // 현재 몬스터 제거\n    setCurrentMonster(null);\n\n    // 던전에 있는 경우 현재 층에서 새로운 몬스터 생성, 아니면 일반 몬스터 생성\n    if (inDungeon && currentDungeon) {\n      // 현재 층을 클리어한 것으로 마킹\n      const updatedDungeon = {\n        ...currentDungeon,\n        clearedFloors: new Set([\n          ...Array.from(currentDungeon.clearedFloors),\n          currentDungeon.currentFloor,\n        ]),\n      };\n      setCurrentDungeon(updatedDungeon);\n\n      // 던전 리스트에서도 업데이트\n      setAvailableDungeons((prev) =>\n        prev.map((d) => (d.id === updatedDungeon.id ? updatedDungeon : d))\n      );\n\n      // 던전에서는 현재 층에서 계속 사냥할 수 있도록 새 몬스터 생성\n      addToCombatLog(\n        `몬스터를 처치했습니다! 현재 ${currentDungeon.currentFloor}층이 클리어되었습니다. 계속 사냥할 수 있습니다.`\n      );\n      setTimeout(() => {\n        spawnDungeonMonster(updatedDungeon, true);\n      }, 2000);\n    } else {\n      // 일반 방치형 전투에서 새 몬스터 생성 (던전 상태가 아닐 때만)\n      if (!inDungeon) {\n        setTimeout(() => {\n          spawnMonster();\n        }, 2000);\n      }\n    }\n  };\n\n  // 다음 층으로 진행\n  const proceedToNextFloor = () => {\n    if (!currentDungeon) return;\n\n    const updatedDungeon = {\n      ...currentDungeon,\n      currentFloor: currentDungeon.currentFloor + 1,\n    };\n    setCurrentDungeon(updatedDungeon);\n    setShowDungeonChoice(false);\n    setTimeout(() => {\n      spawnDungeonMonster(updatedDungeon, true); // 강제 스폰\n      addToCombatLog(`${updatedDungeon.currentFloor}층으로 진행합니다!`);\n    }, 500);\n  };\n\n  // 던전 나가기\n  const exitDungeonAfterVictory = () => {\n    if (!currentDungeon) return;\n\n    // 던전 나가기 이벤트 로깅\n    onAction(\"dungeon_exited\", {\n      dungeon_id: currentDungeon.id,\n      dungeon_name: currentDungeon.name,\n      current_floor: currentDungeon.currentFloor,\n      total_floors: currentDungeon.floors,\n      character_level: character.level,\n      exit_reason: \"victory_choice\",\n      time_spent: new Date().getTime(),\n    });\n\n    // 던전 리셋 (현재 층을 1층으로 되돌림)\n    const resetDungeon = { ...currentDungeon, currentFloor: 1 };\n    setAvailableDungeons((prev) =>\n      prev.map((d) => (d.id === resetDungeon.id ? resetDungeon : d))\n    );\n\n    setInDungeon(false);\n    setCurrentDungeon(null);\n    setCurrentTab(\"lobby\");\n    setGameMode(\"lobby\");\n    setShowDungeonChoice(false);\n\n    // 체력과 마나 완전 회복\n    setCharacter((prev) => ({ ...prev, hp: prev.maxHp, mp: prev.maxMp }));\n    addToCombatLog(\"던전에서 나왔습니다. 체력과 마나가 완전히 회복되었습니다!\");\n\n    // 새로운 일반 몬스터 생성\n    setTimeout(() => {\n      spawnMonster();\n    }, 1000);\n  };\n\n  // 자동 전투\n  useEffect(() => {\n    if (\n      isAutoFighting &&\n      currentMonster &&\n      currentMonster.hp > 0 &&\n      character.hp > 0\n    ) {\n      const autoAttackTimer = setTimeout(() => {\n        attack();\n      }, 2000);\n\n      return () => clearTimeout(autoAttackTimer);\n    }\n  }, [isAutoFighting, currentMonster, character.hp]);\n\n  // 스킬 쿨다운 및 MP 회복\n  useEffect(() => {\n    const interval = setInterval(() => {\n      setCharacter((prev) => ({\n        ...prev,\n        mp: Math.min(prev.maxMp, prev.mp + 1),\n        skills: prev.skills.map((skill) => ({\n          ...skill,\n          currentCooldown: Math.max(0, skill.currentCooldown - 100),\n        })),\n        buffs: {\n          attack: {\n            amount:\n              prev.buffs.attack.duration > 0 ? prev.buffs.attack.amount : 0,\n            duration: Math.max(0, prev.buffs.attack.duration - 100),\n          },\n          defense: {\n            amount:\n              prev.buffs.defense.duration > 0 ? prev.buffs.defense.amount : 0,\n            duration: Math.max(0, prev.buffs.defense.duration - 100),\n          },\n          speed: {\n            amount: prev.buffs.speed.duration > 0 ? prev.buffs.speed.amount : 0,\n            duration: Math.max(0, prev.buffs.speed.duration - 100),\n          },\n        },\n      }));\n    }, 100);\n\n    return () => clearInterval(interval);\n  }, []);\n\n  const addToCombatLog = (message: string) => {\n    setCombatLog((prev) => {\n      const newLog = [...prev, message];\n      if (newLog.length > 50) newLog.shift();\n      return newLog;\n    });\n\n    // Auto-scroll to bottom immediately and with backup timing\n    if (logRef.current) {\n      logRef.current.scrollTop = logRef.current.scrollHeight;\n    }\n\n    // Additional scroll with slight delay to ensure content is rendered\n    setTimeout(() => {\n      if (logRef.current) {\n        logRef.current.scrollTop = logRef.current.scrollHeight;\n      }\n    }, 10);\n\n    // Final backup scroll\n    setTimeout(() => {\n      if (logRef.current) {\n        logRef.current.scrollTop = logRef.current.scrollHeight;\n      }\n    }, 100);\n  };\n\n  // 스탯 분배\n  const allocateStatPoint = (\n    stat: keyof Omit<CharacterStats, \"availablePoints\">\n  ) => {\n    if (character.stats.availablePoints <= 0) return;\n\n    setCharacter((prev) => ({\n      ...prev,\n      stats: {\n        ...prev.stats,\n        [stat]: prev.stats[stat] + 1,\n        availablePoints: prev.stats.availablePoints - 1,\n      },\n      // 스탯에 따른 능력치 업데이트\n      attack: stat === \"strength\" ? prev.attack + 2 : prev.attack,\n      defense: stat === \"vitality\" ? prev.defense + 1 : prev.defense,\n      maxHp: stat === \"vitality\" ? prev.maxHp + 10 : prev.maxHp,\n      maxMp: stat === \"intelligence\" ? prev.maxMp + 5 : prev.maxMp,\n      speed: stat === \"agility\" ? prev.speed + 1 : prev.speed,\n    }));\n  };\n\n  // 아이템 장착\n  const equipItem = (item: Item) => {\n    // 소비 아이템은 장착할 수 없음\n    if (item.type === \"consumable\") {\n      return;\n    }\n\n    // 기존에 장착된 아이템이 있는지 확인\n    const slot = item.type as keyof Equipment;\n    const currentEquippedItem = character.equipment[slot];\n\n    setCharacter((prev) => {\n      const newEquipment = { ...prev.equipment };\n      newEquipment[slot] = item;\n\n      // 기존 아이템의 스탯 제거\n      let newAttack = prev.attack;\n      let newDefense = prev.defense;\n      let newMaxHp = prev.maxHp;\n      let newMaxMp = prev.maxMp;\n      let newSpeed = prev.speed;\n\n      if (currentEquippedItem) {\n        if (currentEquippedItem.stats.attack)\n          newAttack -= currentEquippedItem.stats.attack;\n        if (currentEquippedItem.stats.defense)\n          newDefense -= currentEquippedItem.stats.defense;\n        if (currentEquippedItem.stats.hp)\n          newMaxHp -= currentEquippedItem.stats.hp;\n        if (currentEquippedItem.stats.mp)\n          newMaxMp -= currentEquippedItem.stats.mp;\n        if (currentEquippedItem.stats.speed)\n          newSpeed -= currentEquippedItem.stats.speed;\n      }\n\n      // 새 아이템의 스탯 적용\n      if (item.stats.attack) newAttack += item.stats.attack;\n      if (item.stats.defense) newDefense += item.stats.defense;\n      if (item.stats.hp) newMaxHp += item.stats.hp;\n      if (item.stats.mp) newMaxMp += item.stats.mp;\n      if (item.stats.speed) newSpeed += item.stats.speed;\n\n      // 스탯이 최소값 이하로 내려가지 않도록 보정\n      newAttack = Math.max(1, newAttack);\n      newDefense = Math.max(0, newDefense);\n      newMaxHp = Math.max(100, newMaxHp);\n      newMaxMp = Math.max(50, newMaxMp);\n      newSpeed = Math.max(1, newSpeed);\n\n      return {\n        ...prev,\n        equipment: newEquipment,\n        attack: newAttack,\n        defense: newDefense,\n        maxHp: newMaxHp,\n        maxMp: newMaxMp,\n        speed: newSpeed,\n        hp: Math.min(prev.hp, newMaxHp), // 최대 체력이 줄어들 경우 현재 체력도 조정\n        mp: Math.min(prev.mp, newMaxMp), // 최대 마나가 줄어들 경우 현재 마나도 조정\n      };\n    });\n\n    // 기존에 장착된 아이템이 있었다면 인벤토리로 보내기\n    if (currentEquippedItem) {\n      setInventory((prev) => [...prev, currentEquippedItem]);\n      addToCombatLog(\n        `기존 ${currentEquippedItem.name}을 해제하고 ${item.name}을 장착했습니다!`\n      );\n    } else {\n      addToCombatLog(`${item.name}을 장착했습니다!`);\n    }\n\n    // 인벤토리에서 새 아이템 제거\n    setInventory((prev) => prev.filter((invItem) => invItem.id !== item.id));\n  };\n\n  // 장비 해제\n  const unequipItem = (slot: keyof Equipment) => {\n    const equippedItem = character.equipment[slot];\n    if (!equippedItem) return;\n\n    setCharacter((prev) => {\n      const newEquipment = { ...prev.equipment };\n      newEquipment[slot] = undefined;\n\n      // 장착 해제한 아이템의 스탯 제거\n      let newAttack = prev.attack;\n      let newDefense = prev.defense;\n      let newMaxHp = prev.maxHp;\n      let newMaxMp = prev.maxMp;\n      let newSpeed = prev.speed;\n\n      if (equippedItem.stats.attack) newAttack -= equippedItem.stats.attack;\n      if (equippedItem.stats.defense) newDefense -= equippedItem.stats.defense;\n      if (equippedItem.stats.hp) newMaxHp -= equippedItem.stats.hp;\n      if (equippedItem.stats.mp) newMaxMp -= equippedItem.stats.mp;\n      if (equippedItem.stats.speed) newSpeed -= equippedItem.stats.speed;\n\n      // HP가 maxHp를 초과하지 않도록 조정\n      const adjustedHp = Math.min(prev.hp, newMaxHp);\n      const adjustedMp = Math.min(prev.mp, newMaxMp);\n\n      return {\n        ...prev,\n        equipment: newEquipment,\n        attack: Math.max(1, newAttack), // 최소 공격력 1\n        defense: Math.max(0, newDefense),\n        maxHp: Math.max(100, newMaxHp), // 최소 체력 100\n        maxMp: Math.max(50, newMaxMp), // 최소 마나 50\n        speed: Math.max(1, newSpeed), // 최소 속도 1\n        hp: adjustedHp,\n        mp: adjustedMp,\n      };\n    });\n\n    // 인벤토리에 아이템 추가\n    setInventory((prev) => [...prev, equippedItem]);\n    addToCombatLog(`${equippedItem.name}을 해제했습니다!`);\n  };\n\n  // 아이템 판매\n  const sellItem = (item: Item) => {\n    const sellPrice = Math.floor(item.price * 0.7);\n    setCharacter((prev) => ({ ...prev, gold: prev.gold + sellPrice }));\n    setInventory((prev) => prev.filter((invItem) => invItem.id !== item.id));\n    addToCombatLog(`${item.name}을 ${sellPrice} 골드에 판매했습니다!`);\n  };\n\n  // 아이템 구매\n  const buyItem = (item: Item) => {\n    if (character.gold < item.price) return;\n\n    setCharacter((prev) => ({ ...prev, gold: prev.gold - item.price }));\n    setInventory((prev) => [\n      ...prev,\n      { ...item, id: `${item.id}_${Date.now()}` },\n    ]);\n    addToCombatLog(`${item.name}을 구매했습니다!`);\n  };\n\n  const getRarityColor = (rarity: string) => {\n    const colors = {\n      common: \"#9ca3af\",\n      rare: \"#3b82f6\",\n      epic: \"#8b5cf6\",\n      legendary: \"#f59e0b\",\n      mythic: \"#ef4444\",\n    };\n    return colors[rarity as keyof typeof colors] || \"#9ca3af\";\n  };\n\n  // 던전 입장 함수\n  const enterDungeon = (dungeon: Dungeon) => {\n    if (dungeon.isComingSoon) {\n      addToCombatLog(\"이 던전은 아직 업데이트 예정입니다!\");\n      return;\n    }\n    if (character.level < dungeon.requiredLevel) {\n      addToCombatLog(\n        `레벨 ${dungeon.requiredLevel} 이상이어야 입장 가능합니다.`\n      );\n      return;\n    }\n    setCurrentDungeon(dungeon);\n    setInDungeon(true);\n    setGameMode(\"dungeon\");\n    setCurrentTab(\"dungeon\");\n    spawnDungeonMonster(dungeon);\n\n    // 이벤트 로깅\n    onAction(\"dungeon_entered\", {\n      dungeon_id: dungeon.id,\n      dungeon_name: dungeon.name,\n      character_level: character.level,\n      floor: dungeon.currentFloor,\n      character_attack: character.attack,\n      character_defense: character.defense,\n      character_hp: character.hp,\n      character_mp: character.mp,\n      entry_time: new Date().getTime(),\n    });\n  };\n\n  // 던전 몬스터 스폰\n  const spawnDungeonMonster = (dungeon: Dungeon, forceSpawn = false) => {\n    // 이미 몬스터가 있으면 새로 생성하지 않음 (강제 생성이 아닌 경우)\n    if (currentMonster && !forceSpawn) return;\n\n    // 강제 생성인 경우 기존 몬스터를 먼저 제거\n    if (forceSpawn && currentMonster) {\n      setCurrentMonster(null);\n    }\n    // 던전별 고유 몬스터 타입 정의\n    const getDungeonMonsters = (dungeonId: string) => {\n      switch (dungeonId) {\n        case \"forest\": // 어둠의 숲\n          return [\n            { name: \"늑대\", baseHp: 40, baseAttack: 10, baseDefense: 3 },\n            { name: \"곰\", baseHp: 80, baseAttack: 16, baseDefense: 6 },\n            { name: \"거대 거미\", baseHp: 120, baseAttack: 22, baseDefense: 10 },\n            {\n              name: \"숲의 수호자\",\n              baseHp: 200,\n              baseAttack: 35,\n              baseDefense: 18,\n            },\n            { name: \"고대 엔트\", baseHp: 350, baseAttack: 45, baseDefense: 25 },\n          ];\n        case \"cave\": // 고블린 동굴\n          return [\n            { name: \"고블린 전사\", baseHp: 60, baseAttack: 14, baseDefense: 5 },\n            { name: \"고블린 궁수\", baseHp: 45, baseAttack: 18, baseDefense: 3 },\n            {\n              name: \"고블린 마법사\",\n              baseHp: 50,\n              baseAttack: 20,\n              baseDefense: 4,\n            },\n            {\n              name: \"고블린 우두머리\",\n              baseHp: 180,\n              baseAttack: 30,\n              baseDefense: 15,\n            },\n            { name: \"고블린 왕\", baseHp: 400, baseAttack: 50, baseDefense: 28 },\n          ];\n        case \"tower\": // 마법사의 탑\n          return [\n            { name: \"마법 골렘\", baseHp: 100, baseAttack: 20, baseDefense: 12 },\n            {\n              name: \"스켈레톤 메이지\",\n              baseHp: 70,\n              baseAttack: 25,\n              baseDefense: 8,\n            },\n            {\n              name: \"플레임 엘리멘탈\",\n              baseHp: 110,\n              baseAttack: 28,\n              baseDefense: 10,\n            },\n            { name: \"리치\", baseHp: 250, baseAttack: 40, baseDefense: 20 },\n            {\n              name: \"고대 마법사\",\n              baseHp: 500,\n              baseAttack: 60,\n              baseDefense: 35,\n            },\n          ];\n        default:\n          return [\n            { name: \"슬라임\", baseHp: 30, baseAttack: 8, baseDefense: 2 },\n            { name: \"고블린\", baseHp: 50, baseAttack: 12, baseDefense: 4 },\n            { name: \"오크\", baseHp: 100, baseAttack: 18, baseDefense: 8 },\n            { name: \"트롤\", baseHp: 150, baseAttack: 25, baseDefense: 12 },\n            { name: \"드래곤\", baseHp: 300, baseAttack: 40, baseDefense: 20 },\n          ];\n      }\n    };\n\n    const baseMonsters = getDungeonMonsters(dungeon.id);\n\n    // 층수에 따른 점진적 몬스터 선택 로직\n    const floorBasedMonsterIndex = () => {\n      const currentFloor = dungeon.currentFloor;\n      if (currentFloor <= 3) return 0; // 첫 번째 몬스터 (1~3층)\n      if (currentFloor <= 7) return 1; // 두 번째 몬스터 (4~7층)\n      if (currentFloor <= 12) return 2; // 세 번째 몬스터 (8~12층)\n      if (currentFloor <= 18) return 3; // 네 번째 몬스터 (13~18층)\n      return 4; // 다섯 번째 몬스터 (19층 이상)\n    };\n\n    // 층수 기반 기본 몬스터 + 약간의 랜덤성 추가\n    const baseIndex = floorBasedMonsterIndex();\n    const randomVariation = Math.random() < 0.3 && baseIndex > 0 ? -1 : 0; // 30% 확률로 한 단계 낮은 몬스터\n    const selectedIndex = Math.max(0, baseIndex + randomVariation);\n\n    const selectedMonster = baseMonsters[selectedIndex];\n    const levelMultiplier =\n      1 + (dungeon.level + dungeon.currentFloor - 1) * 0.2;\n\n    const monster: Monster = {\n      id: `dungeon_${dungeon.id}_${Date.now()}`,\n      name: selectedMonster.name,\n      level: dungeon.level + dungeon.currentFloor,\n      hp: Math.floor(selectedMonster.baseHp * levelMultiplier),\n      maxHp: Math.floor(selectedMonster.baseHp * levelMultiplier),\n      attack: Math.floor(selectedMonster.baseAttack * levelMultiplier),\n      defense: Math.floor(selectedMonster.baseDefense * levelMultiplier),\n      speed: 10,\n      exp: Math.floor(\n        (20 + dungeon.level * 8 + dungeon.currentFloor * 3) * levelMultiplier\n      ),\n      gold: Math.floor((10 + dungeon.level * 3) * levelMultiplier),\n      dropItems: generateDropItems(),\n      isBoss: dungeon.currentFloor % 5 === 0,\n    };\n\n    if (monster.isBoss) {\n      monster.name = `보스 ${monster.name}`;\n      monster.hp *= 2;\n      monster.maxHp *= 2;\n      monster.attack *= 1.5;\n      monster.exp *= 3;\n      monster.gold *= 2;\n    }\n\n    setCurrentMonster(monster);\n    addToCombatLog(`${monster.name} Lv.${monster.level}이 나타났다!`);\n  };\n\n  // 물약 사용 함수\n  const consumeItem = (item: Item) => {\n    if (item.type !== \"consumable\" || !item.consumableEffect) return;\n\n    const effect = item.consumableEffect;\n\n    // 체력 회복\n    if (effect.healHp) {\n      setCharacter((prev) => ({\n        ...prev,\n        hp: Math.min(prev.maxHp, prev.hp + effect.healHp!),\n      }));\n      addToCombatLog(`${item.name}을 사용하여 HP ${effect.healHp} 회복!`);\n    }\n\n    // 마나 회복\n    if (effect.healMp) {\n      setCharacter((prev) => ({\n        ...prev,\n        mp: Math.min(prev.maxMp, prev.mp + effect.healMp!),\n      }));\n      addToCombatLog(`${item.name}을 사용하여 MP ${effect.healMp} 회복!`);\n    }\n\n    // 버프 효과\n    if (effect.buffType && effect.buffAmount && effect.buffDuration) {\n      setCharacter((prev) => ({\n        ...prev,\n        buffs: {\n          ...prev.buffs,\n          [effect.buffType!]: {\n            amount: effect.buffAmount!,\n            duration: effect.buffDuration!,\n          },\n        },\n      }));\n      addToCombatLog(\n        `${item.name}을 사용하여 ${\n          effect.buffType === \"attack\"\n            ? \"공격력\"\n            : effect.buffType === \"defense\"\n            ? \"방어력\"\n            : \"속도\"\n        } ${effect.buffAmount} 증가! (${effect.buffDuration / 1000}초)`\n      );\n    }\n\n    // 인벤토리에서 물약 제거 또는 수량 감소\n    setInventory((prev) => {\n      const itemIndex = prev.findIndex((invItem) => invItem.id === item.id);\n      if (itemIndex !== -1) {\n        const newInventory = [...prev];\n        const currentItem = newInventory[itemIndex];\n        if (currentItem.quantity && currentItem.quantity > 1) {\n          newInventory[itemIndex] = {\n            ...currentItem,\n            quantity: currentItem.quantity - 1,\n          };\n        } else {\n          newInventory.splice(itemIndex, 1);\n        }\n        return newInventory;\n      }\n      return prev;\n    });\n\n    // 이벤트 로깅\n    onAction(\"consumable_used\", {\n      item_name: item.name,\n      item_type: item.type,\n      character_level: character.level,\n      heal_hp: effect.healHp || 0,\n      heal_mp: effect.healMp || 0,\n      buff_type: effect.buffType || \"none\",\n      buff_amount: effect.buffAmount || 0,\n      character_hp_before: character.hp,\n      character_mp_before: character.mp,\n      dungeon_name: currentDungeon?.name || null,\n    });\n  };\n\n  // 스킬 사용 함수\n  const castSkill = (skill: Skill) => {\n    if (!skill.isLearned || skill.level === 0) {\n      addToCombatLog(\"스킬을 먼저 배워야 합니다!\");\n      return;\n    }\n    if (skill.currentCooldown > 0 || character.mp < skill.manaCost) return;\n\n    // 스킬 사용 로직\n    if (skill.id === \"heal\") {\n      const healAmount = 30 + skill.level * 5;\n      setCharacter((prev) => ({\n        ...prev,\n        hp: Math.min(prev.maxHp, prev.hp + healAmount),\n        mp: prev.mp - skill.manaCost,\n      }));\n      addToCombatLog(`${healAmount}만큼 회복했다!`);\n    } else {\n      // 공격 스킬\n      if (currentMonster) {\n        const damage = calculateSkillDamage(skill, character);\n        const newMonsterHp = Math.max(0, currentMonster.hp - damage);\n        setCurrentMonster((prev) =>\n          prev ? { ...prev, hp: newMonsterHp } : null\n        );\n        setCharacter((prev) => ({ ...prev, mp: prev.mp - skill.manaCost }));\n        addToCombatLog(`${skill.name}로 ${damage} 데미지!`);\n\n        // 몬스터가 죽지 않았으면 반격\n        if (newMonsterHp > 0) {\n          setTimeout(() => {\n            monsterAttack();\n          }, 1000);\n        } else {\n          // 몬스터가 죽었으면 처치 처리\n          setTimeout(() => {\n            defeatMonster();\n          }, 1500);\n        }\n      }\n    }\n\n    // 쿨다운 적용\n    setCharacter((prev) => ({\n      ...prev,\n      skills: prev.skills.map((s) =>\n        s.id === skill.id ? { ...s, currentCooldown: s.cooldown } : s\n      ),\n    }));\n\n    // 이벤트 로깅\n    onAction(\"skill_used\", {\n      skill_name: skill.name,\n      skill_level: skill.level,\n      mana_cost: skill.manaCost,\n      character_level: character.level,\n      character_mp_before: character.mp,\n      character_mp_after: character.mp - skill.manaCost,\n      dungeon_name: currentDungeon?.name || null,\n    });\n  };\n\n  // 스탯 포인트 할당\n  const allocateStat = (statName: keyof CharacterStats) => {\n    if (character.stats.availablePoints <= 0) return;\n\n    setCharacter((prev) => ({\n      ...prev,\n      stats: {\n        ...prev.stats,\n        [statName]: prev.stats[statName] + 1,\n        availablePoints: prev.stats.availablePoints - 1,\n      },\n    }));\n\n    // 스탯에 따른 능력치 업데이트\n    let hpBonus = 0,\n      mpBonus = 0,\n      attackBonus = 0,\n      defenseBonus = 0;\n    if (statName === \"vitality\") hpBonus = 5;\n    if (statName === \"intelligence\") mpBonus = 3;\n    if (statName === \"strength\") attackBonus = 2;\n    if (statName === \"agility\") {\n      attackBonus = 1;\n      defenseBonus = 1;\n    }\n\n    setCharacter((prev) => ({\n      ...prev,\n      maxHp: prev.maxHp + hpBonus,\n      hp: prev.hp + hpBonus,\n      maxMp: prev.maxMp + mpBonus,\n      mp: prev.mp + mpBonus,\n      attack: prev.attack + attackBonus,\n      defense: prev.defense + defenseBonus,\n    }));\n\n    // 이벤트 로깅\n    onAction(\"stat_allocated\", {\n      stat_name: statName,\n      stat_value: character.stats[statName] + 1,\n      character_level: character.level,\n      available_points: character.stats.availablePoints - 1,\n    });\n  };\n\n  // 공통 캐릭터 정보 헤더 컴포넌트\n  const renderCharacterHeader = () => {\n    const expPercentage = (character.exp / character.maxExp) * 100;\n\n    return (\n      <div\n        style={{\n          background: \"linear-gradient(135deg, #4f46e5 0%, #7c3aed 100%)\",\n          borderRadius: \"15px\",\n          padding: \"15px 20px\",\n          marginBottom: \"20px\",\n          color: \"white\",\n        }}\n      >\n        {/* 기본 스탯 정보 */}\n        <div\n          style={{\n            display: \"grid\",\n            gridTemplateColumns: \"repeat(auto-fit, minmax(120px, 1fr))\",\n            gap: \"15px\",\n            marginBottom: \"15px\",\n          }}\n        >\n          <div style={{ textAlign: \"center\" }}>\n            <div\n              style={{ fontSize: \"20px\", fontWeight: \"bold\", color: \"#ffffff\" }}\n            >\n              Lv.{character.level}\n            </div>\n            <div style={{ color: \"#e0e7ff\", fontSize: \"12px\" }}>레벨</div>\n          </div>\n          <div style={{ textAlign: \"center\" }}>\n            <div\n              style={{ fontSize: \"20px\", fontWeight: \"bold\", color: \"#fbbf24\" }}\n            >\n              {character.gold}G\n            </div>\n            <div style={{ color: \"#e0e7ff\", fontSize: \"12px\" }}>골드</div>\n          </div>\n          <div style={{ textAlign: \"center\" }}>\n            <div\n              style={{ fontSize: \"16px\", fontWeight: \"bold\", color: \"#f87171\" }}\n            >\n              {character.attack}\n            </div>\n            <div style={{ color: \"#e0e7ff\", fontSize: \"12px\" }}>공격력</div>\n          </div>\n          <div style={{ textAlign: \"center\" }}>\n            <div\n              style={{ fontSize: \"16px\", fontWeight: \"bold\", color: \"#60a5fa\" }}\n            >\n              {character.defense}\n            </div>\n            <div style={{ color: \"#e0e7ff\", fontSize: \"12px\" }}>방어력</div>\n          </div>\n          <div style={{ textAlign: \"center\" }}>\n            <div\n              style={{ fontSize: \"16px\", fontWeight: \"bold\", color: \"#34d399\" }}\n            >\n              {character.hp}/{character.maxHp}\n            </div>\n            <div style={{ color: \"#e0e7ff\", fontSize: \"12px\" }}>체력</div>\n          </div>\n          <div style={{ textAlign: \"center\" }}>\n            <div\n              style={{ fontSize: \"16px\", fontWeight: \"bold\", color: \"#a78bfa\" }}\n            >\n              {character.mp}/{character.maxMp}\n            </div>\n            <div style={{ color: \"#e0e7ff\", fontSize: \"12px\" }}>마나</div>\n          </div>\n        </div>\n\n        {/* 경험치 바 */}\n        <div style={{ marginTop: \"15px\" }}>\n          <div\n            style={{\n              display: \"flex\",\n              justifyContent: \"space-between\",\n              alignItems: \"center\",\n              marginBottom: \"5px\",\n            }}\n          >\n            <span style={{ fontSize: \"14px\", color: \"#e0e7ff\" }}>경험치</span>\n            <span\n              style={{ fontSize: \"14px\", color: \"#ffffff\", fontWeight: \"bold\" }}\n            >\n              {character.exp} / {character.maxExp} ({Math.floor(expPercentage)}\n              %)\n            </span>\n          </div>\n          <div\n            style={{\n              width: \"100%\",\n              height: \"8px\",\n              backgroundColor: \"rgba(255, 255, 255, 0.2)\",\n              borderRadius: \"10px\",\n              overflow: \"hidden\",\n            }}\n          >\n            <div\n              style={{\n                width: `${expPercentage}%`,\n                height: \"100%\",\n                background: \"linear-gradient(90deg, #fbbf24 0%, #f59e0b 100%)\",\n                borderRadius: \"10px\",\n                transition: \"width 0.3s ease\",\n              }}\n            />\n          </div>\n        </div>\n      </div>\n    );\n  };\n\n  // 로비 렌더링\n  const renderLobbyTab = () => (\n    <div style={{ padding: \"20px\", background: \"#1f2937\", minHeight: \"600px\" }}>\n      {/* 공통 캐릭터 헤더 */}\n      {renderCharacterHeader()}\n\n      {/* 던전 목록 */}\n      <div style={{ marginBottom: \"20px\" }}>\n        <h3 style={{ color: \"white\", marginBottom: \"15px\", fontSize: \"20px\" }}>\n          🏰 던전 목록\n        </h3>\n        <div style={{ display: \"grid\", gap: \"15px\" }}>\n          {availableDungeons.map((dungeon) => (\n            <div\n              key={dungeon.id}\n              style={{\n                background: dungeon.isUnlocked ? \"#374151\" : \"#1f2937\",\n                borderRadius: \"10px\",\n                padding: \"20px\",\n                border: dungeon.isUnlocked\n                  ? \"2px solid #10b981\"\n                  : \"2px solid #4b5563\",\n                opacity: dungeon.isUnlocked ? 1 : 0.6,\n              }}\n            >\n              <div\n                style={{\n                  display: \"flex\",\n                  justifyContent: \"space-between\",\n                  alignItems: \"center\",\n                }}\n              >\n                <div>\n                  <h4\n                    style={{\n                      color: \"white\",\n                      margin: \"0 0 5px 0\",\n                      fontSize: \"18px\",\n                    }}\n                  >\n                    {dungeon.name} (Lv.{dungeon.level})\n                  </h4>\n                  <p\n                    style={{\n                      color: \"#9ca3af\",\n                      margin: \"0 0 10px 0\",\n                      fontSize: \"14px\",\n                    }}\n                  >\n                    {dungeon.description}\n                  </p>\n                  <div style={{ fontSize: \"12px\", color: \"#6b7280\" }}>\n                    필요 레벨: {dungeon.requiredLevel} | 층수: {dungeon.floors}\n                    층 | 현재 층: {dungeon.currentFloor}층\n                  </div>\n                </div>\n                <button\n                  onClick={() => enterDungeon(dungeon)}\n                  disabled={\n                    !dungeon.isUnlocked ||\n                    character.level < dungeon.requiredLevel ||\n                    dungeon.isComingSoon\n                  }\n                  style={{\n                    background: dungeon.isComingSoon\n                      ? \"linear-gradient(135deg, #7c2d12 0%, #dc2626 100%)\"\n                      : dungeon.isUnlocked &&\n                        character.level >= dungeon.requiredLevel\n                      ? \"linear-gradient(135deg, #10b981 0%, #059669 100%)\"\n                      : \"#4b5563\",\n                    color: \"white\",\n                    border: \"none\",\n                    borderRadius: \"8px\",\n                    padding: \"12px 20px\",\n                    fontSize: \"14px\",\n                    fontWeight: \"bold\",\n                    cursor:\n                      dungeon.isUnlocked &&\n                      character.level >= dungeon.requiredLevel &&\n                      !dungeon.isComingSoon\n                        ? \"pointer\"\n                        : \"not-allowed\",\n                    transition: \"all 0.3s ease\",\n                  }}\n                >\n                  {dungeon.isComingSoon\n                    ? \"업데이트 예정\"\n                    : dungeon.isUnlocked &&\n                      character.level >= dungeon.requiredLevel\n                    ? \"입장\"\n                    : \"잠금\"}\n                </button>\n              </div>\n            </div>\n          ))}\n        </div>\n      </div>\n    </div>\n  );\n\n  // 던전 탭 렌더링\n  const renderDungeonTab = () => {\n    if (!inDungeon || !currentDungeon) {\n      return (\n        <div\n          style={{\n            padding: \"100px 20px\",\n            textAlign: \"center\",\n            background: \"#1f2937\",\n            color: \"#9ca3af\",\n          }}\n        >\n          <h3>던전에 입장하지 않았습니다</h3>\n          <p>로비에서 던전을 선택해주세요</p>\n        </div>\n      );\n    }\n\n    return (\n      <div\n        style={{ padding: \"20px\", background: \"#1f2937\", minHeight: \"600px\" }}\n      >\n        {/* 공통 캐릭터 헤더 */}\n        {renderCharacterHeader()}\n\n        {/* 던전 정보 */}\n        <div\n          style={{\n            background: \"linear-gradient(135deg, #7c2d12 0%, #dc2626 100%)\",\n            borderRadius: \"15px\",\n            padding: \"20px\",\n            marginBottom: \"20px\",\n            color: \"white\",\n          }}\n        >\n          <div\n            style={{\n              display: \"flex\",\n              justifyContent: \"space-between\",\n              alignItems: \"center\",\n              marginBottom: \"15px\",\n            }}\n          >\n            <div>\n              <h2 style={{ margin: \"0 0 5px 0\", fontSize: \"24px\" }}>\n                🏰 {currentDungeon.name}\n              </h2>\n              <p style={{ margin: 0, opacity: 0.9, fontSize: \"14px\" }}>\n                {currentDungeon.currentFloor}층 / {currentDungeon.floors}층\n              </p>\n            </div>\n            <button\n              onClick={() => {\n                // 던전 나가기 이벤트 로깅\n                onAction(\"dungeon_exited\", {\n                  dungeon_id: currentDungeon.id,\n                  dungeon_name: currentDungeon.name,\n                  current_floor: currentDungeon.currentFloor,\n                  total_floors: currentDungeon.floors,\n                  character_level: character.level,\n                  exit_reason: \"manual\",\n                  time_spent: new Date().getTime(),\n                });\n                setInDungeon(false);\n                setCurrentDungeon(null);\n                setCurrentTab(\"lobby\");\n                setGameMode(\"lobby\");\n              }}\n              style={{\n                background: \"#374151\",\n                color: \"white\",\n                border: \"none\",\n                borderRadius: \"8px\",\n                padding: \"10px 15px\",\n                cursor: \"pointer\",\n              }}\n            >\n              던전 나가기\n            </button>\n          </div>\n\n          {/* 층 진행 컨트롤 */}\n          <div\n            style={{\n              display: \"flex\",\n              gap: \"10px\",\n              alignItems: \"center\",\n              justifyContent: \"center\",\n              padding: \"15px\",\n              background: \"rgba(0, 0, 0, 0.2)\",\n              borderRadius: \"10px\",\n            }}\n          >\n            <button\n              onClick={() => {\n                if (currentDungeon.currentFloor > 1) {\n                  const updatedDungeon = {\n                    ...currentDungeon,\n                    currentFloor: currentDungeon.currentFloor - 1,\n                  };\n                  setCurrentDungeon(updatedDungeon);\n                  setCurrentMonster(null);\n                  addToCombatLog(\n                    `${updatedDungeon.currentFloor}층으로 이동했습니다.`\n                  );\n                  setTimeout(() => {\n                    spawnDungeonMonster(updatedDungeon, true);\n                  }, 1000);\n                }\n              }}\n              disabled={currentDungeon.currentFloor <= 1}\n              style={{\n                background:\n                  currentDungeon.currentFloor <= 1 ? \"#6b7280\" : \"#3b82f6\",\n                color: \"white\",\n                border: \"none\",\n                borderRadius: \"6px\",\n                padding: \"8px 12px\",\n                cursor:\n                  currentDungeon.currentFloor <= 1 ? \"not-allowed\" : \"pointer\",\n                fontSize: \"14px\",\n              }}\n            >\n              ⬆️ 이전 층\n            </button>\n\n            <input\n              type=\"number\"\n              min=\"1\"\n              max={currentDungeon.floors}\n              value={currentDungeon.currentFloor}\n              placeholder=\"층\"\n              onChange={(e) => {\n                const targetFloor = parseInt(e.target.value);\n                if (targetFloor >= 1 && targetFloor <= currentDungeon.floors) {\n                  // Check if all previous floors are cleared\n                  let canMoveTo = true;\n                  for (let i = 1; i < targetFloor; i++) {\n                    if (!currentDungeon.clearedFloors.has(i)) {\n                      canMoveTo = false;\n                      addToCombatLog(\n                        `${i}층을 먼저 클리어해야 ${targetFloor}층으로 이동할 수 있습니다.`\n                      );\n                      break;\n                    }\n                  }\n\n                  if (canMoveTo) {\n                    const updatedDungeon = {\n                      ...currentDungeon,\n                      currentFloor: targetFloor,\n                    };\n                    setCurrentDungeon(updatedDungeon);\n                    setCurrentMonster(null);\n                    addToCombatLog(`${targetFloor}층으로 이동했습니다.`);\n                    setTimeout(() => {\n                      spawnDungeonMonster(updatedDungeon, true);\n                    }, 1000);\n                  }\n                }\n              }}\n              style={{\n                background: \"rgba(255, 255, 255, 0.1)\",\n                color: \"white\",\n                border: \"1px solid rgba(255, 255, 255, 0.3)\",\n                borderRadius: \"6px\",\n                padding: \"8px 12px\",\n                fontSize: \"16px\",\n                fontWeight: \"bold\",\n                textAlign: \"center\",\n                width: \"80px\",\n              }}\n            />\n\n            <button\n              onClick={() => {\n                const nextFloor = currentDungeon.currentFloor + 1;\n                const currentFloorCleared = currentDungeon.clearedFloors.has(\n                  currentDungeon.currentFloor\n                );\n\n                if (\n                  currentDungeon.currentFloor < currentDungeon.floors &&\n                  currentFloorCleared\n                ) {\n                  const updatedDungeon = {\n                    ...currentDungeon,\n                    currentFloor: nextFloor,\n                  };\n                  setCurrentDungeon(updatedDungeon);\n                  setCurrentMonster(null);\n                  addToCombatLog(\n                    `${updatedDungeon.currentFloor}층으로 이동했습니다.`\n                  );\n                  setTimeout(() => {\n                    spawnDungeonMonster(updatedDungeon, true);\n                  }, 1000);\n                } else if (!currentFloorCleared) {\n                  addToCombatLog(\n                    `현재 층에서 적어도 한 마리의 몬스터를 처치해야 다음 층으로 진행할 수 있습니다.`\n                  );\n                }\n              }}\n              disabled={\n                currentDungeon.currentFloor >= currentDungeon.floors ||\n                !currentDungeon.clearedFloors.has(currentDungeon.currentFloor)\n              }\n              style={{\n                background:\n                  currentDungeon.currentFloor >= currentDungeon.floors ||\n                  !currentDungeon.clearedFloors.has(currentDungeon.currentFloor)\n                    ? \"#6b7280\"\n                    : \"#10b981\",\n                color: \"white\",\n                border: \"none\",\n                borderRadius: \"6px\",\n                padding: \"8px 12px\",\n                cursor:\n                  currentDungeon.currentFloor >= currentDungeon.floors ||\n                  !currentDungeon.clearedFloors.has(currentDungeon.currentFloor)\n                    ? \"not-allowed\"\n                    : \"pointer\",\n                fontSize: \"14px\",\n              }}\n            >\n              ⬇️ 다음 층\n            </button>\n          </div>\n        </div>\n\n        {/* 층 진행 상태 표시 */}\n        {showDungeonChoice && (\n          <div\n            style={{\n              background: \"linear-gradient(135deg, #f59e0b 0%, #d97706 100%)\",\n              borderRadius: \"15px\",\n              padding: \"20px\",\n              marginBottom: \"20px\",\n              color: \"white\",\n              textAlign: \"center\",\n            }}\n          >\n            <div\n              style={{\n                fontSize: \"18px\",\n                fontWeight: \"bold\",\n                marginBottom: \"10px\",\n              }}\n            >\n              🏃 다음 층으로 이동 중...\n            </div>\n            <div\n              style={{\n                background: \"rgba(255, 255, 255, 0.2)\",\n                borderRadius: \"10px\",\n                height: \"8px\",\n                overflow: \"hidden\",\n                marginBottom: \"10px\",\n              }}\n            >\n              <div\n                style={{\n                  background: \"linear-gradient(90deg, #10b981, #059669)\",\n                  height: \"100%\",\n                  width: \"100%\",\n                  borderRadius: \"10px\",\n                  animation: \"progress 3s linear\",\n                }}\n              />\n            </div>\n            <div style={{ fontSize: \"14px\", opacity: 0.9 }}>\n              잠시만 기다려주세요...\n            </div>\n          </div>\n        )}\n\n        {/* 전투 영역 - 기존 renderCombatTab과 동일한 전투 시스템 */}\n        {currentMonster && (\n          <div\n            style={{\n              background: \"#374151\",\n              borderRadius: \"15px\",\n              padding: \"20px\",\n              marginBottom: \"20px\",\n            }}\n          >\n            <div\n              style={{\n                display: \"grid\",\n                gridTemplateColumns: \"1fr 1fr\",\n                gap: \"20px\",\n                marginBottom: \"20px\",\n              }}\n            >\n              {/* 캐릭터 */}\n              <div style={{ textAlign: \"center\" }}>\n                <div\n                  style={{\n                    width: \"80px\",\n                    height: \"80px\",\n                    background:\n                      \"linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%)\",\n                    borderRadius: \"50%\",\n                    margin: \"0 auto 10px\",\n                    display: \"flex\",\n                    alignItems: \"center\",\n                    justifyContent: \"center\",\n                    fontSize: \"30px\",\n                  }}\n                >\n                  ⚔️\n                </div>\n                <div style={{ color: \"white\", marginBottom: \"10px\" }}>\n                  {character.name} Lv.{character.level}\n                </div>\n                <div\n                  style={{\n                    background: \"#1f2937\",\n                    borderRadius: \"10px\",\n                    padding: \"5px\",\n                    marginBottom: \"5px\",\n                  }}\n                >\n                  <div\n                    style={{\n                      background:\n                        \"linear-gradient(90deg, #ef4444 0%, #dc2626 100%)\",\n                      height: \"8px\",\n                      borderRadius: \"4px\",\n                      width: `${(character.hp / character.maxHp) * 100}%`,\n                    }}\n                  />\n                  <div\n                    style={{\n                      color: \"white\",\n                      fontSize: \"12px\",\n                      marginTop: \"5px\",\n                    }}\n                  >\n                    HP: {character.hp}/{character.maxHp}\n                  </div>\n                </div>\n              </div>\n\n              {/* 몬스터 */}\n              <div style={{ textAlign: \"center\" }}>\n                <div\n                  style={{\n                    width: \"80px\",\n                    height: \"80px\",\n                    background:\n                      \"linear-gradient(135deg, #dc2626 0%, #991b1b 100%)\",\n                    borderRadius: \"50%\",\n                    margin: \"0 auto 10px\",\n                    display: \"flex\",\n                    alignItems: \"center\",\n                    justifyContent: \"center\",\n                    fontSize: \"30px\",\n                  }}\n                >\n                  👹\n                </div>\n                <div style={{ color: \"white\", marginBottom: \"10px\" }}>\n                  {currentMonster.name} Lv.{currentMonster.level}\n                  {currentMonster.isBoss && (\n                    <span style={{ color: \"#fbbf24\" }}> 👑</span>\n                  )}\n                </div>\n                <div\n                  style={{\n                    background: \"#1f2937\",\n                    borderRadius: \"10px\",\n                    padding: \"5px\",\n                    marginBottom: \"5px\",\n                  }}\n                >\n                  <div\n                    style={{\n                      background:\n                        \"linear-gradient(90deg, #ef4444 0%, #dc2626 100%)\",\n                      height: \"8px\",\n                      borderRadius: \"4px\",\n                      width: `${\n                        (currentMonster.hp / currentMonster.maxHp) * 100\n                      }%`,\n                    }}\n                  />\n                  <div\n                    style={{\n                      color: \"white\",\n                      fontSize: \"12px\",\n                      marginTop: \"5px\",\n                    }}\n                  >\n                    HP: {currentMonster.hp}/{currentMonster.maxHp}\n                  </div>\n                </div>\n              </div>\n            </div>\n\n            {/* 전투 버튼들 */}\n            <div\n              style={{\n                display: \"flex\",\n                gap: \"10px\",\n                justifyContent: \"center\",\n                marginBottom: \"20px\",\n              }}\n            >\n              <button\n                onClick={attack}\n                disabled={character.hp <= 0}\n                style={{\n                  background:\n                    \"linear-gradient(135deg, #ef4444 0%, #dc2626 100%)\",\n                  color: \"white\",\n                  border: \"none\",\n                  borderRadius: \"10px\",\n                  padding: \"12px 24px\",\n                  fontSize: \"16px\",\n                  fontWeight: \"bold\",\n                  cursor: character.hp > 0 ? \"pointer\" : \"not-allowed\",\n                  opacity: character.hp > 0 ? 1 : 0.5,\n                }}\n              >\n                ⚔️ 공격\n              </button>\n              <button\n                onClick={() => setIsAutoFighting(!isAutoFighting)}\n                style={{\n                  background: isAutoFighting\n                    ? \"linear-gradient(135deg, #dc2626 0%, #991b1b 100%)\"\n                    : \"linear-gradient(135deg, #10b981 0%, #059669 100%)\",\n                  color: \"white\",\n                  border: \"none\",\n                  borderRadius: \"10px\",\n                  padding: \"12px 24px\",\n                  fontSize: \"16px\",\n                  fontWeight: \"bold\",\n                  cursor: \"pointer\",\n                }}\n              >\n                {isAutoFighting ? \"⏸️ 자동 중지\" : \"▶️ 자동 전투\"}\n              </button>\n            </div>\n\n            {/* 스킬 버튼들 */}\n            {character.skills.filter(\n              (skill) =>\n                skill.type === \"active\" && skill.isLearned && skill.level > 0\n            ).length > 0 && (\n              <div style={{ marginBottom: \"20px\" }}>\n                <h4\n                  style={{\n                    color: \"white\",\n                    marginBottom: \"10px\",\n                    textAlign: \"center\",\n                    fontSize: \"16px\",\n                  }}\n                >\n                  ✨ 스킬 사용 (MP: {character.mp}/{character.maxMp})\n                </h4>\n                <div\n                  style={{\n                    display: \"flex\",\n                    gap: \"8px\",\n                    justifyContent: \"center\",\n                    flexWrap: \"wrap\",\n                  }}\n                >\n                  {character.skills\n                    .filter(\n                      (skill) =>\n                        skill.type === \"active\" &&\n                        skill.isLearned &&\n                        skill.level > 0\n                    )\n                    .map((skill) => (\n                      <button\n                        key={skill.id}\n                        onClick={() => castSkill(skill)}\n                        disabled={\n                          character.hp <= 0 ||\n                          skill.currentCooldown > 0 ||\n                          character.mp < skill.manaCost\n                        }\n                        style={{\n                          background:\n                            character.hp > 0 &&\n                            skill.currentCooldown === 0 &&\n                            character.mp >= skill.manaCost\n                              ? \"linear-gradient(135deg, #7c3aed 0%, #a855f7 100%)\"\n                              : \"#4b5563\",\n                          color: \"white\",\n                          border: \"none\",\n                          borderRadius: \"8px\",\n                          padding: \"10px 16px\",\n                          fontSize: \"14px\",\n                          fontWeight: \"bold\",\n                          cursor:\n                            character.hp > 0 &&\n                            skill.currentCooldown === 0 &&\n                            character.mp >= skill.manaCost\n                              ? \"pointer\"\n                              : \"not-allowed\",\n                          opacity:\n                            character.hp > 0 &&\n                            skill.currentCooldown === 0 &&\n                            character.mp >= skill.manaCost\n                              ? 1\n                              : 0.6,\n                          position: \"relative\",\n                        }}\n                        title={`${\n                          skill.description\n                        }\\n대미지: ${calculateSkillDamage(\n                          skill,\n                          character\n                        )} | 마나: ${skill.manaCost}`}\n                      >\n                        <div>{skill.name}</div>\n                        <div style={{ fontSize: \"10px\", opacity: 0.8 }}>\n                          MP: {skill.manaCost}\n                          {skill.currentCooldown > 0 && (\n                            <> | {(skill.currentCooldown / 1000).toFixed(1)}s</>\n                          )}\n                        </div>\n                      </button>\n                    ))}\n                </div>\n              </div>\n            )}\n\n            {/* 물약 버튼들 */}\n            {inventory.filter((item) => item.type === \"consumable\").length >\n              0 && (\n              <div style={{ marginBottom: \"20px\" }}>\n                <h4\n                  style={{\n                    color: \"white\",\n                    marginBottom: \"10px\",\n                    textAlign: \"center\",\n                    fontSize: \"16px\",\n                  }}\n                >\n                  🧪 물약 사용\n                </h4>\n                <div\n                  style={{\n                    display: \"flex\",\n                    gap: \"8px\",\n                    justifyContent: \"center\",\n                    flexWrap: \"wrap\",\n                  }}\n                >\n                  {inventory\n                    .filter((item) => item.type === \"consumable\")\n                    .map((item) => (\n                      <button\n                        key={item.id}\n                        onClick={() => consumeItem(item)}\n                        disabled={character.hp <= 0}\n                        style={{\n                          background:\n                            character.hp > 0\n                              ? `linear-gradient(135deg, ${getRarityColor(\n                                  item.rarity\n                                )} 0%, #374151 100%)`\n                              : \"#4b5563\",\n                          color: \"white\",\n                          border: \"none\",\n                          borderRadius: \"8px\",\n                          padding: \"8px 12px\",\n                          fontSize: \"12px\",\n                          fontWeight: \"bold\",\n                          cursor: character.hp > 0 ? \"pointer\" : \"not-allowed\",\n                          opacity: character.hp > 0 ? 1 : 0.6,\n                          position: \"relative\",\n                        }}\n                        title={`${item.name}\\n${\n                          item.consumableEffect?.healHp\n                            ? `HP +${item.consumableEffect.healHp}`\n                            : \"\"\n                        }${\n                          item.consumableEffect?.healMp\n                            ? `MP +${item.consumableEffect.healMp}`\n                            : \"\"\n                        }${\n                          item.consumableEffect?.buffType\n                            ? `${item.consumableEffect.buffType} +${item.consumableEffect.buffAmount}`\n                            : \"\"\n                        }`}\n                      >\n                        <div>{item.name}</div>\n                        <div style={{ fontSize: \"10px\", opacity: 0.8 }}>\n                          {item.quantity && item.quantity > 1\n                            ? `x${item.quantity}`\n                            : \"\"}\n                          {item.consumableEffect?.healHp &&\n                            ` HP+${item.consumableEffect.healHp}`}\n                          {item.consumableEffect?.healMp &&\n                            ` MP+${item.consumableEffect.healMp}`}\n                        </div>\n                      </button>\n                    ))}\n                </div>\n              </div>\n            )}\n\n            {/* 전투 로그 */}\n            <div\n              style={{\n                background: \"#1f2937\",\n                borderRadius: \"10px\",\n                padding: \"15px\",\n                height: \"200px\",\n                overflowY: \"auto\",\n                fontSize: \"14px\",\n              }}\n            >\n              <div\n                style={{\n                  color: \"#9ca3af\",\n                  marginBottom: \"10px\",\n                  fontWeight: \"bold\",\n                }}\n              >\n                전투 로그:\n              </div>\n              {combatLog.slice(-10).map((log, index) => (\n                <div\n                  key={index}\n                  style={{\n                    color: \"#e5e7eb\",\n                    marginBottom: \"5px\",\n                    lineHeight: \"1.4\",\n                  }}\n                >\n                  {log}\n                </div>\n              ))}\n            </div>\n          </div>\n        )}\n      </div>\n    );\n  };\n\n  // 캐릭터 탭 렌더링 (RPG 스타일 UI)\n  const renderCharacterTab = () => (\n    <div style={{ padding: \"20px\", background: \"#1f2937\", minHeight: \"600px\" }}>\n      {/* 공통 캐릭터 헤더 */}\n      {renderCharacterHeader()}\n\n      {/* 메인 캐릭터 창 - RPG 스타일 */}\n      <div\n        style={{\n          background: \"linear-gradient(135deg, #1e293b 0%, #334155 100%)\",\n          border: \"2px solid #475569\",\n          borderRadius: \"12px\",\n          padding: \"20px\",\n          display: \"flex\",\n          gap: \"30px\",\n          minHeight: \"500px\",\n        }}\n      >\n        {/* 좌측: 장비 슬롯 영역 */}\n        <div style={{ flex: \"0 0 300px\" }}>\n          <h3\n            style={{\n              color: \"#f1f5f9\",\n              margin: \"0 0 20px 0\",\n              fontSize: \"18px\",\n              fontWeight: \"bold\",\n              textAlign: \"center\",\n            }}\n          >\n            ⚔️ 장비\n          </h3>\n\n          {/* 장비 슬롯 그리드 */}\n          <div\n            style={{\n              display: \"grid\",\n              gridTemplateColumns: \"repeat(3, 1fr)\",\n              gap: \"10px\",\n              marginBottom: \"20px\",\n            }}\n          >\n            {/* 투구 */}\n            {renderEquipmentSlot(\"helmet\", \"⛑️\")}\n            <div></div> {/* 빈 공간 */}\n            <div></div> {/* 빈 공간 */}\n            {/* 반지 */}\n            {renderEquipmentSlot(\"ring\", \"💍\")}\n            {/* 갑옷 */}\n            {renderEquipmentSlot(\"armor\", \"🛡️\")}\n            {/* 무기 */}\n            {renderEquipmentSlot(\"weapon\", \"⚔️\")}\n            {/* 신발 */}\n            {renderEquipmentSlot(\"boots\", \"👢\")}\n            {/* 목걸이 */}\n            {renderEquipmentSlot(\"amulet\", \"📿\")}\n            <div></div> {/* 빈 공간 */}\n          </div>\n        </div>\n\n        {/* 우측: 능력치 정보 영역 */}\n        <div style={{ flex: \"1\" }}>\n          {/* 사용 가능한 포인트 */}\n          {character.stats.availablePoints > 0 && (\n            <div\n              style={{\n                background: \"rgba(16, 185, 129, 0.2)\",\n                border: \"1px solid #10b981\",\n                borderRadius: \"8px\",\n                padding: \"12px\",\n                marginBottom: \"20px\",\n                textAlign: \"center\",\n              }}\n            >\n              <div\n                style={{\n                  color: \"#10b981\",\n                  fontSize: \"16px\",\n                  fontWeight: \"bold\",\n                }}\n              >\n                사용 가능한 포인트: {character.stats.availablePoints}\n              </div>\n            </div>\n          )}\n\n          {/* 기본 능력치 */}\n          <div\n            style={{\n              background: \"rgba(15, 23, 42, 0.8)\",\n              border: \"1px solid #475569\",\n              borderRadius: \"8px\",\n              padding: \"15px\",\n              marginBottom: \"20px\",\n            }}\n          >\n            <h4\n              style={{\n                color: \"#f1f5f9\",\n                margin: \"0 0 15px 0\",\n                fontSize: \"16px\",\n                fontWeight: \"bold\",\n              }}\n            >\n              📊 기본 능력치\n            </h4>\n\n            {/* 능력치 리스트 */}\n            {[\n              {\n                key: \"strength\",\n                name: \"힘\",\n                icon: \"💪\",\n                color: \"#dc2626\",\n                bonus: character.stats.strength * 2,\n                bonusType: \"공격력\",\n              },\n              {\n                key: \"agility\",\n                name: \"민첩성\",\n                icon: \"⚡\",\n                color: \"#10b981\",\n                bonus: character.stats.agility,\n                bonusType: \"속도\",\n              },\n              {\n                key: \"vitality\",\n                name: \"체력\",\n                icon: \"🛡️\",\n                color: \"#3b82f6\",\n                bonus: character.stats.vitality * 10,\n                bonusType: \"HP\",\n              },\n              {\n                key: \"intelligence\",\n                name: \"지능\",\n                icon: \"🧠\",\n                color: \"#7c3aed\",\n                bonus: character.stats.intelligence * 5,\n                bonusType: \"MP\",\n              },\n            ].map((stat) => (\n              <div\n                key={stat.key}\n                style={{\n                  display: \"flex\",\n                  justifyContent: \"space-between\",\n                  alignItems: \"center\",\n                  padding: \"8px 0\",\n                  borderBottom: \"1px solid rgba(71, 85, 105, 0.3)\",\n                }}\n              >\n                <div\n                  style={{ display: \"flex\", alignItems: \"center\", gap: \"10px\" }}\n                >\n                  <span style={{ fontSize: \"16px\" }}>{stat.icon}</span>\n                  <span style={{ color: \"#f1f5f9\", fontSize: \"14px\" }}>\n                    {stat.name}\n                  </span>\n                  <span\n                    style={{\n                      color: stat.color,\n                      fontSize: \"16px\",\n                      fontWeight: \"bold\",\n                    }}\n                  >\n                    {character.stats[stat.key as keyof typeof character.stats]}\n                  </span>\n                </div>\n                <div\n                  style={{ display: \"flex\", alignItems: \"center\", gap: \"10px\" }}\n                >\n                  <span style={{ color: stat.color, fontSize: \"12px\" }}>\n                    +{stat.bonus} {stat.bonusType}\n                  </span>\n                  <button\n                    onClick={() =>\n                      allocateStat(stat.key as keyof CharacterStats)\n                    }\n                    disabled={character.stats.availablePoints <= 0}\n                    style={{\n                      background:\n                        character.stats.availablePoints > 0\n                          ? stat.color\n                          : \"#4b5563\",\n                      color: \"white\",\n                      border: \"none\",\n                      borderRadius: \"4px\",\n                      padding: \"4px 8px\",\n                      fontSize: \"12px\",\n                      cursor:\n                        character.stats.availablePoints > 0\n                          ? \"pointer\"\n                          : \"not-allowed\",\n                      minWidth: \"24px\",\n                    }}\n                  >\n                    +\n                  </button>\n                </div>\n              </div>\n            ))}\n          </div>\n\n          {/* 전투 능력치 */}\n          <div\n            style={{\n              background: \"rgba(15, 23, 42, 0.8)\",\n              border: \"1px solid #475569\",\n              borderRadius: \"8px\",\n              padding: \"15px\",\n            }}\n          >\n            <h4\n              style={{\n                color: \"#f1f5f9\",\n                margin: \"0 0 15px 0\",\n                fontSize: \"16px\",\n                fontWeight: \"bold\",\n              }}\n            >\n              ⚔️ 전투 능력치\n            </h4>\n\n            <div\n              style={{\n                display: \"grid\",\n                gridTemplateColumns: \"1fr 1fr\",\n                gap: \"15px\",\n              }}\n            >\n              <div>\n                <div\n                  style={{\n                    color: \"#dc2626\",\n                    fontSize: \"14px\",\n                    fontWeight: \"bold\",\n                  }}\n                >\n                  공격력\n                </div>\n                <div\n                  style={{\n                    color: \"#f1f5f9\",\n                    fontSize: \"18px\",\n                    fontWeight: \"bold\",\n                  }}\n                >\n                  {character.attack}\n                </div>\n              </div>\n              <div>\n                <div\n                  style={{\n                    color: \"#3b82f6\",\n                    fontSize: \"14px\",\n                    fontWeight: \"bold\",\n                  }}\n                >\n                  방어력\n                </div>\n                <div\n                  style={{\n                    color: \"#f1f5f9\",\n                    fontSize: \"18px\",\n                    fontWeight: \"bold\",\n                  }}\n                >\n                  {character.defense}\n                </div>\n              </div>\n              <div>\n                <div\n                  style={{\n                    color: \"#ef4444\",\n                    fontSize: \"14px\",\n                    fontWeight: \"bold\",\n                  }}\n                >\n                  체력\n                </div>\n                <div style={{ color: \"#f1f5f9\", fontSize: \"16px\" }}>\n                  {character.hp} / {character.maxHp}\n                </div>\n              </div>\n              <div>\n                <div\n                  style={{\n                    color: \"#8b5cf6\",\n                    fontSize: \"14px\",\n                    fontWeight: \"bold\",\n                  }}\n                >\n                  마나\n                </div>\n                <div style={{ color: \"#f1f5f9\", fontSize: \"16px\" }}>\n                  {character.mp} / {character.maxMp}\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n\n  // 장비 슬롯 렌더링 함수\n  const renderEquipmentSlot = (slot: keyof Equipment, icon: string) => {\n    const item = character.equipment[slot];\n    const rarityColor =\n      item?.rarity === \"legendary\"\n        ? \"#f59e0b\"\n        : item?.rarity === \"epic\"\n        ? \"#a855f7\"\n        : item?.rarity === \"rare\"\n        ? \"#3b82f6\"\n        : item?.rarity === \"mythic\"\n        ? \"#ef4444\"\n        : \"#9ca3af\";\n\n    return (\n      <div\n        style={{\n          width: \"70px\",\n          height: \"70px\",\n          background: item\n            ? \"rgba(16, 185, 129, 0.2)\"\n            : \"rgba(71, 85, 105, 0.3)\",\n          border: item ? `2px solid ${rarityColor}` : \"2px solid #475569\",\n          borderRadius: \"8px\",\n          display: \"flex\",\n          flexDirection: \"column\",\n          alignItems: \"center\",\n          justifyContent: \"center\",\n          position: \"relative\",\n          cursor: item ? \"pointer\" : \"default\",\n        }}\n      >\n        {item ? (\n          <>\n            <div style={{ fontSize: \"24px\" }}>{icon}</div>\n            <div\n              style={{\n                fontSize: \"8px\",\n                color: rarityColor,\n                fontWeight: \"bold\",\n                textAlign: \"center\",\n                lineHeight: \"1\",\n              }}\n            >\n              {item.name.length > 6\n                ? item.name.substring(0, 6) + \"...\"\n                : item.name}\n            </div>\n            <button\n              onClick={() => unequipItem(slot)}\n              style={{\n                position: \"absolute\",\n                top: \"-5px\",\n                right: \"-5px\",\n                background: \"#dc2626\",\n                color: \"white\",\n                border: \"none\",\n                borderRadius: \"50%\",\n                width: \"16px\",\n                height: \"16px\",\n                fontSize: \"10px\",\n                cursor: \"pointer\",\n                display: \"flex\",\n                alignItems: \"center\",\n                justifyContent: \"center\",\n              }}\n            >\n              ×\n            </button>\n          </>\n        ) : (\n          <div style={{ fontSize: \"24px\", opacity: 0.3 }}>{icon}</div>\n        )}\n      </div>\n    );\n  };\n\n  // 인벤토리 탭 렌더링\n  // 아이템 아이콘 맵핑\n  const getItemIcon = (item: Item) => {\n    const iconMap: { [key: string]: string } = {\n      // 무기\n      \"iron-sword\": \"⚔️\",\n      \"steel-sword\": \"🗡️\",\n      \"magic-sword\": \"⚡\",\n      \"legendary-sword\": \"🔥\",\n      \"dragon-slayer\": \"🐉\",\n      // 방어구\n      \"leather-armor\": \"🛡️\",\n      \"iron-armor\": \"⛨\",\n      \"steel-armor\": \"🛡️\",\n      \"magic-armor\": \"✨\",\n      \"dragon-armor\": \"🔮\",\n      // 헬멧\n      \"iron-helmet\": \"⛑️\",\n      \"steel-helmet\": \"👑\",\n      \"magic-helmet\": \"💎\",\n      // 부츠\n      \"leather-boots\": \"👢\",\n      \"iron-boots\": \"🥾\",\n      \"steel-boots\": \"👢\",\n      \"magic-boots\": \"⚡\",\n      // 반지/목걸이\n      \"power-ring\": \"💍\",\n      \"magic-ring\": \"💫\",\n      \"health-ring\": \"❤️\",\n      \"defense-ring\": \"🛡️\",\n      // 소모품\n      \"health-potion\": \"🧪\",\n      \"mana-potion\": \"💙\",\n      \"strength-potion\": \"💪\",\n      \"defense-potion\": \"🛡️\",\n    };\n    return iconMap[item.id] || \"📦\";\n  };\n\n  // 선택된 아이템 상세 정보\n  const [selectedItem, setSelectedItem] = useState<Item | null>(null);\n\n  const renderInventoryTab = () => (\n    <div style={{ padding: \"20px\", background: \"#1f2937\", minHeight: \"600px\" }}>\n      {/* 공통 캐릭터 헤더 */}\n      {renderCharacterHeader()}\n\n      <div style={{ display: \"flex\", gap: \"20px\" }}>\n        {/* 인벤토리 그리드 */}\n        <div style={{ flex: 1 }}>\n          <h3 style={{ color: \"white\", marginBottom: \"15px\" }}>\n            📦 소지품 ({inventory.length}/50)\n          </h3>\n          <div\n            style={{\n              display: \"grid\",\n              gridTemplateColumns: \"repeat(10, 1fr)\",\n              gap: \"4px\",\n              background: \"rgba(0, 0, 0, 0.3)\",\n              padding: \"15px\",\n              borderRadius: \"10px\",\n              border: \"2px solid #4b5563\",\n            }}\n          >\n            {/* 인벤토리 슬롯 50개 */}\n            {Array.from({ length: 50 }, (_, index) => {\n              const item = inventory[index];\n              const isEmpty = !item;\n\n              return (\n                <div\n                  key={index}\n                  onClick={() => item && setSelectedItem(item)}\n                  style={{\n                    width: \"50px\",\n                    height: \"50px\",\n                    background: isEmpty\n                      ? \"rgba(255, 255, 255, 0.05)\"\n                      : \"rgba(255, 255, 255, 0.1)\",\n                    border: isEmpty\n                      ? \"1px solid #374151\"\n                      : `2px solid ${getRarityColor(item.rarity)}`,\n                    borderRadius: \"8px\",\n                    display: \"flex\",\n                    flexDirection: \"column\",\n                    alignItems: \"center\",\n                    justifyContent: \"center\",\n                    cursor: item ? \"pointer\" : \"default\",\n                    position: \"relative\",\n                    transition: \"all 0.2s ease\",\n                  }}\n                  onMouseEnter={(e) => {\n                    if (item) {\n                      e.currentTarget.style.transform = \"scale(1.05)\";\n                      e.currentTarget.style.boxShadow = `0 0 15px ${getRarityColor(\n                        item.rarity\n                      )}50`;\n                    }\n                  }}\n                  onMouseLeave={(e) => {\n                    if (item) {\n                      e.currentTarget.style.transform = \"scale(1)\";\n                      e.currentTarget.style.boxShadow = \"none\";\n                    }\n                  }}\n                >\n                  {item && (\n                    <>\n                      <div style={{ fontSize: \"24px\" }}>\n                        {getItemIcon(item)}\n                      </div>\n                      {/* 수량 표시 (같은 아이템이 여러 개일 때) */}\n                      {inventory.filter((inv) => inv.name === item.name)\n                        .length > 1 && (\n                        <div\n                          style={{\n                            position: \"absolute\",\n                            bottom: \"2px\",\n                            right: \"2px\",\n                            background: \"#000\",\n                            color: \"white\",\n                            fontSize: \"10px\",\n                            padding: \"1px 3px\",\n                            borderRadius: \"3px\",\n                            lineHeight: \"1\",\n                          }}\n                        >\n                          {\n                            inventory.filter((inv) => inv.name === item.name)\n                              .length\n                          }\n                        </div>\n                      )}\n                    </>\n                  )}\n                </div>\n              );\n            })}\n          </div>\n        </div>\n\n        {/* 아이템 상세 정보 */}\n        <div style={{ width: \"300px\" }}>\n          <h3 style={{ color: \"white\", marginBottom: \"15px\" }}>\n            📋 아이템 정보\n          </h3>\n          {selectedItem ? (\n            <div\n              style={{\n                background: \"rgba(255, 255, 255, 0.1)\",\n                border: `2px solid ${getRarityColor(selectedItem.rarity)}`,\n                borderRadius: \"10px\",\n                padding: \"20px\",\n              }}\n            >\n              <div style={{ textAlign: \"center\", marginBottom: \"15px\" }}>\n                <div style={{ fontSize: \"48px\", marginBottom: \"10px\" }}>\n                  {getItemIcon(selectedItem)}\n                </div>\n                <h4\n                  style={{\n                    color: getRarityColor(selectedItem.rarity),\n                    margin: \"0 0 5px 0\",\n                    fontSize: \"18px\",\n                    fontWeight: \"bold\",\n                  }}\n                >\n                  {selectedItem.name}\n                </h4>\n                <p\n                  style={{\n                    color: \"#9ca3af\",\n                    margin: \"0 0 15px 0\",\n                    fontSize: \"14px\",\n                    textTransform: \"capitalize\",\n                  }}\n                >\n                  {selectedItem.type} • {selectedItem.rarity}\n                </p>\n              </div>\n\n              {/* 능력치 */}\n              {selectedItem.stats &&\n                Object.keys(selectedItem.stats).length > 0 && (\n                  <div style={{ marginBottom: \"15px\" }}>\n                    <h5\n                      style={{\n                        color: \"white\",\n                        margin: \"0 0 10px 0\",\n                        fontSize: \"14px\",\n                      }}\n                    >\n                      능력치\n                    </h5>\n                    {Object.entries(selectedItem.stats).map(([stat, value]) => (\n                      <div\n                        key={stat}\n                        style={{\n                          display: \"flex\",\n                          justifyContent: \"space-between\",\n                          color: \"#10b981\",\n                          fontSize: \"12px\",\n                          marginBottom: \"5px\",\n                        }}\n                      >\n                        <span>\n                          {stat === \"attack\"\n                            ? \"공격력\"\n                            : stat === \"defense\"\n                            ? \"방어력\"\n                            : stat === \"hp\"\n                            ? \"체력\"\n                            : stat === \"mp\"\n                            ? \"마나\"\n                            : stat}\n                        </span>\n                        <span>+{value}</span>\n                      </div>\n                    ))}\n                  </div>\n                )}\n\n              {/* 가격 */}\n              <div style={{ marginBottom: \"15px\" }}>\n                <h5\n                  style={{\n                    color: \"white\",\n                    margin: \"0 0 10px 0\",\n                    fontSize: \"14px\",\n                  }}\n                >\n                  가격\n                </h5>\n                <p style={{ color: \"#f59e0b\", fontSize: \"12px\", margin: 0 }}>\n                  {selectedItem.price.toLocaleString()}G\n                </p>\n              </div>\n\n              {/* 액션 버튼 */}\n              <div\n                style={{\n                  display: \"flex\",\n                  flexDirection: \"column\",\n                  gap: \"10px\",\n                }}\n              >\n                {selectedItem.type !== \"consumable\" && (\n                  <button\n                    onClick={() => {\n                      equipItem(selectedItem);\n                      setSelectedItem(null);\n                    }}\n                    style={{\n                      background:\n                        \"linear-gradient(135deg, #10b981 0%, #059669 100%)\",\n                      color: \"white\",\n                      border: \"none\",\n                      borderRadius: \"6px\",\n                      padding: \"10px\",\n                      fontSize: \"14px\",\n                      cursor: \"pointer\",\n                      fontWeight: \"bold\",\n                    }}\n                  >\n                    장착\n                  </button>\n                )}\n                {selectedItem.type === \"consumable\" && (\n                  <button\n                    onClick={() => {\n                      // 사용 로직 (임시)\n                      console.log(\"Use item:\", selectedItem.name);\n                      setSelectedItem(null);\n                    }}\n                    style={{\n                      background:\n                        \"linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%)\",\n                      color: \"white\",\n                      border: \"none\",\n                      borderRadius: \"6px\",\n                      padding: \"10px\",\n                      fontSize: \"14px\",\n                      cursor: \"pointer\",\n                      fontWeight: \"bold\",\n                    }}\n                  >\n                    사용\n                  </button>\n                )}\n                <button\n                  onClick={() => {\n                    const sellPrice = Math.floor(selectedItem.price * 0.7);\n                    setCharacter((prev) => ({\n                      ...prev,\n                      gold: prev.gold + sellPrice,\n                    }));\n                    setInventory((prev) =>\n                      prev.filter((invItem) => invItem.id !== selectedItem.id)\n                    );\n                    addToCombatLog(\n                      `${selectedItem.name}을 ${sellPrice} 골드에 판매했습니다!`\n                    );\n                    setSelectedItem(null);\n                  }}\n                  style={{\n                    background: \"#dc2626\",\n                    color: \"white\",\n                    border: \"none\",\n                    borderRadius: \"6px\",\n                    padding: \"10px\",\n                    fontSize: \"14px\",\n                    cursor: \"pointer\",\n                  }}\n                >\n                  판매 ({Math.floor(selectedItem.price * 0.7)}G)\n                </button>\n              </div>\n            </div>\n          ) : (\n            <div\n              style={{\n                background: \"rgba(255, 255, 255, 0.05)\",\n                borderRadius: \"10px\",\n                padding: \"40px\",\n                textAlign: \"center\",\n                color: \"#6b7280\",\n              }}\n            >\n              <p>아이템을 클릭하여 정보를 확인하세요</p>\n            </div>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n\n  // 상점 카테고리 상태\n  const [shopCategory, setShopCategory] = useState<'buy' | 'sell' | 'craft'>('buy');\n  const [selectedShopItem, setSelectedShopItem] = useState<Item | null>(null);\n\n  const renderShopTab = () => (\n    <div style={{ padding: '20px', background: '#1f2937', minHeight: '600px' }}>\n      {/* 공통 캐릭터 헤더 */}\n      {renderCharacterHeader()}\n\n      {/* 상점 카테고리 탭 */}\n      <div style={{\n        display: 'flex',\n        background: 'rgba(255, 255, 255, 0.1)',\n        borderRadius: '10px',\n        marginBottom: '20px',\n        overflow: 'hidden'\n      }}>\n        {[\n          { id: 'buy', label: '구매', icon: '🛒', color: '#10b981' },\n          { id: 'sell', label: '판매', icon: '💰', color: '#f59e0b' },\n          { id: 'craft', label: '제작구매', icon: '⚒️', color: '#8b5cf6' }\n        ].map(tab => (\n          <button\n            key={tab.id}\n            onClick={() => setShopCategory(tab.id as any)}\n            style={{\n              flex: 1,\n              padding: '15px 20px',\n              background: shopCategory === tab.id \n                ? `linear-gradient(135deg, ${tab.color} 0%, ${tab.color}AA 100%)`\n                : 'transparent',\n              color: shopCategory === tab.id ? 'white' : '#9ca3af',\n              border: 'none',\n              cursor: 'pointer',\n              fontSize: '14px',\n              fontWeight: shopCategory === tab.id ? 'bold' : 'normal',\n              transition: 'all 0.3s ease',\n              display: 'flex',\n              alignItems: 'center',\n              justifyContent: 'center',\n              gap: '8px'\n            }}\n          >\n            <span>{tab.icon}</span>\n            <span>{tab.label}</span>\n          </button>\n        ))}\n      </div>\n\n      <div style={{ display: 'flex', gap: '20px' }}>\n        {/* 좌측 아이템 그리드 */}\n        <div style={{ flex: 1 }}>\n          <h3 style={{ color: 'white', marginBottom: '15px', fontSize: '16px' }}>\n            {shopCategory === 'buy' ? '🛒 구매 가능 아이템' : \n             shopCategory === 'sell' ? '💰 판매 가능 아이템' : '⚒️ 제작 가능 아이템'}\n          </h3>\n          \n          <div style={{\n            display: 'grid',\n            gridTemplateColumns: 'repeat(8, 1fr)',\n            gap: '6px',\n            background: 'rgba(0, 0, 0, 0.3)',\n            padding: '15px',\n            borderRadius: '10px',\n            border: '2px solid #4b5563',\n            minHeight: '400px'\n          }}>\n            {/* 상점 아이템 그리드 */}\n            {Array.from({ length: 32 }, (_, index) => {\n              let items: Item[] = [];\n              \n              if (shopCategory === 'buy') {\n                items = shop;\n              } else if (shopCategory === 'sell') {\n                items = inventory.filter(item => item.type !== 'consumable');\n              } else {\n                // 제작 아이템 (임시로 상점 아이템 사용)\n                items = shop.filter(item => item.rarity === 'epic' || item.rarity === 'legendary');\n              }\n              \n              const item = items[index];\n              const isEmpty = !item;\n              const canAfford = shopCategory === 'buy' ? character.gold >= (item?.price || 0) : true;\n              \n              return (\n                <div\n                  key={index}\n                  onClick={() => item && setSelectedShopItem(item)}\n                  style={{\n                    width: '50px',\n                    height: '50px',\n                    background: isEmpty ? 'rgba(255, 255, 255, 0.05)' : \n                      canAfford ? 'rgba(16, 185, 129, 0.1)' : 'rgba(107, 114, 128, 0.1)',\n                    border: isEmpty ? '1px solid #374151' : \n                      `2px solid ${getRarityColor(item.rarity)}`,\n                    borderRadius: '8px',\n                    display: 'flex',\n                    flexDirection: 'column',\n                    alignItems: 'center',\n                    justifyContent: 'center',\n                    cursor: item ? 'pointer' : 'default',\n                    position: 'relative',\n                    transition: 'all 0.2s ease'\n                  }}\n                  onMouseEnter={(e) => {\n                    if (item) {\n                      e.currentTarget.style.transform = 'scale(1.1)';\n                      e.currentTarget.style.boxShadow = `0 0 15px ${getRarityColor(item.rarity)}50`;\n                    }\n                  }}\n                  onMouseLeave={(e) => {\n                    if (item) {\n                      e.currentTarget.style.transform = 'scale(1)';\n                      e.currentTarget.style.boxShadow = 'none';\n                    }\n                  }}\n                >\n                  {item && (\n                    <>\n                      <div style={{ \n                        fontSize: '20px',\n                        opacity: canAfford ? 1 : 0.5\n                      }}>\n                        {getItemIcon(item)}\n                      </div>\n                      {/* 가격/수량 표시 */}\n                      {shopCategory === 'buy' && (\n                        <div style={{\n                          position: 'absolute',\n                          bottom: '2px',\n                          right: '2px',\n                          background: canAfford ? '#10b981' : '#dc2626',\n                          color: 'white',\n                          fontSize: '8px',\n                          padding: '1px 3px',\n                          borderRadius: '3px',\n                          lineHeight: '1'\n                        }}>\n                          {item.price >= 1000 ? `${Math.floor(item.price/1000)}K` : item.price}\n                        </div>\n                      )}\n                      {shopCategory === 'sell' && (\n                        <div style={{\n                          position: 'absolute',\n                          bottom: '2px',\n                          right: '2px',\n                          background: '#f59e0b',\n                          color: 'white',\n                          fontSize: '8px',\n                          padding: '1px 3px',\n                          borderRadius: '3px',\n                          lineHeight: '1'\n                        }}>\n                          {Math.floor(item.price * 0.7)}\n                        </div>\n                      )}\n                    </>\n                  )}\n                </div>\n              );\n            })}\n          </div>\n        </div>\n\n        {/* 우측 아이템 상세 정보 */}\n        <div style={{ width: '300px' }}>\n          <h3 style={{ color: 'white', marginBottom: '15px', fontSize: '16px' }}>📋 상품 정보</h3>\n          {selectedShopItem ? (\n            <div style={{\n              background: 'rgba(255, 255, 255, 0.1)',\n              border: `2px solid ${getRarityColor(selectedShopItem.rarity)}`,\n              borderRadius: '10px',\n              padding: '20px'\n            }}>\n              <div style={{ textAlign: 'center', marginBottom: '15px' }}>\n                <div style={{ fontSize: '48px', marginBottom: '10px' }}>\n                  {getItemIcon(selectedShopItem)}\n                </div>\n                <h4 style={{\n                  color: getRarityColor(selectedShopItem.rarity),\n                  margin: '0 0 5px 0',\n                  fontSize: '18px',\n                  fontWeight: 'bold'\n                }}>\n                  {selectedShopItem.name}\n                </h4>\n                <p style={{\n                  color: '#9ca3af',\n                  margin: '0 0 15px 0',\n                  fontSize: '14px',\n                  textTransform: 'capitalize'\n                }}>\n                  {selectedShopItem.type} • Lv.{selectedShopItem.level} • {selectedShopItem.rarity}\n                </p>\n              </div>\n\n              {/* 아이템 능력치 */}\n              {selectedShopItem.stats && Object.keys(selectedShopItem.stats).length > 0 && (\n                <div style={{ marginBottom: '15px' }}>\n                  <h5 style={{ color: 'white', margin: '0 0 10px 0', fontSize: '14px' }}>능력치</h5>\n                  {Object.entries(selectedShopItem.stats).map(([stat, value]) => \n                    value > 0 && (\n                      <div key={stat} style={{\n                        display: 'flex',\n                        justifyContent: 'space-between',\n                        color: '#10b981',\n                        fontSize: '12px',\n                        marginBottom: '5px'\n                      }}>\n                        <span>\n                          {stat === 'attack' ? '⚔️ 공격력' :\n                           stat === 'defense' ? '🛡️ 방어력' :\n                           stat === 'hp' ? '❤️ 체력' :\n                           stat === 'mp' ? '💙 마나' :\n                           stat === 'speed' ? '💨 속도' :\n                           stat === 'critRate' ? '💥 크리티컬' : stat}\n                        </span>\n                        <span>+{value}</span>\n                      </div>\n                    )\n                  )}\n                </div>\n              )}\n\n              {/* 가격 정보 */}\n              <div style={{ marginBottom: '15px' }}>\n                <h5 style={{ color: 'white', margin: '0 0 10px 0', fontSize: '14px' }}>\n                  {shopCategory === 'buy' ? '구매 가격' : \n                   shopCategory === 'sell' ? '판매 가격' : '제작 비용'}\n                </h5>\n                <p style={{ color: '#f59e0b', fontSize: '14px', margin: 0, fontWeight: 'bold' }}>\n                  {shopCategory === 'buy' ? selectedShopItem.price.toLocaleString() :\n                   shopCategory === 'sell' ? Math.floor(selectedShopItem.price * 0.7).toLocaleString() :\n                   (selectedShopItem.price * 1.5).toLocaleString()}골드\n                </p>\n              </div>\n\n              {/* 액션 버튼 */}\n              <div style={{ display: 'flex', flexDirection: 'column', gap: '10px' }}>\n                {shopCategory === 'buy' && (\n                  <button\n                    onClick={() => {\n                      buyItem(selectedShopItem);\n                      setSelectedShopItem(null);\n                    }}\n                    disabled={character.gold < selectedShopItem.price}\n                    style={{\n                      background: character.gold >= selectedShopItem.price \n                        ? 'linear-gradient(135deg, #10b981 0%, #059669 100%)' \n                        : '#6b7280',\n                      color: 'white',\n                      border: 'none',\n                      borderRadius: '6px',\n                      padding: '12px',\n                      fontSize: '14px',\n                      cursor: character.gold >= selectedShopItem.price ? 'pointer' : 'not-allowed',\n                      fontWeight: 'bold'\n                    }}\n                  >\n                    구매하기 ({selectedShopItem.price.toLocaleString()}G)\n                  </button>\n                )}\n                \n                {shopCategory === 'sell' && (\n                  <button\n                    onClick={() => {\n                      const sellPrice = Math.floor(selectedShopItem.price * 0.7);\n                      setCharacter(prev => ({ ...prev, gold: prev.gold + sellPrice }));\n                      setInventory(prev => prev.filter(invItem => invItem.id !== selectedShopItem.id));\n                      addToCombatLog(`${selectedShopItem.name}을 ${sellPrice} 골드에 판매했습니다!`);\n                      setSelectedShopItem(null);\n                    }}\n                    style={{\n                      background: 'linear-gradient(135deg, #f59e0b 0%, #d97706 100%)',\n                      color: 'white',\n                      border: 'none',\n                      borderRadius: '6px',\n                      padding: '12px',\n                      fontSize: '14px',\n                      cursor: 'pointer',\n                      fontWeight: 'bold'\n                    }}\n                  >\n                    판매하기 ({Math.floor(selectedShopItem.price * 0.7).toLocaleString()}G)\n                  </button>\n                )}\n\n                {shopCategory === 'craft' && (\n                  <button\n                    onClick={() => {\n                      const craftPrice = Math.floor(selectedShopItem.price * 1.5);\n                      if (character.gold >= craftPrice) {\n                        setCharacter(prev => ({ ...prev, gold: prev.gold - craftPrice }));\n                        setInventory(prev => [...prev, { ...selectedShopItem, id: `${selectedShopItem.id}_${Date.now()}` }]);\n                        addToCombatLog(`${selectedShopItem.name}을 제작했습니다!`);\n                        setSelectedShopItem(null);\n                      }\n                    }}\n                    disabled={character.gold < Math.floor(selectedShopItem.price * 1.5)}\n                    style={{\n                      background: character.gold >= Math.floor(selectedShopItem.price * 1.5)\n                        ? 'linear-gradient(135deg, #8b5cf6 0%, #7c3aed 100%)' \n                        : '#6b7280',\n                      color: 'white',\n                      border: 'none',\n                      borderRadius: '6px',\n                      padding: '12px',\n                      fontSize: '14px',\n                      cursor: character.gold >= Math.floor(selectedShopItem.price * 1.5) ? 'pointer' : 'not-allowed',\n                      fontWeight: 'bold'\n                    }}\n                  >\n                    제작하기 ({Math.floor(selectedShopItem.price * 1.5).toLocaleString()}G)\n                  </button>\n                )}\n              </div>\n            </div>\n          ) : (\n            <div style={{\n              background: 'rgba(255, 255, 255, 0.05)',\n              borderRadius: '10px',\n              padding: '40px',\n              textAlign: 'center',\n              color: '#6b7280'\n            }}>\n              <p>상품을 클릭하여 정보를 확인하세요</p>\n            </div>\n          )}\n        </div>\n      </div>\n\n      {/* 하단 골드 정보 */}\n      <div style={{\n        marginTop: '20px',\n        background: 'linear-gradient(135deg, #f59e0b 0%, #d97706 100%)',\n        borderRadius: '10px',\n        padding: '15px',\n        display: 'flex',\n        justifyContent: 'space-between',\n        alignItems: 'center',\n        color: 'white'\n      }}>\n        <div style={{ display: 'flex', alignItems: 'center', gap: '10px' }}>\n          <span style={{ fontSize: '24px' }}>💰</span>\n          <div>\n            <div style={{ fontSize: '14px', opacity: 0.9 }}>보유 골드</div>\n            <div style={{ fontSize: '20px', fontWeight: 'bold' }}>\n              {character.gold.toLocaleString()}G\n            </div>\n          </div>\n        </div>\n        <div style={{ textAlign: 'right' }}>\n          <div style={{ fontSize: '12px', opacity: 0.8 }}>\n            {shopCategory === 'buy' ? '구매할 수 있는 아이템을 선택하세요' :\n             shopCategory === 'sell' ? '판매할 아이템을 선택하세요' :\n             '제작할 아이템을 선택하세요'}\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n\n  const renderTabs = () => (\n    <div\n      style={{\n        background: \"#374151\",\n        display: \"flex\",\n        borderRadius: \"15px 15px 0 0\",\n        overflow: \"hidden\",\n      }}\n    >\n      {[\n        { id: \"lobby\", name: t(\"rpg.tabs.lobby\"), icon: \"🏠\" },\n        { id: \"character\", name: t(\"rpg.tabs.character\"), icon: \"👤\" },\n        { id: \"inventory\", name: t(\"rpg.tabs.inventory\"), icon: \"🎒\" },\n        { id: \"skills\", name: t(\"rpg.tabs.skills\"), icon: \"✨\" },\n        { id: \"dungeon\", name: t(\"rpg.tabs.dungeon\"), icon: \"🏰\" },\n        { id: \"shop\", name: t(\"rpg.tabs.shop\"), icon: \"🛒\" },\n      ].map((tab) => (\n        <button\n          key={tab.id}\n          onClick={() => setCurrentTab(tab.id as any)}\n          style={{\n            background: currentTab === tab.id ? colors.accent : \"transparent\",\n            color: colors.text,\n            border: \"none\",\n            padding: \"15px 20px\",\n            fontSize: \"14px\",\n            cursor: \"pointer\",\n            flex: 1,\n            transition: \"all 0.3s ease\",\n          }}\n        >\n          <div>{tab.icon}</div>\n          <div style={{ fontSize: \"12px\", marginTop: \"5px\" }}>{tab.name}</div>\n        </button>\n      ))}\n    </div>\n  );\n\n  return (\n    <div\n      style={{\n        width: \"100%\",\n        maxWidth: \"1200px\",\n        margin: \"0 auto\",\n        background: colors.cardBg,\n        borderRadius: \"20px\",\n        overflow: \"hidden\",\n        boxShadow: \"0 20px 60px rgba(0, 0, 0, 0.3)\",\n        fontFamily:\n          '-apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto, sans-serif',\n        border: `1px solid ${colors.cardBorder}`,\n      }}\n    >\n      {/* 게임 타이틀 */}\n      <div\n        style={{\n          background: colors.backgroundSecondary,\n          padding: \"20px\",\n          textAlign: \"center\",\n          position: \"relative\",\n          overflow: \"hidden\",\n        }}\n      >\n        <div\n          style={{\n            position: \"absolute\",\n            top: 0,\n            left: 0,\n            right: 0,\n            bottom: 0,\n            background:\n              \"radial-gradient(circle at 50% 50%, rgba(147, 51, 234, 0.3) 0%, transparent 70%)\",\n          }}\n        />\n        <h1\n          style={{\n            margin: 0,\n            fontSize: \"32px\",\n            fontWeight: \"bold\",\n            color: colors.text,\n            textShadow: \"0 4px 20px rgba(147, 51, 234, 0.5)\",\n            position: \"relative\",\n            zIndex: 1,\n          }}\n        >\n          {t(\"rpg.title\")}\n        </h1>\n        <p\n          style={{\n            margin: \"10px 0 0 0\",\n            color: colors.textSecondary,\n            fontSize: \"16px\",\n            position: \"relative\",\n            zIndex: 1,\n          }}\n        >\n          {t(\"rpg.subtitle\")}\n        </p>\n      </div>\n\n      {/* 탭 메뉴 */}\n      {renderTabs()}\n\n      {/* 현재 탭 컨텐츠 */}\n      {currentTab === \"lobby\" && renderLobbyTab()}\n      {currentTab === \"dungeon\" && renderDungeonTab()}\n      {currentTab === \"character\" && renderCharacterTab()}\n      {currentTab === \"inventory\" && renderInventoryTab()}\n      {currentTab === \"skills\" && renderSkillsTab()}\n      {currentTab === \"shop\" && renderShopTab()}\n    </div>\n  );\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}